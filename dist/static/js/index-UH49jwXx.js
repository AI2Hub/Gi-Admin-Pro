function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/FileList-D6O7UwBU.js","static/js/index-CGlxYqiM.js","static/css/index-DazTgS1e.css","static/js/FileImage-BF8F9DtY.js","static/js/index-Bvz4iN5B.js","static/css/index-BFbg51mE.css","static/js/file-vS2Qaiq0.js","static/css/FileImage-xx6NddVd.css","static/js/FileRightMenu-DZwKMAta.js","static/css/FileRightMenu-B22lDTUf.css","static/css/FileList-7-wMloLQ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{af as e,b as a,M as t,a1 as l,V as i,f2 as n,f3 as o,eX as s,k as d,d as u,l as c,n as r,$ as m,f4 as p,e as f,o as _,f as v,h as y,w as g,I as h,F as w,j as k,g as b,c as x,r as C,t as j,a as I,D as F,ap as M,f5 as T,y as P,z as S,i as N,eY as R,_ as O}from"./index-CGlxYqiM.js";import{_ as A}from"./index-Bvz4iN5B.js";import{a as B}from"./index.es-7K9SQiaH.js";import q from"./ModalContent-BdXHboK7.js";import{_ as E}from"./ModalContent.vue_vue_type_script_setup_true_lang-BWZgst6b.js";import{_ as L}from"./ModalContent.vue_vue_type_script_setup_true_lang-BRDz-kWN.js";import V from"./ModalContent-CWIi4IKu.js";import W from"./FilePath-DhXgGO64.js";import $ from"./FileGrid-D1YLztsc.js";import{I as z,F as D}from"./file-vS2Qaiq0.js";import"./index-D-ZbT48E.js";import"./FileImage-BF8F9DtY.js";import"./FileRightMenu-DZwKMAta.js";let H="";function G(e){if(!H)return H=e.id,function(e,a){const t=document.createElement("div");document.body.appendChild(t);const l=n(e,{...a,onClose:()=>{setTimeout((()=>{l.unmount(),document.body.removeChild(t),(null==a?void 0:a.callback)&&(null==a||a.callback())}),350)}});l.use(o),l.use(s),l.mount(t)}(V,{data:e,callback:()=>{H=""}})}const Q=e=>(P("data-v-cdef62a3"),e=e(),S(),e),X={class:"file-main"},Y=Q((()=>N("span",null,"上传文件",-1))),J=Q((()=>N("span",null,"上传文件夹",-1))),K=O(u({__name:"index",setup(n){const o=T((()=>R((()=>import("./FileList-D6O7UwBU.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])))),s=c(),u=r(),{mode:P,selectedFileIds:S,toggleMode:N,addSelectedFileItem:O}=function(){const e=a("grid"),t=a([]),l=d((()=>t.value.map((e=>e.id))));return{mode:e,selectedFileList:t,selectedFileIds:l,toggleMode:()=>{e.value="grid"===e.value?"list":"grid"},addSelectedFileItem:e=>{if(l.value.includes(e.id)){const a=t.value.findIndex((a=>a.id===e.id));t.value.splice(a,1)}else t.value.push(e)}}}(),V=a(!1),H=a(!1),Q=a([]),K=a("0");K.value=s.query.fileType||"0";const U=async()=>{try{V.value=!0,H.value=!1;const t=await(a={fileType:K.value},e.get("/file/list",a));Q.value=t.data.records}catch(t){return t}finally{V.value=!1}var a},Z=()=>{U()};m((()=>{U()})),p((e=>{e.query.fileType&&(K.value=e.query.fileType,U())}));const ee=d((()=>Q.value.filter((e=>z.includes(e.extendName))).map((e=>e.src??"")))),ae=e=>{if(i.success(`点击了文件-${e.name}`),z.includes(e.extendName)&&e.src&&ee.value.length){const a=ee.value.findIndex((a=>a===e.src));B({images:ee.value,options:{initialViewIndex:a}})}var a;"mp4"===e.extendName&&(a=e,t.open({title:"视频播放",width:"auto",modalStyle:{},content:()=>l(L,{data:a})})),"mp3"===e.extendName&&G(e)},te=e=>{O(e)},le=(e,n)=>{i.success(`点击了${e}`),"delete"===e&&t.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1,okButtonProps:{status:"danger"},onBeforeOk:async()=>await new Promise((e=>setTimeout((()=>e(!0)),300)))}),"rename"===e&&function(){const e=a();t.open({title:"重命名",width:"90%",modalStyle:{maxWidth:"450px"},modalAnimationName:"el-fade",content:()=>l(E,{ref:a=>{e.value=a}}),onBeforeOk:async()=>{var a,t;return!(await(null==(t=null==(a=e.value)?void 0:a.formRef)?void 0:t.validate()))&&(await new Promise((e=>setTimeout((()=>e(!0)),300))),i.success("重命名成功"),!0)}})}(),"move"===e&&function(){const e=a();t.open({title:"移动到",width:"90%",modalStyle:{maxWidth:"500px"},modalAnimationName:"el-dialog",maskAnimationName:"el-mask",content:()=>l(q,{ref:a=>{e.value=a}}),onBeforeOk:async()=>{var a,t;return!(await(null==(t=null==(a=e.value)?void 0:a.formRef)?void 0:t.validate()))&&(await new Promise((e=>setTimeout((()=>e(!0)),300))),i.success("移动成功"),!0)}})}(),"detail"===e&&u.push({path:"/file/detail"})},ie=()=>{t.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,a)=>{const t=f("icon-upload"),l=f("a-button"),i=A,n=f("a-doption"),s=f("a-dropdown"),d=f("a-option"),u=f("a-select"),c=f("a-input"),r=f("icon-search"),m=f("a-input-group"),p=f("a-space"),T=f("icon-delete"),R=f("icon-select-all"),O=f("icon-swap"),B=f("a-tooltip"),q=f("icon-filter"),E=f("icon-apps"),L=f("icon-list"),z=f("a-button-group"),G=f("a-row"),K=f("a-empty"),U=f("a-spin");return _(),v("div",X,[y(W),y(G,{justify:"space-between",class:"file-main__search"},{default:g((()=>[y(p,{wrap:""},{default:g((()=>[y(s,null,{content:g((()=>[y(n,null,{icon:g((()=>[y(i,{name:"upload-file"})])),default:g((()=>[Y])),_:1}),y(n,null,{icon:g((()=>[y(i,{name:"upload-folder"})])),default:g((()=>[J])),_:1})])),default:g((()=>[y(l,{type:"primary",shape:"round"},{icon:g((()=>[y(t)])),default:g((()=>[h("上传")])),_:1})])),_:1}),y(m,null,{default:g((()=>[y(u,{placeholder:"请选择","trigger-props":{autoFitPopupMinWidth:!0},style:{width:"150px"}},{default:g((()=>[(_(!0),v(w,null,k(b(D),(e=>(_(),x(d,{key:e.value},{icon:g((()=>[(_(),x(C(e.icon),{size:"18",color:"#999"}))])),default:g((()=>[h(j(e.name),1)])),_:2},1024)))),128))])),_:1}),y(c,{placeholder:"请输入关键词...","allow-clear":""}),y(l,{type:"primary",onClick:Z},{icon:g((()=>[y(r)])),default:g((()=>[h("搜索")])),_:1})])),_:1})])),_:1}),y(p,{wrap:""},{default:g((()=>[b(H)?(_(),x(l,{key:0,disabled:!b(S).length,type:"primary",status:"danger",onClick:ie},{icon:g((()=>[y(T)])),_:1},8,["disabled"])):I("",!0),y(l,{type:"primary",onClick:a[0]||(a[0]=e=>H.value=!b(H))},{icon:g((()=>[y(R)])),default:g((()=>[h(j(b(H)?"取消批量":"批量操作"),1)])),_:1}),y(z,null,{default:g((()=>[y(B,{content:"传输列表",position:"bottom"},{default:g((()=>[y(l,null,{icon:g((()=>[y(O)])),_:1})])),_:1}),y(B,{content:"排序",position:"bottom"},{default:g((()=>[y(l,null,{icon:g((()=>[y(q)])),_:1})])),_:1}),y(B,{content:"视图",position:"bottom"},{default:g((()=>[y(l,{onClick:b(N)},{icon:g((()=>["grid"===b(P)?(_(),x(E,{key:0})):(_(),x(L,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),y(U,{class:"file-main__list",loading:b(V)},{default:g((()=>[F(y($,{data:b(Q),"is-batch-mode":b(H),"selected-file-ids":b(S),onClick:ae,onSelect:te,onRightMenuClick:le},null,8,["data","is-batch-mode","selected-file-ids"]),[[M,b(Q).length&&"grid"===b(P)]]),F(y(b(o),{data:b(Q),"is-batch-mode":b(H),"selected-file-ids":b(S),onClick:ae,onSelect:te,onRightMenuClick:le},null,8,["data","is-batch-mode","selected-file-ids"]),[[M,b(Q).length&&"list"===b(P)]]),F(y(K,null,null,512),[[M,!b(Q).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-cdef62a3"]]);export{K as default};
