import{L as pe,M as re,eF as k,eG as M,eu as F,d as _e,eD as me,G as fe,eA as he,eH as ye,g as w,z as ve,eI as ge,r as t,o as d,c as A,a as e,w as n,f as b,F as Ce,b as we,u as i,e as v,J as be,t as q,E as G,W as S,X as T,N as z,R as W,i as ke,p as Me,j as Fe,h as H,_ as xe}from"./index-080ea662.js";import{f as Ie,i as j}from"./file-map-2a15779f.js";import{a as Le}from"./index.es-8d9edd59.js";/* empty css               */import Se from"./FileNavPath-57f0e260.js";import Te from"./FileGrid-63d9b832.js";import Be from"./FileList-5e4cb2e8.js";import{_ as Ne}from"./Dialog.vue_vue_type_script_setup_true_lang-d6aeb2a9.js";import De from"./Dialog-3619511c.js";import Ve from"./Dialog-ac056947.js";import $e from"./Dialog-dbc59b9c.js";import"./FileImg-3e58afa0.js";import"./FileRightMenu-c5622274.js";function Re(l){return pe.get(`${re}/file/list`,l)}let h=null,p=null;function Ee(l){h!==null&&h.unmount(),p!==null&&document.body.removeChild(p),p=document.createElement("div"),document.body.appendChild(p),h=k(Ne,{fileInfo:l,onCancel:()=>{setTimeout(()=>{s(),h=null,p=null},500)}}).use(M).use(F);function s(){h!==null&&h.unmount(),p!==null&&document.body.removeChild(p)}h.mount(p)}let y=null,r=null;function Ae(l){y!==null&&y.unmount(),r!==null&&document.body.removeChild(r),r=document.createElement("div"),document.body.appendChild(r),y=k(De,{fileInfo:l,onCancel:()=>{setTimeout(()=>{s(),y=null,r=null},500)}}).use(M).use(F);function s(){y!==null&&y.unmount(),r!==null&&document.body.removeChild(r)}y.mount(r)}function qe(l){const s=document.createElement("div");document.body.appendChild(s);const u=k(Ve,{fileInfo:l,onClose:()=>{setTimeout(()=>{u.unmount(),document.body.removeChild(s)},350)}});u.use(M),u.use(F),u.mount(s)}function Ge(l){const s=document.createElement("div");document.body.appendChild(s);const u=k($e,{fileInfo:l,onClose:()=>{setTimeout(()=>{u.unmount(),document.body.removeChild(s)},350)}});u.use(M),u.use(F),u.mount(s)}const J=l=>(Me("data-v-1756481f"),l=l(),Fe(),l),ze={class:"file-main"},We=J(()=>H("span",null,"上传文件",-1)),je=J(()=>H("span",null,"上传文件夹",-1)),He=_e({__name:"index",setup(l){var V;const s=me(),u=fe(),{width:P}=he(),_=ye(),g=w(!1),m=w([]),x=w("0");x.value=((V=s.query.fileType)==null?void 0:V.toString())||"0";const B=async()=>{try{g.value=!0,f.value=!1;const o=await Re({fileType:x.value});m.value=o.data.list}catch(o){return o}finally{g.value=!1}};ve(()=>{B()}),ge(o=>{var a;o.query.fileType&&(x.value=(a=o.query.fileType)==null?void 0:a.toString(),B())});const f=w(!1),N=o=>{if(z.success(`点击了文件-${o.name}`),j.includes(o.extendName)&&o.src){const a=m.value.filter(c=>j.includes(c.extendName)).map(c=>c.src||""),I=a.findIndex(c=>c===o.src);a.length&&Le({options:{initialViewIndex:I},images:a})}o.extendName==="mp4"&&Ee(o),o.extendName==="mp3"&&Ae(o)},U=o=>{_.addSelectedFileItem(o)},D=(o,a)=>{z.success("点击了"+o),o==="delete"&&W.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),o==="rename"&&qe(a),o==="move"&&Ge(a),o==="detail"&&u.push({path:"/file/detail"})},X=()=>{W.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(o,a)=>{const I=t("icon-upload"),c=t("a-button"),$=ke,R=t("a-doption"),K=t("a-dropdown"),O=t("a-option"),Q=t("a-select"),Y=t("a-input"),Z=t("icon-search"),ee=t("a-input-group"),E=t("a-space"),ne=t("icon-delete"),oe=t("icon-select-all"),te=t("icon-swap"),L=t("a-tooltip"),ie=t("icon-filter"),le=t("icon-apps"),ae=t("icon-list"),se=t("a-button-group"),ce=t("a-row"),ue=t("a-empty"),de=t("a-spin");return d(),A("div",ze,[e(Se),e(ce,{justify:"space-between",class:"row-operate"},{default:n(()=>[e(E,null,{default:n(()=>[e(K,null,{content:n(()=>[e(R,null,{icon:n(()=>[e($,{name:"upload-file"})]),default:n(()=>[We]),_:1}),e(R,null,{icon:n(()=>[e($,{name:"upload-folder"})]),default:n(()=>[je]),_:1})]),default:n(()=>[e(c,{type:"primary",shape:"round"},{icon:n(()=>[e(I)]),default:n(()=>[b("上传")]),_:1})]),_:1}),e(ee,null,{default:n(()=>[e(Q,{style:{width:"150px"},placeholder:"请选择"},{default:n(()=>[(d(!0),A(Ce,null,we(i(Ie),C=>(d(),v(O,{key:C.value},{icon:n(()=>[(d(),v(be(C.icon),{size:"18",color:"#999"}))]),default:n(()=>[b(q(C.name),1)]),_:2},1024))),128))]),_:1}),e(Y,{placeholder:"请输入关键词...","allow-clear":""}),e(c,{type:"primary"},{icon:n(()=>[e(Z)]),default:n(()=>[b("搜索")]),_:1})]),_:1})]),_:1}),i(P)>715?(d(),v(E,{key:0},{default:n(()=>[i(f)?(d(),v(c,{key:0,disabled:!i(_).selectedFileIdList.length,type:"primary",status:"danger",onClick:X},{icon:n(()=>[e(ne)]),_:1},8,["disabled"])):G("",!0),e(c,{type:"primary",onClick:a[0]||(a[0]=C=>f.value=!i(f))},{icon:n(()=>[e(oe)]),default:n(()=>[b(q(i(f)?"取消批量":"批量操作"),1)]),_:1}),e(se,null,{default:n(()=>[e(L,{content:"传输列表",position:"bottom"},{default:n(()=>[e(c,{onClick:a[1]||(a[1]=C=>g.value=!i(g))},{icon:n(()=>[e(te)]),_:1})]),_:1}),e(L,{content:"排序",position:"bottom"},{default:n(()=>[e(c,null,{icon:n(()=>[e(ie)]),_:1})]),_:1}),e(L,{content:"视图",position:"bottom"},{default:n(()=>[e(c,{onClick:i(_).changeViewMode},{icon:n(()=>[i(_).viewMode==="grid"?(d(),v(le,{key:0})):(d(),v(ae,{key:1}))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):G("",!0)]),_:1}),e(de,{class:"file-wrap",loading:i(g)},{default:n(()=>[S(e(Te,{data:i(m),isBatchMode:i(f),selectedFileIdList:i(_).selectedFileIdList,onClick:N,onCheck:U,onRightMenuClick:D},null,8,["data","isBatchMode","selectedFileIdList"]),[[T,i(m).length&&i(_).viewMode=="grid"]]),S(e(Be,{data:i(m),isBatchMode:i(f),onClick:N,onRightMenuClick:D},null,8,["data","isBatchMode"]),[[T,i(m).length&&i(_).viewMode=="list"]]),S(e(ue,null,null,512),[[T,!i(m).length]])]),_:1},8,["loading"])])}}});const ln=xe(He,[["__scopeId","data-v-1756481f"]]);export{ln as default};
