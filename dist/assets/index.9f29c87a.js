import{ey as $e,h as g,s as Ae,v as Y,d as R,q as Ce,o as u,m as k,w as t,es as ie,ez as ze,j as N,a as B,n as Ie,el as Te,eu as xe,_ as Z,r as se,c as S,G as J,i as o,b as e,ei as K,k as f,eA as Ve,eB as Ne,L as Me,em as ve,ej as Se,J as Q,K as U,I as j,M as L,p as Oe,e as Pe,u as he,eC as ge,er as ye,ek as Re,eD as Ge}from"./index.fda5f129.js";import{_ as be}from"./GiHead.5db9f57c.js";import"./index.463d26de.js";import{u as we}from"./usePagination.098a2517.js";import"./viewer.171a1e67.js";import{g as ke}from"./index.f8bbcd2e.js";import{o as Ue,c as He}from"./index.d27d7049.js";import{G as le,a as Be}from"./GiOptionItem.59b79fb3.js";import{O as je,P as qe}from"./regexp.eca22655.js";import{_ as We}from"./GiSvgIcon.7f18dda5.js";import"./GiTitle.d1bfeab0.js";const Ke="/mock";function De(){return $e.get(`${Ke}/cate/tree`)}function Le(v,y,c={alignPoint:!1}){const s=g(!1),p=g(0),i=g(0),l=_=>{s.value=_},F=()=>{const _={};return v.clientX>window.innerWidth-i.value?_.right=c.alignPoint?window.innerWidth-v.clientX-p.value/2+"px":window.innerWidth-v.clientX+"px":_.left=c.alignPoint?v.clientX+p.value/2+"px":v.clientX+"px",v.clientY>window.innerHeight-i.value?(_.bottom=window.innerHeight-v.clientY+"px",_["transform-origin"]="center bottom"):(_.top=v.clientY+2+"px",_["transform-origin"]="center top"),_["z-index"]=999,_};return Ae(()=>{s.value=!0,Y(()=>{!y||(i.value=y==null?void 0:y.offsetHeight,p.value=y==null?void 0:y.offsetWidth,F())})}),{visible:s,setVisible:l,getStyle:F}}function Xe(v,y="\u65B0\u5EFA\u5206\u7C7B"){let c=0;for(let s=0;s<v.length+1;s++)if(!v.includes(`${y}${s+1}`)){c=s+1;break}return`${y}${c}`}const Je=R({name:"GiContextMenu"}),Ye=R({...Je,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(v,{expose:y,emit:c}){const s=v,p=g(null),{visible:i,setVisible:l,getStyle:F}=Le(s.event,p,s.options);Ue(p,()=>{l(!1),c("close")},{capture:!1,ignore:s.ignoreRefs});const{width:_,height:T}=He();return Ce(()=>[_.value,T.value],()=>{l(!1),c("close")}),y({visible:i,onHidden:()=>{l(!1),c("close")}}),(b,x)=>(u(),k(xe,{name:"slide-dynamic-origin"},{default:t(()=>[ie(B("div",{class:"gi-context-menu",ref_key:"elRef",ref:p,style:Te(N(F)())},[Ie(b.$slots,"default",{},void 0,!0)],4),[[ze,N(i)]])]),_:3}))}});const Qe=Z(Ye,[["__scopeId","data-v-4ada3c17"]]),Ze={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},et=R({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(v,{emit:y}){const c=v,s=g(null),p=se({callback:{onClick:(l,F,_)=>{i(l,F,_)}}});Ce(c.treeData,()=>{Y(()=>{var l;s.value=$.fn.zTree.init($("#movetree"),p,c.treeData),(l=s.value)==null||l.expandAll(!0)})},{deep:!0,immediate:!0});function i(l,F,_){y("node-click",_)}return(l,F)=>(u(),S("ul",Ze,null,512))}}),tt=f("\u65B0\u589E"),nt=f("\u91CD\u547D\u540D"),ot=f(" \u79FB\u52A8 "),at=f("\u5220\u9664"),lt=R({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(v,{expose:y}){const c=v,s=g(null),p=g(null),i=g([p]),l=g(!1),F=J(()=>c.fileInfo.id!==""),_=J(()=>c.fileInfo.id!=="root"),T=J(()=>c.fileInfo.id!=="root"),A=J(()=>c.fileInfo.id!=="root"),b=()=>{l.value=!1,c.onClose()},x=C=>{if(C==="move")return l.value=!l.value,!1;Y(()=>{var w;c.onClick(C),(w=s.value)==null||w.onHidden()})},D=()=>{var C;(C=s.value)==null||C.onHidden()};return y({menuRef:s,showMoveTreePopup:l,onClose:b,onClickItem:x}),(C,w)=>{const z=o("a-popover");return u(),k(Qe,{ref_key:"menuRef",ref:s,event:v.event,ignoreRefs:i.value,onClose:b},{default:t(()=>[e(Be,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[N(F)?(u(),k(le,{key:0,icon:"IconPlusCircle",onClick:w[0]||(w[0]=r=>x("add"))},{default:t(()=>[tt]),_:1})):K("",!0),N(_)?(u(),k(le,{key:1,icon:"IconEdit",onClick:w[1]||(w[1]=r=>x("rename"))},{default:t(()=>[nt]),_:1})):K("",!0),e(z,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":l.value},{content:t(()=>[B("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:p},[e(et,{"tree-data":v.treeData,onNodeClick:D},null,8,["tree-data"])],512)]),default:t(()=>[N(T)?(u(),k(le,{key:0,more:"",icon:"IconExport",active:l.value,onClick:w[2]||(w[2]=r=>x("move"))},{default:t(()=>[ot]),_:1},8,["active"])):K("",!0)]),_:1},8,["popup-visible"]),N(A)?(u(),k(le,{key:2,icon:"IconDelete",onClick:w[3]||(w[3]=r=>x("delete"))},{default:t(()=>[at]),_:1})):K("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const ut=Z(lt,[["__scopeId","data-v-991fe312"]]);let W=null,X=null;function st(v,y,c){return new Promise(s=>{p(),X=document.createElement("div"),document.body.appendChild(X),W=Ve(ut,{event:v,fileInfo:y,treeData:c,onClick:i=>{s({mode:i,fileInfo:y}),setTimeout(()=>{p()},360)},onClose:()=>{setTimeout(()=>{p()},360)}}),W.use(Ne),W.use(Me),W.mount(X);function p(){W!==null&&(W.unmount(),W=null),X!==null&&(document.body.removeChild(X),X=null)}})}const fe="/gi-demo/assets/com-file-open.a82dbda1.svg",ae="/gi-demo/assets/com-file-close.e0ebbcc4.svg",it="/gi-demo/assets/com-file.9070581a.svg",ct={class:"cate-tree"},rt={class:"search-wrap"},dt={class:"wrap"},_t=R({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(v,{emit:y}){const c=g(!1),s=g(""),p=g(null),i=g([]),l=g(null),F=g(null),_=(r,h,a)=>{console.log("\u70B9\u51FB\u8282\u70B9",a),F.value=a,y("node-click")},T=se({callback:{onRightClick:(r,h,a)=>{console.log("\u9F20\u6807\u53F3\u952E",a),a&&(F.value=a,st(r,a,i.value).then(n=>{console.log("res",n),n.mode==="add"&&x(),n.mode==="rename"&&D(),n.mode==="delete"&&C()}))},onClick:(r,h,a)=>{_(r,h,a)}}}),A=r=>{if(!r.length)return;function h(a){a.forEach(n=>{n.children&&n.children.length?(n.iconOpen=fe,n.iconClose=ae,h(n.children)):(n.children=null,n.iconOpen=fe,n.iconClose=ae,n.icon=ae,n.type==null&&(n.icon=it))})}h(r)};(async()=>{try{c.value=!0;const r=await De();if(r.success){const h=r.data;A(h),i.value=h,Y(()=>{var a;l.value=$.fn.zTree.init($("#treeDemo"),T,i.value),(a=l.value)==null||a.expandAll(!0)})}}catch(r){return r}finally{c.value=!1}})();const x=()=>{var M,E,I;const r=((M=F.value)==null?void 0:M.children)||[];let h="\u65B0\u5EFA\u5206\u7C7B1";if(r&&r.length){const V=r.map(O=>O.name);h=Xe(V,"\u65B0\u5EFA\u5206\u7C7B")}const a=new Date().getTime().toString(),n={id:a,name:h,children:null,iconOpen:fe,iconClose:ae,icon:ae,isParent:!1};(E=l.value)==null||E.addNodes(F.value||{},n,!0);const d=(I=l.value)==null?void 0:I.getNodesByParam("id",a);setTimeout(()=>{var V;(V=l.value)==null||V.editName(d[0])},100)},D=()=>{Y(()=>{var h,a,n;const r=(a=l.value)==null?void 0:a.getNodesByParam("id",(h=F.value)==null?void 0:h.id);(n=l.value)==null||n.editName(r[0])})},C=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1})},w=(r,h)=>{let a=!1;if(r.name.indexOf(h)>-1&&(a=!0),r.children){const n=r.children;for(let d=0;d<n.length;d++){const M=n[d];w(M,h)?a=!0:n.splice(d--,1)}}return a},z=()=>{var h,a;let r=s.value;if(!r)l.value=$.fn.zTree.init($("#treeDemo"),T,i.value),(h=l.value)==null||h.expandAll(!0);else{const n=JSON.parse(JSON.stringify(i.value));for(let d=0;d<n.length;d++)w(n[d],r)||n.splice(d--,1);l.value=$.fn.zTree.init($("#treeDemo"),T,n),(a=l.value)==null||a.expandAll(!0)}};return(r,h)=>{const a=o("icon-search"),n=o("a-input");return u(),S("div",ct,[B("div",rt,[e(n,{"allow-clear":"",maxlength:20,placeholder:v.placeholder,modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=d=>s.value=d),onInput:z,onClear:z},{prefix:t(()=>[e(a)]),_:1},8,["placeholder","modelValue"])]),B("div",dt,[B("ul",{id:"treeDemo",ref_key:"treeRef",ref:p,class:"ztree cate-ztree"},null,512)])])}}});const pt=Z(_t,[["__scopeId","data-v-b221a124"]]),Fe=v=>(Oe("data-v-5101f6e1"),v=v(),Pe(),v),mt=Fe(()=>B("div",null,"\u4EC5\u652F\u6301\u4E2D\u6587\u59D3\u540D",-1)),ft=f("\u5173\u95ED"),vt=f("\u5F00\u542F"),ht=Fe(()=>B("span",null,"\u6743\u9650\u914D\u7F6E",-1)),gt=Fe(()=>B("span",null,"\u81EA\u5B9A\u4E49\u7BA1\u7406\u5458\u3001\u7F16\u8F91\u8005\u7684\u6743\u9650\uFF0C \u70B9\u51FB",-1)),yt=f("\u4E86\u89E3\u66F4\u591A\u6743\u9650"),wt=f("\u7BA1\u7406\u5458"),kt=f("\u7F16\u8F91\u8005"),Ft=R({__name:"EditModal",setup(v,{expose:y}){const c=[{name:"\u65B0\u589E"},{name:"\u7F16\u8F91"},{name:"\u91CD\u547D\u540D"},{name:"\u5206\u4EAB"},{name:"\u5220\u9664"}],s=se({name:"",phone:"",status:!1}),p={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{match:je,message:"\u53EA\u80FD\u662F\u4E2D\u6587\u59D3\u540D"},{minLength:1,maxLength:4,message:"\u540D\u5B57\u6700\u957F\u4E0D\u8D85\u8FC74\u4E2A\u5B57\u7B26"}],phone:[{match:qe,message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"}],status:[{required:!0}]},i=g(!1),l=g(""),F=J(()=>!!l.value),_=J(()=>F.value?"\u7F16\u8F91":"\u65B0\u589E"),T=g(),A=async D=>{var w;await((w=T.value)==null?void 0:w.validate())?D(!1):setTimeout(()=>{D(!0),L.success(F.value?"\u7F16\u8F91\u6210\u529F":"\u65B0\u589E\u6210\u529F")},1500)};return y({add:()=>{l.value="",i.value=!0},edit:D=>{l.value=D,i.value=!0}}),(D,C)=>{const w=o("a-input"),z=o("a-form-item"),r=o("a-radio"),h=o("a-radio-group"),a=o("a-form"),n=o("a-row"),d=o("icon-question-circle-fill"),M=o("a-link"),E=o("a-tooltip"),I=o("a-space"),V=o("icon-right"),O=o("a-checkbox"),q=o("a-checkbox-group"),ee=o("a-collapse-item"),te=o("a-collapse"),ne=o("a-modal");return u(),k(ne,{visible:i.value,"onUpdate:visible":C[3]||(C[3]=P=>i.value=P),title:N(_),"on-before-ok":A},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(a,{ref_key:"formRef",ref:T,model:s,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(z,{field:"name",label:"\u59D3\u540D",rules:p.name},{extra:t(()=>[mt]),default:t(()=>[e(w,{modelValue:s.name,"onUpdate:modelValue":C[0]||(C[0]=P=>s.name=P),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(z,{field:"phone",label:"\u624B\u673A\u53F7"},{default:t(()=>[e(w,{modelValue:s.phone,"onUpdate:modelValue":C[1]||(C[1]=P=>s.phone=P),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(z,{field:"status",label:"\u72B6\u6001",rules:p.status},{default:t(()=>[e(h,{modelValue:s.status,"onUpdate:modelValue":C[2]||(C[2]=P=>s.status=P)},{default:t(()=>[e(r,{value:!1},{default:t(()=>[ft]),_:1}),e(r,{value:!0},{default:t(()=>[vt]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(te,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(ee,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(I,null,{default:t(()=>[ht,e(E,{position:"right","content-style":{width:"200px"}},{content:t(()=>[gt,e(M,{type:"primary",hoverable:!1},{default:t(()=>[yt]),_:1})]),default:t(()=>[e(d,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:P})=>[e(V,{class:Se({gi_rotate_90deg:P})},null,8,["class"])]),default:t(()=>[(u(),S(j,null,Q(c,(P,oe)=>e(n,{justify:"space-between",key:oe},{default:t(()=>[B("span",null,U(P.name),1),e(q,null,{default:t(()=>[e(O,{value:"1"},{default:t(()=>[wt]),_:1}),e(O,{value:"2"},{default:t(()=>[kt]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Ee=Z(Ft,[["__scopeId","data-v-5101f6e1"]]),ue=[{name:"\u7981\u7528",value:0,color:"red"},{name:"\u542F\u7528",value:1,color:"green"}],Ct={class:"data-pane"},xt={class:"gi_box pane-left"},bt={class:"gi_box pane-right"},Bt={class:"content"},Dt=f("\u65B0\u589E"),Et=f("\u5220\u9664"),$t=f("\u5BFC\u51FA"),At={class:"table-box"},zt=f("\u4FEE\u6539"),It=f("\u8BE6\u60C5"),Tt=f("\u5220\u9664"),Vt=R({name:"DataManage"}),Nt=R({...Vt,setup(v){const y=he(),c=[{title:"\u5E8F\u53F7",width:68,slotName:"index"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5730\u5740",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"\u6BD4\u4F8B",slotName:"proportion",width:200},{title:"\u72B6\u6001",slotName:"status",width:100,align:"center"},{title:"\u64CD\u4F5C",slotName:"operation",width:200,align:"center",fixed:"right"}],{pagination:s,setTotal:p}=we(()=>A()),i=se({name:"",status:""}),l=g([]),F=g(!1),_=g(),T=n=>n<30?"danger":n<60?"warning":"success",A=async()=>{F.value=!0;const n=await ke({current:s.current,pageSize:s.pageSize,...i});n.success&&(l.value=n.data.list,p(n.data.total)),F.value=!1};ge(()=>{A()});const b=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{l.value=[]}})},x=()=>{var n;(n=_.value)==null||n.add()},D=n=>{var d;(d=_.value)==null||d.edit(n.id)},C=()=>{y.push({path:"/data/detail"})},w=n=>{L.success("\u5220\u9664\u6210\u529F"),A()},z=()=>{if(!r.value.length)return L.warning("\u8BF7\u52FE\u9009\u6570\u636E");L.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},r=g([]),h=(n,d,M)=>{r.value=n},a=n=>{r.value=n?l.value.map(d=>d.id):[]};return(n,d)=>{const M=be,E=o("icon-plus"),I=o("a-button"),V=o("icon-delete"),O=o("icon-export"),q=o("a-space"),ee=o("a-option"),te=o("a-select"),ne=o("a-input"),P=o("icon-search"),oe=o("a-input-group"),ce=o("icon-refresh"),H=o("a-row"),re=o("a-progress"),de=o("a-tag"),_e=o("a-popconfirm"),pe=o("a-table"),me=ye("loading");return u(),S("div",Ct,[B("section",xt,[e(M,{title:"\u6570\u636E\u5206\u7C7B"}),e(pt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:d[0]||(d[0]=m=>N(s).onChange(1))})]),B("section",bt,[e(M,{title:"\u6570\u636E\u5217\u8868"}),B("div",Bt,[e(H,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(q,null,{default:t(()=>[e(I,{type:"primary",onClick:x},{icon:t(()=>[e(E)]),default:t(()=>[Dt]),_:1}),e(I,{type:"primary",status:"danger",onClick:b},{icon:t(()=>[e(V)]),default:t(()=>[Et]),_:1}),e(I,{type:"primary",status:"success",onClick:z},{icon:t(()=>[e(O)]),default:t(()=>[$t]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(te,{modelValue:i.status,"onUpdate:modelValue":d[1]||(d[1]=m=>i.status=m),placeholder:"\u8BF7\u9009\u62E9","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(u(!0),S(j,null,Q(N(ue),m=>(u(),k(ee,{key:m.value,value:m.value},{default:t(()=>[f(U(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(oe,null,{default:t(()=>[e(ne,{modelValue:i.name,"onUpdate:modelValue":d[2]||(d[2]=m=>i.name=m),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(I,{type:"primary",onClick:A},{default:t(()=>[e(P)]),_:1})]),_:1}),e(I,{type:"primary",onClick:A},{icon:t(()=>[e(ce)]),_:1})]),_:1})]),_:1}),B("section",At,[ie((u(),k(pe,{"row-key":"id",size:"small",bordered:{cell:!0},columns:c,data:l.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:N(s),onSelect:h,onSelectAll:a},{index:t(({rowIndex:m})=>[f(U(m+1),1)]),proportion:t(({record:m})=>[e(re,{status:T(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),status:t(({record:m})=>[(u(!0),S(j,null,Q(N(ue),G=>(u(),S(j,{key:G.value},[G.value===m.status?(u(),k(de,{key:0,size:"small",color:G.color},{default:t(()=>[f(U(G.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:m})=>[e(q,null,{default:t(()=>[e(I,{type:"primary",size:"mini",onClick:G=>D(m)},{default:t(()=>[zt]),_:2},1032,["onClick"]),e(I,{size:"mini",onClick:C},{default:t(()=>[It]),_:1}),e(_e,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:G=>w(m.id)},{default:t(()=>[e(I,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Tt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["data","pagination"])),[[me,F.value]])])])]),e(Ee,{ref_key:"EditModalRef",ref:_},null,512)])}}}),Mt={class:"cate-tree"},St={class:"search-wrap"},Ot={class:"wrap"},Pt=f("\u65B0\u589E"),Rt=f("\u91CD\u547D\u540D"),Gt=f(" \u79FB\u52A8 "),Ut=f("\u5220\u9664"),Ht=R({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(v,{emit:y}){const c=g(!1),s=g(),p=g(""),i=g([]),l=()=>{y("node-click")};return(async()=>{try{c.value=!0;const _=await De();_.success&&(i.value=_.data,Y(()=>{s.value.expandAll()}))}catch(_){return _}finally{c.value=!1}})(),(_,T)=>{const A=o("icon-search"),b=o("a-input"),x=We,D=o("icon-drive-file"),C=le,w=o("a-tree"),z=o("a-scrollbar"),r=o("a-popover"),h=Be,a=o("a-trigger");return u(),S("div",Mt,[B("div",St,[e(b,{"allow-clear":"",maxlength:20,placeholder:v.placeholder,modelValue:p.value,"onUpdate:modelValue":T[0]||(T[0]=n=>p.value=n)},{prefix:t(()=>[e(A)]),_:1},8,["placeholder","modelValue"])]),B("div",Ot,[e(z,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(w,{ref_key:"treeRef",ref:s,"show-line":"",size:"mini",data:i.value,fieldNames:{key:"id"},onSelect:l},{"switcher-icon":t((n,{checked:d,selected:M,expanded:E})=>[n.children&&n.children.length&&E?(u(),k(x,{key:0,class:"switcher-icon",name:"plus-square",size:16})):n.children&&n.children.length&&!E?(u(),k(x,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(u(),k(D,{key:2,size:16}))]),icon:t(n=>[n.children?n.children?(u(),k(x,{key:1,name:"com-file-open",size:16})):(u(),k(x,{key:2,name:"com-file",size:16})):(u(),k(x,{key:0,name:"com-file-close",size:16}))]),title:t(n=>[e(a,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(h,{width:110,style:{"background-color":"var(--color-bg-3)","box-shadow":"0 4px 10px rgb(0 0 0 / 10%)"}},{default:t(()=>[e(C,{icon:"IconPlusCircle"},{default:t(()=>[Pt]),_:1}),e(C,{icon:"IconEdit"},{default:t(()=>[Rt]),_:1}),e(r,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(z,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(w,{ref:"treeMoveRef","show-line":"",size:"mini",data:i.value[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((d,{checked:M,selected:E,expanded:I})=>[d.children&&d.children.length&&I?(u(),k(x,{key:0,class:"switcher-icon",name:"plus-square",size:16})):d.children&&d.children.length&&!I?(u(),k(x,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(u(),k(D,{key:2,size:16}))]),icon:t(d=>[d.children?d.children?(u(),k(x,{key:1,name:"com-file-open",size:16})):(u(),k(x,{key:2,name:"com-file",size:16})):(u(),k(x,{key:0,name:"com-file-close",size:16}))]),_:2},1032,["data"])]),_:2},1024)]),default:t(()=>[e(C,{more:"",icon:"IconExport"},{default:t(()=>[Gt]),_:1})]),_:2},1024),e(C,{icon:"IconDelete"},{default:t(()=>[Ut]),_:1})]),_:2},1024)]),default:t(()=>[B("div",null,U(n.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const jt=Z(Ht,[["__scopeId","data-v-551a37b6"]]),qt={class:"data-pane"},Wt={class:"gi_box pane-left"},Kt={class:"gi_box pane-right"},Lt={class:"content"},Xt=f("\u5220\u9664"),Jt={class:"table-box"},Yt=f("\u4FEE\u6539"),Qt=f("\u8BE6\u60C5"),Zt=f("\u5220\u9664"),en=R({name:"DataManage"}),tn=R({...en,setup(v){const y=he(),{pagination:c,setTotal:s}=we(()=>_()),p=se({name:"",status:""}),i=g([]),l=g(!1),F=a=>a<30?"danger":a<60?"warning":"success",_=async()=>{try{l.value=!0;const a=await ke({current:c.current,pageSize:c.pageSize,...p});i.value=a.data.list,s(a.data.total)}catch(a){return a}finally{l.value=!1}};ge(()=>{_()});const T=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{i.value=[]}})},A=g(),b=()=>{var a;(a=A.value)==null||a.add()},x=a=>{var n;(n=A.value)==null||n.edit(a.id)},D=()=>{y.push({path:"/data/detail"})},C=a=>{L.success("\u5220\u9664\u6210\u529F"),_()},w=()=>{if(!z.value.length)return L.warning("\u8BF7\u52FE\u9009\u6570\u636E");L.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},z=g([]),r=(a,n,d)=>{z.value=a},h=a=>{z.value=a?i.value.map(n=>n.id):[]};return(a,n)=>{const d=be,M=o("icon-plus"),E=o("a-button"),I=o("icon-delete"),V=o("icon-export"),O=o("a-space"),q=o("a-option"),ee=o("a-select"),te=o("a-input"),ne=o("icon-search"),P=o("a-input-group"),oe=o("icon-refresh"),ce=o("a-row"),H=o("a-table-column"),re=o("a-progress"),de=o("a-tag"),_e=o("a-popconfirm"),pe=o("a-table"),me=ye("loading");return u(),S("div",qt,[B("section",Wt,[e(d,{title:"\u6570\u636E\u5206\u7C7B"}),e(jt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:n[0]||(n[0]=m=>N(c).onChange(1))})]),B("section",Kt,[e(d,{title:"\u6570\u636E\u5217\u8868"}),B("div",Lt,[e(ce,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(O,null,{default:t(()=>[e(E,{type:"primary",onClick:b},{icon:t(()=>[e(M)]),_:1}),e(E,{type:"primary",status:"danger",onClick:T},{icon:t(()=>[e(I)]),default:t(()=>[Xt]),_:1}),e(E,{type:"primary",status:"success",onClick:w},{icon:t(()=>[e(V)]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(ee,{modelValue:p.status,"onUpdate:modelValue":n[1]||(n[1]=m=>p.status=m),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(u(!0),S(j,null,Q(N(ue),m=>(u(),k(q,{key:m.value,value:m.value},{default:t(()=>[f(U(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(P,null,{default:t(()=>[e(te,{modelValue:p.name,"onUpdate:modelValue":n[2]||(n[2]=m=>p.name=m),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(E,{type:"primary",onClick:_},{default:t(()=>[e(ne)]),_:1})]),_:1}),e(E,{type:"primary",onClick:_},{icon:t(()=>[e(oe)]),_:1})]),_:1})]),_:1}),B("section",Jt,[ie((u(),k(pe,{"row-key":"id",size:"small",bordered:{cell:!0},data:i.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:N(c),onSelect:r,onSelectAll:h},{columns:t(()=>[e(H,{title:"\u5E8F\u53F7",width:68},{cell:t(m=>[f(U(m.rowIndex+1),1)]),_:1}),e(H,{title:"\u59D3\u540D","data-index":"name"}),e(H,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(H,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:m})=>[e(re,{status:F(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),_:1}),e(H,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:m})=>[(u(!0),S(j,null,Q(N(ue),G=>(u(),S(j,{key:G.value},[G.value===m.status?(u(),k(de,{key:0,size:"small",color:G.color},{default:t(()=>[f(U(G.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),_:1}),e(H,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime",width:180}),e(H,{title:"\u64CD\u4F5C",width:200,align:"center",fixed:"right"},{cell:t(({record:m})=>[e(O,null,{default:t(()=>[e(E,{type:"primary",size:"mini",onClick:G=>x(m)},{default:t(()=>[Yt]),_:2},1032,["onClick"]),e(E,{size:"mini",onClick:D},{default:t(()=>[Qt]),_:1}),e(_e,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:G=>C(m.id)},{default:t(()=>[e(E,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Zt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination"])),[[me,l.value]])])])]),e(Ee,{ref_key:"EditModalRef",ref:A},null,512)])}}}),nn={class:"data-pane3"},on=f("\u9996\u9875"),an=f("\u6570\u636E\u7BA1\u7406"),ln=f("\u5355\u4F4D\u7BA1\u7406"),un=f("\u91CD\u7F6E"),sn=f("\u63D0\u4EA4"),cn={class:"content"},rn={class:"table-box"},dn=f("\u8BE6\u60C5"),_n=R({__name:"Pane3",setup(v){he();const y=[{title:"\u5E8F\u53F7",width:68,slotName:"index"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5730\u5740",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"\u6BD4\u4F8B",slotName:"proportion",width:68,align:"center"},{title:"\u72B6\u6001",slotName:"status",width:100,align:"center"},{title:"\u64CD\u4F5C",slotName:"operation",width:200,align:"center"}],{pagination:c,setTotal:s}=we(()=>l()),p=g([]),i=g(!1),l=async()=>{i.value=!0;const b=await ke({current:c.current,pageSize:c.pageSize});b.success&&(p.value=b.data.list,s(b.data.total)),i.value=!1};ge(()=>{l()});const F=b=>b<30?"danger":b<60?"warning":"success",_=g([]),T=(b,x,D)=>{_.value=b},A=b=>{_.value=b?p.value.map(x=>x.id):[]};return(b,x)=>{const D=o("a-breadcrumb-item"),C=o("a-breadcrumb"),w=o("a-button"),z=o("a-space"),r=o("a-row"),h=o("a-progress"),a=o("a-tag"),n=o("icon-edit"),d=o("icon-delete"),M=o("a-popconfirm"),E=o("a-table"),I=ye("loading");return u(),S("div",nn,[e(r,{justify:"space-between",align:"center",class:"head"},{default:t(()=>[e(C,null,{default:t(()=>[e(D,null,{default:t(()=>[on]),_:1}),e(D,null,{default:t(()=>[an]),_:1}),e(D,null,{default:t(()=>[ln]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(w,null,{default:t(()=>[un]),_:1}),e(w,{type:"primary"},{default:t(()=>[sn]),_:1})]),_:1})]),_:1}),B("section",cn,[B("section",rn,[ie((u(),k(E,{"row-key":"id",size:"small",bordered:{cell:!0},columns:y,data:p.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:N(c),onSelect:T,onSelectAll:A},{index:t(({rowIndex:V})=>[f(U(V+1),1)]),proportion:t(({record:V})=>[e(h,{size:"mini",status:F(V.proportion),percent:V.proportion/100},null,8,["status","percent"])]),status:t(({record:V})=>[(u(!0),S(j,null,Q(N(ue),O=>(u(),S(j,{key:O.value},[O.value===V.status?(u(),k(a,{key:0,size:"small",color:O.color},{default:t(()=>[f(U(O.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:V})=>[e(z,null,{default:t(()=>[e(w,{type:"primary",size:"mini"},{default:t(()=>[e(n)]),_:1}),e(w,{size:"mini"},{default:t(()=>[dn]),_:1}),e(M,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?"},{default:t(()=>[e(w,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[e(d)]),_:1})]),_:1})]),_:1})]),_:1},8,["data","pagination"])),[[I,i.value]])])])])}}});const pn=Z(_n,[["__scopeId","data-v-d2578ec7"]]),mn={class:"manage"},fn={class:"tab"},vn=R({name:"DataManage"}),En=R({...vn,setup(v){const y={1:Nt,2:tn,3:pn},c=g(2);return(s,p)=>{const i=o("a-tab-pane"),l=o("a-tabs");return u(),S("div",mn,[B("section",fn,[e(l,{"hide-content":"",size:"medium","active-key":c.value,"onUpdate:active-key":p[0]||(p[0]=F=>c.value=F)},{default:t(()=>[(u(),k(i,{key:1,title:"\u5468\u671F\u7BA1\u7406"})),(u(),k(i,{key:2,title:"\u7EF4\u5EA6\u7BA1\u7406"})),(u(),k(i,{key:3,title:"\u5355\u4F4D\u7BA1\u7406"}))]),_:1},8,["active-key"])]),e(xe,{name:"fade-slide",mode:"out-in",appear:""},{default:t(()=>[(u(),k(Ge,null,[(u(),k(Re(y[c.value])))],1024))]),_:1})])}}});export{En as default};
