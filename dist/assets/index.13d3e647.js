import"./index.463d26de.js";import"./viewer.1f3e054e.js";import{u as M}from"./useApiSystem.5e348865.js";import{d as U,r as I,G as W,h as N,i as o,o as c,m as f,w as t,b as e,j as A,k as E,er as H,c as J,a as v,es as K,ei as O,p as P,e as Q,_ as X}from"./index.5487bf96.js";const Y=E("\u6B63\u5E38"),Z=E("\u7981\u7528"),ee=U({__name:"EditDeptModal",setup(h,{expose:B}){const y=I(""),i=I(!1),_=W(()=>y.value?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),{deptList:b,getDeptList:V}=M(),a=N({id:"",parentId:"",name:"",sort:0,status:1});return B({add:()=>{y.value="",i.value=!0},edit:async l=>{b.value.length||await V(),y.value=l,i.value=!0}}),(l,n)=>{const m=o("a-tree-select"),r=o("a-form-item"),D=o("a-input"),k=o("a-input-number"),d=o("a-radio"),x=o("a-radio-group"),w=o("a-form"),C=o("a-modal");return c(),f(C,{visible:i.value,"onUpdate:visible":n[4]||(n[4]=u=>i.value=u),title:A(_)},{default:t(()=>[e(w,{ref:"formRef",model:a,size:"medium","auto-label-width":""},{default:t(()=>[e(r,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:t(()=>[e(m,{modelValue:a.parentId,"onUpdate:modelValue":n[0]||(n[0]=u=>a.parentId=u),"allow-clear":"",data:A(b),placeholder:"\u8BF7\u9009\u62E9",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["modelValue","data"])]),_:1}),e(r,{label:"\u90E8\u95E8\u540D\u79F0",field:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 10\u4E2A\u5B57\u7B26"}],"validate-trigger":["change","input"]},{default:t(()=>[e(D,{modelValue:a.name,"onUpdate:modelValue":n[1]||(n[1]=u=>a.name=u),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0","allow-clear":""},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6392\u5E8F",name:"sort",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F\u5E8F\u53F7"}]},{default:t(()=>[e(k,{modelValue:a.sort,"onUpdate:modelValue":n[2]||(n[2]=u=>a.sort=u),style:{width:"120px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"\u72B6\u6001",name:"status"},{default:t(()=>[e(x,{modelValue:a.status,"onUpdate:modelValue":n[3]||(n[3]=u=>a.status=u)},{default:t(()=>[e(d,{value:1},{default:t(()=>[Y]),_:1}),e(d,{value:0},{default:t(()=>[Z]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),g=h=>(P("data-v-0da0f05b"),h=h(),Q(),h),te={class:"dept-manage"},oe=g(()=>v("span",null,"\u90E8\u95E8\u540D\u79F0",-1)),ae=g(()=>v("span",null,"\u72B6\u6001",-1)),ne=E("\u6B63\u5E38"),ue=E("\u7981\u7528"),le=g(()=>v("span",null,"\u641C\u7D22",-1)),se=g(()=>v("span",null,"\u91CD\u7F6E",-1)),de=g(()=>v("span",null,"\u65B0\u589E\u90E8\u95E8",-1)),ie={class:"table-box"},_e=E("\u6B63\u5E38"),ce=E("\u7981\u7528"),pe=U({name:"DeptManage"}),me=U({...pe,setup(h){const{deptList:B,getDeptList:y}=M(),i=I(),_=N({name:"",status:""}),b=()=>{y()},V=()=>{_.name="",_.status=""},a=()=>{var p;(p=i.value)==null||p.add()},R=p=>{var l;(l=i.value)==null||l.edit(p.id)};return(p,l)=>{const n=o("a-input"),m=o("a-space"),r=o("a-option"),D=o("a-select"),k=o("icon-search"),d=o("a-button"),x=o("icon-sync"),w=o("icon-plus"),C=o("a-row"),u=o("IconDown"),$=o("IconRight"),F=o("a-table-column"),z=o("a-tag"),L=o("icon-edit"),S=o("icon-delete"),q=o("a-popconfirm"),T=o("a-table"),j=H("loading");return c(),J("div",te,[e(m,{size:20,class:"head"},{default:t(()=>[e(m,null,{default:t(()=>[oe,e(n,{modelValue:_.name,"onUpdate:modelValue":l[0]||(l[0]=s=>_.name=s),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[ae,e(D,{modelValue:_.status,"onUpdate:modelValue":l[1]||(l[1]=s=>_.status=s),placeholder:"\u90E8\u95E8\u72B6\u6001",style:{width:"120px"}},{default:t(()=>[e(r,{value:1},{default:t(()=>[ne]),_:1}),e(r,{value:0},{default:t(()=>[ue]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(d,{type:"primary",onClick:b},{icon:t(()=>[e(k)]),default:t(()=>[le]),_:1}),e(d,{onClick:V},{icon:t(()=>[e(x)]),default:t(()=>[se]),_:1})]),_:1})]),_:1}),e(C,{class:"head"},{default:t(()=>[e(d,{type:"primary",onClick:a},{icon:t(()=>[e(w)]),default:t(()=>[de]),_:1})]),_:1}),v("section",ie,[K((c(),f(T,{ref:"tableRef","row-key":"id",data:A(B),scroll:{x:"100%",y:"100%",minWidth:900},pagination:!1,expandable:{width:80}},{"expand-icon":t(({expanded:s})=>[s?(c(),f(u,{key:0})):(c(),f($,{key:1}))]),columns:t(()=>[e(F,{title:"\u90E8\u95E8\u540D\u79F0","data-index":"name"}),e(F,{title:"\u6392\u5E8F","data-index":"sort",width:100}),e(F,{title:"\u72B6\u6001",width:100},{cell:t(({record:s})=>[s.status==1?(c(),f(z,{key:0,color:"green"},{default:t(()=>[_e]),_:1})):(c(),f(z,{key:1,color:"red"},{default:t(()=>[ce]),_:1}))]),_:1}),e(F,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime",width:200}),e(F,{title:"\u64CD\u4F5C",width:150,align:"left"},{cell:t(({record:s})=>[e(m,null,{default:t(()=>[e(d,{type:"primary",size:"mini",onClick:G=>R(s)},{icon:t(()=>[e(L)]),_:2},1032,["onClick"]),s.parentId?(c(),f(d,{key:0,type:"primary",status:"success",size:"mini",onClick:G=>a()},{icon:t(()=>[e(w)]),_:2},1032,["onClick"])):O("",!0),e(q,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?"},{default:t(()=>[e(d,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(S)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[j,p.loading]])]),e(ee,{ref_key:"EditDeptModalRef",ref:i},null,512)])}}});const he=X(me,[["__scopeId","data-v-0da0f05b"]]);export{he as default};
