import{_ as e}from"./GiCellGender.vue_vue_type_script_setup_true_lang-BDhzT38g.js";import{_ as a}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-PkPwhyba.js";import{_ as l}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-Cb0-UHTu.js";import{_ as t}from"./AddUserModal.vue_vue_type_script_setup_true_lang-1cTWqhoB.js";import{_ as n}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-9aZzaQsI.js";import{d as i,b as r,U as s,e as d,o,f as u,h as c,w as p,g as m,J as _,I as f,t as g,c as y,a as x,L as h,i as v,V as w,S as k}from"./index-CWOC3-4p.js";import{u as j}from"./useTable-CE1v3PD-.js";import{u as b}from"./useDept-Cemu_e7F.js";import{a as S}from"./user-DIpRzMhc.js";import{d as C}from"./index-B_SqyxR5.js";import{u as V}from"./useDict-BGmcOu4W.js";import"./regexp-LyZ7ySAN.js";import"./role-DEuQkKUf.js";import"./useForm-B5jrtrsr.js";import"./useBreakpoint-CLpMNkPb.js";import"./index-DvUWsLHI.js";const U={class:"gi_page user-manage"},A=v("span",null,"新增",-1),D=v("span",null,"删除",-1),z=v("span",null,"查询",-1),G=v("span",null,"重置",-1),B=v("span",null,"编辑",-1),I=v("span",null,"删除",-1),L=i({name:"SystemUser",__name:"index",setup(i){const{data:v}=V({code:"status"}),L=r(),M=r(),R=r(),T=r(""),{deptList:K,getDeptList:O}=b({onSuccess:()=>{k((()=>{var e;null==(e=L.value)||e.expandAll(!0)}))}});O();const W=s({status:"",username:""}),{loading:F,tableData:J,pagination:N,selectedKeys:X,search:q,select:E,selectAll:H,handleDelete:P}=j((e=>S(e)),{immediate:!0}),Q=()=>{W.status="",W.username="",q()},Y=()=>{if(!X.value.length)return w.warning("请选择用户！");P((()=>C({ids:X.value})))},Z=()=>{var e;null==(e=M.value)||e.add()};return(i,r)=>{const s=d("icon-search"),w=d("a-input"),k=d("a-tree"),j=d("a-col"),b=d("icon-plus"),S=d("a-button"),V=d("icon-delete"),O=d("a-space"),$=d("a-select"),ee=d("a-input-group"),ae=d("icon-refresh"),le=d("a-row"),te=d("a-table-column"),ne=d("a-link"),ie=l,re=a,se=e,de=d("a-tag"),oe=d("icon-edit"),ue=d("a-popconfirm"),ce=d("a-table"),pe=d("a-card");return o(),u("div",U,[c(pe,{title:"用户管理"},{default:p((()=>[c(le,{gutter:16},{default:p((()=>[c(j,{xs:0,md:6,lg:6,xl:6,xxl:4},{default:p((()=>[c(w,{modelValue:m(T),"onUpdate:modelValue":r[0]||(r[0]=e=>_(T)?T.value=e:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:p((()=>[c(s)])),_:1},8,["modelValue"]),c(k,{ref_key:"treeRef",ref:L,"block-node":"","show-line":"","default-expand-all":"",data:m(K),"field-names":{key:"id",title:"name",children:"children"},onSelect:m(q)},null,8,["data","onSelect"])])),_:1}),c(j,{xs:24,md:18,lg:18,xl:18,xxl:20},{default:p((()=>[c(le,{justify:"space-between"},{default:p((()=>[c(O,{wrap:""},{default:p((()=>[c(S,{type:"primary",onClick:Z},{icon:p((()=>[c(b)])),default:p((()=>[A])),_:1}),c(S,{type:"primary",status:"danger",onClick:Y},{icon:p((()=>[c(V)])),default:p((()=>[D])),_:1})])),_:1}),c(O,{wrap:""},{default:p((()=>[c(ee,null,{default:p((()=>[c($,{modelValue:m(W).status,"onUpdate:modelValue":r[1]||(r[1]=e=>m(W).status=e),options:m(v),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),c(w,{modelValue:m(W).username,"onUpdate:modelValue":r[2]||(r[2]=e=>m(W).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])])),_:1}),c(S,{type:"primary",onClick:m(q)},{icon:p((()=>[c(s)])),default:p((()=>[z])),_:1},8,["onClick"]),c(S,{onClick:Q},{icon:p((()=>[c(ae)])),default:p((()=>[G])),_:1})])),_:1})])),_:1}),c(ce,{"row-key":"id",loading:m(F),data:m(J),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:m(N),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":m(X),onSelect:m(E),onSelectAll:m(H)},{columns:p((()=>[c(te,{title:"序号",width:64},{cell:p((e=>[f(g(e.rowIndex+1),1)])),_:1}),c(te,{title:"用户名","data-index":"username",width:120},{cell:p((({record:e})=>[c(ne,{onClick:a=>{return l=e,void(null==(t=R.value)||t.open(l.id));var l,t}},{default:p((()=>[f(g(e.username),1)])),_:2},1032,["onClick"])])),_:1}),c(te,{title:"昵称","data-index":"nickname",width:150},{cell:p((({record:e})=>[c(ie,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),c(te,{title:"状态",width:100,align:"center"},{cell:p((({record:e})=>[c(re,{status:e.status},null,8,["status"])])),_:1}),c(te,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:p((({record:e})=>[c(se,{gender:e.gender},null,8,["gender"])])),_:1}),c(te,{title:"联系方式","data-index":"phone",width:180}),c(te,{title:"部门","data-index":"deptName",width:180}),c(te,{title:"类型",width:100,align:"center"},{cell:p((({record:e})=>[1===e.type?(o(),y(de,{key:0,color:"red",size:"small"},{default:p((()=>[f("系统内置")])),_:1})):x("",!0),2===e.type?(o(),y(de,{key:1,color:"orange",size:"small"},{default:p((()=>[f("自定义")])),_:1})):x("",!0)])),_:1}),c(te,{title:"描述",width:200,"data-index":"description"}),c(te,{title:"创建时间","data-index":"createTime",width:200}),c(te,{title:"操作",width:180,align:"center",fixed:m(h)()?void 0:"right"},{cell:p((({record:e})=>[c(O,null,{default:p((()=>[c(S,{type:"primary",size:"mini",onClick:a=>{return l=e,void(null==(t=M.value)||t.edit(l.id));var l,t}},{icon:p((()=>[c(oe)])),default:p((()=>[B])),_:2},1032,["onClick"]),c(ue,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:a=>{return l=e,P((()=>C({ids:[l.id]})),{showModal:!1});var l}},{default:p((()=>[c(S,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:p((()=>[c(V)])),default:p((()=>[I])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])])),_:1})])),_:1})])),_:1}),c(t,{ref_key:"AddUserModalRef",ref:M,onSaveSuccess:m(q)},null,8,["onSaveSuccess"]),c(n,{ref_key:"UserDetailDrawerRef",ref:R},null,512)])}}});export{L as default};
