import{d as Z,g as _,C as ee,r as a,o as s,c as v,a as e,w as t,h as y,u as c,L as te,e as i,E as k,f as g,i as ae,p as ne,j as oe,_ as se}from"./index-f4aadaae.js";import{u as ce}from"./usePagination-1f819496.js";import{u as le}from"./useDept-1a6658b9.js";import{b as ie}from"./index-e80237c0.js";import{_ as _e}from"./EditUserModal.vue_vue_type_script_setup_true_lang-4abd4938.js";const D=u=>(ne("data-v-9c985b69"),u=u(),oe(),u),de={class:"user-manage"},re={class:"content"},pe=D(()=>y("span",null,"新增用户",-1)),ue=D(()=>y("span",null,"搜索",-1)),me={class:"table-box"},fe={key:0},ge={key:1},ye=Z({name:"SystemUser",__name:"index",setup(u){const b=_(),h=_(),E=_(!1),x=_(""),m=_(!1),w=_([]),{current:L,pageSize:R,total:T,changeCurrent:U,changePageSize:B,setTotal:j}=ce(()=>{f()}),{deptList:A,getDeptList:M}=le();M(),ee(()=>{var o;(o=b.value)==null||o.expandAll()});const $=()=>{var o;(o=h.value)==null||o.add()},G=o=>{var d;(d=h.value)==null||d.edit(o.id)},f=async()=>{m.value=!0;const o=await ie();o.success&&(w.value=o.data.list,j(o.data.total)),m.value=!1};return f(),(o,d)=>{const C=a("icon-search"),z=a("a-input"),W=a("IconDown"),r=ae,q=a("a-tree"),F=a("a-spin"),S=a("a-card"),H=a("icon-plus"),p=a("a-button"),I=a("a-option"),J=a("a-select"),K=a("a-input-group"),V=a("a-space"),N=a("icon-delete"),O=a("a-row"),l=a("a-table-column"),P=a("a-tag"),Q=a("icon-edit"),X=a("a-popconfirm"),Y=a("a-table");return s(),v("div",de,[e(S,{title:"部门列表",bordered:!1,class:"gi_card left"},{default:t(()=>[y("div",re,[e(z,{modelValue:c(x),"onUpdate:modelValue":d[0]||(d[0]=n=>te(x)?x.value=n:null),placeholder:"请输入搜索关键词","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:t(()=>[e(C)]),_:1},8,["modelValue"]),e(F,{class:"tree-box",loading:c(E)},{default:t(()=>[e(q,{ref_key:"treeRef",ref:b,"block-node":"","default-expand-all":"",data:c(A),"field-names":{key:"id",title:"name",children:"children"},onSelect:f},{"switcher-icon":t(()=>[e(W)]),icon:t(({node:n})=>[n.level==1?(s(),i(r,{key:0,name:"com-dept",size:14})):k("",!0),n.level==2?(s(),i(r,{key:1,name:"com-sub-dept",size:12})):k("",!0),n.level==3?(s(),i(r,{key:2,name:"com-group",size:12})):k("",!0)]),_:1},8,["data"])]),_:1},8,["loading"])])]),_:1}),e(S,{title:"用户列表",bordered:!1,class:"gi_card right"},{default:t(()=>[e(O,{justify:"space-between"},{default:t(()=>[e(V,null,{default:t(()=>[e(p,{type:"primary",onClick:$},{icon:t(()=>[e(H)]),default:t(()=>[pe]),_:1}),e(K,null,{default:t(()=>[e(J,{placeholder:"部门状态","allow-clear":"",style:{width:"120px"}},{default:t(()=>[e(I,{value:1},{default:t(()=>[g("正常")]),_:1}),e(I,{value:0},{default:t(()=>[g("禁用")]),_:1})]),_:1}),e(z,{placeholder:"请输入关键词...","allow-clear":"",style:{width:"250px"}}),e(p,{type:"primary",onClick:f},{icon:t(()=>[e(C)]),default:t(()=>[ue]),_:1})]),_:1})]),_:1}),e(p,{type:"primary",status:"danger"},{icon:t(()=>[e(N)]),_:1})]),_:1}),y("section",me,[e(Y,{"row-key":"id",loading:c(m),data:c(w),scroll:{x:"100%",y:"100%",minWidth:900},pagination:{showPageSize:!0,total:c(T),current:c(L),pageSize:c(R)},onPageChange:c(U),onPageSizeChange:c(B)},{columns:t(()=>[e(l,{title:"用户编号","data-index":"userNo"}),e(l,{title:"用户名","data-index":"userName"}),e(l,{title:"用户昵称","data-index":"nickName"}),e(l,{title:"性别","data-index":"sex"},{cell:t(({record:n})=>[n.sex===1?(s(),v("span",fe,"男")):(s(),v("span",ge,"女"))]),_:1}),e(l,{title:"头像","data-index":"avatar"},{cell:t(({record:n})=>[n.sex===1?(s(),i(r,{key:0,name:"avatar-man",size:40})):(s(),i(r,{key:1,name:"avatar-woman",size:40}))]),_:1}),e(l,{title:"地址","data-index":"address"}),e(l,{title:"状态",width:100},{cell:t(({record:n})=>[n.status==1?(s(),i(P,{key:0,color:"green"},{default:t(()=>[g("正常")]),_:1})):(s(),i(P,{key:1,color:"red"},{default:t(()=>[g("禁用")]),_:1}))]),_:1}),e(l,{title:"创建时间","data-index":"createTime"}),e(l,{title:"操作",width:100,align:"center"},{cell:t(({record:n})=>[e(V,null,{default:t(()=>[e(p,{type:"primary",size:"mini",onClick:he=>G(n)},{icon:t(()=>[e(Q)]),_:2},1032,["onClick"]),e(X,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(p,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(N)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination","onPageChange","onPageSizeChange"])])]),_:1}),e(_e,{ref_key:"EditUserModalRef",ref:h},null,512)])}}});const Ce=se(ye,[["__scopeId","data-v-9c985b69"]]);export{Ce as default};
