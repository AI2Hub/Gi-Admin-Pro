import{u as B}from"./useDept-38b12c86.js";import"./utils-176e37a8.js";import{f as L,h as k,L as F,G as S,r as o,o as p,c as r,w as t,a as e,u as E,U as f,d as H,b as v,i as J,p as K,e as O,_ as P}from"./_plugin-vue_export-helper-9a924bd0.js";import"./index-e072260a.js";import"./auth-56bca224.js";import"./runtime-dom.esm-bundler-fb8c0843.js";import"./index-e3175ab6.js";const Q=L({__name:"EditDeptModal",setup(y,{expose:I}){const m=k(""),_=k(!1),C=F(()=>m.value?"编辑部门":"新增部门"),{deptList:i,getDeptList:h}=B();h();const n=S({id:"",parentId:"",name:"",sort:0,status:1});return I({add:()=>{m.value="",_.value=!0},edit:async c=>{i.value.length||await h(),m.value=c,_.value=!0}}),(c,a)=>{const U=o("a-tree-select"),s=o("a-form-item"),w=o("a-input"),R=o("a-input-number"),V=o("a-radio"),u=o("a-radio-group"),z=o("a-form"),x=o("a-modal");return p(),r(x,{visible:_.value,"onUpdate:visible":a[4]||(a[4]=l=>_.value=l),title:E(C)},{default:t(()=>[e(z,{ref:"formRef",model:n,size:"medium","auto-label-width":""},{default:t(()=>[e(s,{label:"上级部门",name:"parentId"},{default:t(()=>[e(U,{modelValue:n.parentId,"onUpdate:modelValue":a[0]||(a[0]=l=>n.parentId=l),"allow-clear":"",data:E(i),placeholder:"请选择",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["modelValue","data"])]),_:1}),e(s,{label:"部门名称",field:"name",rules:[{required:!0,message:"请输入部门名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],"validate-trigger":["change","input"]},{default:t(()=>[e(w,{modelValue:n.name,"onUpdate:modelValue":a[1]||(a[1]=l=>n.name=l),placeholder:"请输入部门名称","allow-clear":""},null,8,["modelValue"])]),_:1}),e(s,{label:"排序",name:"sort",rules:[{required:!0,message:"请输入排序序号"}]},{default:t(()=>[e(R,{modelValue:n.sort,"onUpdate:modelValue":a[2]||(a[2]=l=>n.sort=l),style:{width:"120px"}},null,8,["modelValue"])]),_:1}),e(s,{label:"状态",name:"status"},{default:t(()=>[e(u,{modelValue:n.status,"onUpdate:modelValue":a[3]||(a[3]=l=>n.status=l)},{default:t(()=>[e(V,{value:1},{default:t(()=>[f("正常")]),_:1}),e(V,{value:0},{default:t(()=>[f("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),b=y=>(K("data-v-a26d0d54"),y=y(),O(),y),X={class:"dept-manage"},Y=b(()=>v("span",null,"部门名称",-1)),Z=b(()=>v("span",null,"状态",-1)),ee=b(()=>v("span",null,"搜索",-1)),te=b(()=>v("span",null,"重置",-1)),oe=b(()=>v("span",null,"新增部门",-1)),ae={class:"table-box"},ne=L({name:"DeptManage"}),le=L({...ne,setup(y){const{deptList:I,getDeptList:m}=B();m();const _=k(),C=k(!1),i=S({name:"",status:""}),h=()=>{m()},n=()=>{i.name="",i.status=""},D=()=>{var c;(c=_.value)==null||c.add()},M=c=>{var a;(a=_.value)==null||a.edit(c.id)};return(c,a)=>{const U=o("a-input"),s=o("a-space"),w=o("a-option"),R=o("a-select"),V=o("icon-search"),u=o("a-button"),z=o("icon-sync"),x=o("icon-plus"),l=o("a-row"),$=o("IconDown"),q=o("IconRight"),g=o("a-table-column"),N=o("a-tag"),T=o("icon-edit"),A=o("icon-delete"),G=o("a-popconfirm"),W=o("a-table");return p(),H("div",X,[e(s,{size:20,class:"head"},{default:t(()=>[e(s,null,{default:t(()=>[Y,e(U,{modelValue:i.name,"onUpdate:modelValue":a[0]||(a[0]=d=>i.name=d),placeholder:"请输入部门名称","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[Z,e(R,{modelValue:i.status,"onUpdate:modelValue":a[1]||(a[1]=d=>i.status=d),placeholder:"部门状态",style:{width:"120px"}},{default:t(()=>[e(w,{value:1},{default:t(()=>[f("正常")]),_:1}),e(w,{value:0},{default:t(()=>[f("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(u,{type:"primary",onClick:h},{icon:t(()=>[e(V)]),default:t(()=>[ee]),_:1}),e(u,{onClick:n},{icon:t(()=>[e(z)]),default:t(()=>[te]),_:1})]),_:1})]),_:1}),e(l,{class:"head"},{default:t(()=>[e(u,{type:"primary",onClick:D},{icon:t(()=>[e(x)]),default:t(()=>[oe]),_:1})]),_:1}),v("section",ae,[e(W,{loading:C.value,ref:"tableRef","row-key":"id",data:E(I),scroll:{x:"100%",y:"100%",minWidth:900},pagination:!1,expandable:{width:80}},{"expand-icon":t(({expanded:d})=>[d?(p(),r($,{key:0})):(p(),r(q,{key:1}))]),columns:t(()=>[e(g,{title:"部门名称","data-index":"name"}),e(g,{title:"排序","data-index":"sort",width:100}),e(g,{title:"状态",width:100},{cell:t(({record:d})=>[d.status==1?(p(),r(N,{key:0,color:"green"},{default:t(()=>[f("正常")]),_:1})):(p(),r(N,{key:1,color:"red"},{default:t(()=>[f("禁用")]),_:1}))]),_:1}),e(g,{title:"创建时间","data-index":"createTime",width:200}),e(g,{title:"操作",width:150,align:"left"},{cell:t(({record:d})=>[e(s,null,{default:t(()=>[e(u,{type:"primary",size:"mini",onClick:j=>M(d)},{icon:t(()=>[e(T)]),_:2},1032,["onClick"]),d.parentId?(p(),r(u,{key:0,type:"primary",status:"success",size:"mini",onClick:a[2]||(a[2]=j=>D())},{icon:t(()=>[e(x)]),_:1})):J("",!0),e(G,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(u,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(A)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["loading","data"])]),e(Q,{ref_key:"EditDeptModalRef",ref:_},null,512)])}}});const me=P(le,[["__scopeId","data-v-a26d0d54"]]);export{me as default};
