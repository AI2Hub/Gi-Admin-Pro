import{ex as Ee,h as y,s as $e,v as Y,d as P,q as Ce,o as u,m as w,w as t,es as ue,ez as Ae,j as N,a as B,n as ze,el as Ie,et as xe,_ as Z,r as se,c as S,G as X,i as o,b as e,ei as K,k as f,eD as Te,eE as Ve,L as Ne,em as ve,ej as Me,J as Q,K as j,I as H,p as Se,e as Re,u as he,er as ge,M as J,ek as Oe,eH as Pe}from"./index.bc30e737.js";import{_ as Fe}from"./GiTitle.e13a6fa5.js";import"./index.463d26de.js";import{u as ye}from"./usePagination.aeddc0a3.js";import"./viewer.77aec138.js";import{g as we}from"./index.a023ce29.js";import{o as Ue,c as je}from"./index.a3830b43.js";import{_ as ae,a as be}from"./GiOptionItem.87b2c77c.js";import{_ as qe}from"./GiSvgIcon.c36df601.js";const He="/mock";function Be(){return Ee.get(`${He}/cate/tree`)}function We(v,g,c={alignPoint:!1}){const i=y(!1),p=y(0),s=y(0),l=_=>{i.value=_},C=()=>{const _={};return v.clientX>window.innerWidth-s.value?_.right=c.alignPoint?window.innerWidth-v.clientX-p.value/2+"px":window.innerWidth-v.clientX+"px":_.left=c.alignPoint?v.clientX+p.value/2+"px":v.clientX+"px",v.clientY>window.innerHeight-s.value?(_.bottom=window.innerHeight-v.clientY+"px",_["transform-origin"]="center bottom"):(_.top=v.clientY+2+"px",_["transform-origin"]="center top"),_["z-index"]=999,_};return $e(()=>{i.value=!0,Y(()=>{!g||(s.value=g==null?void 0:g.offsetHeight,p.value=g==null?void 0:g.offsetWidth,C())})}),{visible:i,setVisible:l,getStyle:C}}function Ge(v,g="\u65B0\u5EFA\u5206\u7C7B"){let c=0;for(let i=0;i<v.length+1;i++)if(!v.includes(`${g}${i+1}`)){c=i+1;break}return`${g}${c}`}const Ke=P({name:"GiContextMenu"}),Le=P({...Ke,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(v,{expose:g,emit:c}){const i=v,p=y(null),{visible:s,setVisible:l,getStyle:C}=We(i.event,p,i.options);Ue(p,()=>{l(!1),c("close")},{capture:!1,ignore:i.ignoreRefs});const{width:_,height:V}=je();return Ce(()=>[_.value,V.value],()=>{l(!1),c("close")}),g({visible:s,onHidden:()=>{l(!1),c("close")}}),(F,x)=>(u(),w(xe,{name:"slide-dynamic-origin"},{default:t(()=>[ue(B("div",{class:"gi-context-menu",ref_key:"elRef",ref:p,style:Ie(N(C)())},[ze(F.$slots,"default",{},void 0,!0)],4),[[Ae,N(s)]])]),_:3}))}});const Xe=Z(Le,[["__scopeId","data-v-4ada3c17"]]),Je={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},Ye=P({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(v,{emit:g}){const c=v,i=y(null),p=se({callback:{onClick:(l,C,_)=>{s(l,C,_)}}});Ce(c.treeData,()=>{Y(()=>{var l;i.value=$.fn.zTree.init($("#movetree"),p,c.treeData),(l=i.value)==null||l.expandAll(!0)})},{deep:!0,immediate:!0});function s(l,C,_){g("node-click",_)}return(l,C)=>(u(),S("ul",Je,null,512))}}),Qe=f("\u65B0\u589E"),Ze=f("\u91CD\u547D\u540D"),et=f(" \u79FB\u52A8 "),tt=f("\u5220\u9664"),nt=P({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(v,{expose:g}){const c=v,i=y(null),p=y(null),s=y([p]),l=y(!1),C=X(()=>c.fileInfo.id!==""),_=X(()=>c.fileInfo.id!=="root"),V=X(()=>c.fileInfo.id!=="root"),z=X(()=>c.fileInfo.id!=="root"),F=()=>{l.value=!1,c.onClose()},x=D=>{if(D==="move")return l.value=!l.value,!1;Y(()=>{var k;c.onClick(D),(k=i.value)==null||k.onHidden()})},b=()=>{var D;(D=i.value)==null||D.onHidden()};return g({menuRef:i,showMoveTreePopup:l,onClose:F,onClickItem:x}),(D,k)=>{const I=o("a-popover");return u(),w(Xe,{ref_key:"menuRef",ref:i,event:v.event,ignoreRefs:s.value,onClose:F},{default:t(()=>[e(be,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[N(C)?(u(),w(ae,{key:0,icon:"IconPlusCircle",onClick:k[0]||(k[0]=d=>x("add"))},{default:t(()=>[Qe]),_:1})):K("",!0),N(_)?(u(),w(ae,{key:1,icon:"IconEdit",onClick:k[1]||(k[1]=d=>x("rename"))},{default:t(()=>[Ze]),_:1})):K("",!0),e(I,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":l.value},{content:t(()=>[B("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:p},[e(Ye,{"tree-data":v.treeData,onNodeClick:b},null,8,["tree-data"])],512)]),default:t(()=>[N(V)?(u(),w(ae,{key:0,more:"",icon:"IconExport",active:l.value,onClick:k[2]||(k[2]=d=>x("move"))},{default:t(()=>[et]),_:1},8,["active"])):K("",!0)]),_:1},8,["popup-visible"]),N(z)?(u(),w(ae,{key:2,icon:"IconDelete",onClick:k[3]||(k[3]=d=>x("delete"))},{default:t(()=>[tt]),_:1})):K("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const ot=Z(nt,[["__scopeId","data-v-991fe312"]]);let G=null,L=null;function at(v,g,c){return new Promise(i=>{p(),L=document.createElement("div"),document.body.appendChild(L),G=Te(ot,{event:v,fileInfo:g,treeData:c,onClick:s=>{i({mode:s,fileInfo:g}),setTimeout(()=>{p()},360)},onClose:()=>{setTimeout(()=>{p()},360)}}),G.use(Ve),G.use(Ne),G.mount(L);function p(){G!==null&&(G.unmount(),G=null),L!==null&&(document.body.removeChild(L),L=null)}})}const fe="/gi-demo/assets/com-file-open.a82dbda1.svg",oe="/gi-demo/assets/com-file-close.e0ebbcc4.svg",lt="/gi-demo/assets/com-file.9070581a.svg",st={class:"cate-tree"},ut={class:"search-wrap"},it={class:"wrap"},ct=P({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(v,{emit:g}){const c=y(!1),i=y(""),p=y(null),s=y([]),l=y(null),C=y(null),_=(d,h,a)=>{console.log("\u70B9\u51FB\u8282\u70B9",a),C.value=a,g("node-click")},V=se({callback:{onRightClick:(d,h,a)=>{console.log("\u9F20\u6807\u53F3\u952E",a),a&&(C.value=a,at(d,a,s.value).then(n=>{console.log("res",n),n.mode==="add"&&x(),n.mode==="rename"&&b(),n.mode==="delete"&&D()}))},onClick:(d,h,a)=>{_(d,h,a)}}}),z=d=>{if(!d.length)return;function h(a){a.forEach(n=>{n.children&&n.children.length?(n.iconOpen=fe,n.iconClose=oe,h(n.children)):(n.children=null,n.iconOpen=fe,n.iconClose=oe,n.icon=oe,n.type==null&&(n.icon=lt))})}h(d)};(async()=>{try{c.value=!0;const d=await Be();if(d.success){const h=d.data;z(h),s.value=h,Y(()=>{var a;l.value=$.fn.zTree.init($("#treeDemo"),V,s.value),(a=l.value)==null||a.expandAll(!0)})}}catch(d){return d}finally{c.value=!1}})();const x=()=>{var M,E,A;const d=((M=C.value)==null?void 0:M.children)||[];let h="\u65B0\u5EFA\u5206\u7C7B1";if(d&&d.length){const T=d.map(O=>O.name);h=Ge(T,"\u65B0\u5EFA\u5206\u7C7B")}const a=new Date().getTime().toString(),n={id:a,name:h,children:null,iconOpen:fe,iconClose:oe,icon:oe,isParent:!1};(E=l.value)==null||E.addNodes(C.value||{},n,!0);const r=(A=l.value)==null?void 0:A.getNodesByParam("id",a);setTimeout(()=>{var T;(T=l.value)==null||T.editName(r[0])},100)},b=()=>{Y(()=>{var h,a,n;const d=(a=l.value)==null?void 0:a.getNodesByParam("id",(h=C.value)==null?void 0:h.id);(n=l.value)==null||n.editName(d[0])})},D=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1})},k=(d,h)=>{let a=!1;if(d.name.indexOf(h)>-1&&(a=!0),d.children){const n=d.children;for(let r=0;r<n.length;r++){const M=n[r];k(M,h)?a=!0:n.splice(r--,1)}}return a},I=()=>{var h,a;let d=i.value;if(!d)l.value=$.fn.zTree.init($("#treeDemo"),V,s.value),(h=l.value)==null||h.expandAll(!0);else{const n=JSON.parse(JSON.stringify(s.value));for(let r=0;r<n.length;r++)k(n[r],d)||n.splice(r--,1);l.value=$.fn.zTree.init($("#treeDemo"),V,n),(a=l.value)==null||a.expandAll(!0)}};return(d,h)=>{const a=o("icon-search"),n=o("a-input");return u(),S("div",st,[B("div",ut,[e(n,{"allow-clear":"",maxlength:20,placeholder:v.placeholder,modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=r=>i.value=r),onInput:I,onClear:I},{prefix:t(()=>[e(a)]),_:1},8,["placeholder","modelValue"])]),B("div",it,[B("ul",{id:"treeDemo",ref_key:"treeRef",ref:p,class:"ztree cate-ztree"},null,512)])])}}});const rt=Z(ct,[["__scopeId","data-v-b221a124"]]),ke=v=>(Se("data-v-7c4411df"),v=v(),Re(),v),dt=ke(()=>B("div",null,"\u4EC5\u652F\u6301\u4E2D\u6587\u59D3\u540D",-1)),_t=f("\u5173\u95ED"),pt=f("\u5F00\u542F"),mt=ke(()=>B("span",null,"\u6743\u9650\u914D\u7F6E",-1)),ft=ke(()=>B("span",null,"\u81EA\u5B9A\u4E49\u7BA1\u7406\u5458\u3001\u7F16\u8F91\u8005\u7684\u6743\u9650\uFF0C \u70B9\u51FB",-1)),vt=f("\u4E86\u89E3\u66F4\u591A\u6743\u9650"),ht=f("\u7BA1\u7406\u5458"),gt=f("\u7F16\u8F91\u8005"),yt=P({__name:"EditModal",setup(v,{expose:g}){const c=[{name:"\u65B0\u589E"},{name:"\u7F16\u8F91"},{name:"\u91CD\u547D\u540D"},{name:"\u5206\u4EAB"},{name:"\u5220\u9664"}],i=se({name:"",address:"",status:!1}),p={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{minLength:1,maxLength:4,message:"\u540D\u5B57\u6700\u957F\u4E0D\u8D85\u8FC74\u4E2A\u5B57\u7B26"}],status:[{required:!0}]},s=y(!1),l=y(""),C=X(()=>!!l.value),_=X(()=>C.value?"\u7F16\u8F91":"\u65B0\u589E"),V=()=>{s.value=!1};return g({add:()=>{l.value="",s.value=!0},edit:x=>{l.value=x,s.value=!0}}),(x,b)=>{const D=o("a-input"),k=o("a-form-item"),I=o("a-radio"),d=o("a-radio-group"),h=o("a-form"),a=o("a-row"),n=o("icon-question-circle-fill"),r=o("a-link"),M=o("a-tooltip"),E=o("a-space"),A=o("icon-right"),T=o("a-checkbox"),O=o("a-checkbox-group"),W=o("a-collapse-item"),ee=o("a-collapse"),te=o("a-modal");return u(),w(te,{visible:s.value,"onUpdate:visible":b[3]||(b[3]=R=>s.value=R),title:N(_),onOk:V},{default:t(()=>[e(a,{justify:"center"},{default:t(()=>[e(h,{ref:"formRef",model:i,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(k,{field:"name",label:"\u59D3\u540D",rules:p.name},{extra:t(()=>[dt]),default:t(()=>[e(D,{modelValue:i.name,"onUpdate:modelValue":b[0]||(b[0]=R=>i.name=R),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(k,{field:"address",label:"\u5730\u5740"},{default:t(()=>[e(D,{modelValue:i.address,"onUpdate:modelValue":b[1]||(b[1]=R=>i.address=R),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(k,{field:"status",label:"\u72B6\u6001",rules:p.status},{default:t(()=>[e(d,{modelValue:i.status,"onUpdate:modelValue":b[2]||(b[2]=R=>i.status=R)},{default:t(()=>[e(I,{value:!1},{default:t(()=>[_t]),_:1}),e(I,{value:!0},{default:t(()=>[pt]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(ee,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(W,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(E,null,{default:t(()=>[mt,e(M,{position:"right","content-style":{width:"200px"}},{content:t(()=>[ft,e(r,{type:"primary",hoverable:!1},{default:t(()=>[vt]),_:1})]),default:t(()=>[e(n,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:R})=>[e(A,{class:Me({gi_rotate_90deg:R})},null,8,["class"])]),default:t(()=>[(u(),S(H,null,Q(c,(R,ne)=>e(a,{justify:"space-between",key:ne},{default:t(()=>[B("span",null,j(R.name),1),e(O,null,{default:t(()=>[e(T,{value:"1"},{default:t(()=>[ht]),_:1}),e(T,{value:"2"},{default:t(()=>[gt]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const De=Z(yt,[["__scopeId","data-v-7c4411df"]]),le=[{name:"\u7981\u7528",value:0,color:"red"},{name:"\u542F\u7528",value:1,color:"green"}],wt={class:"data-pane"},kt={class:"gi_box pane-left"},Ct={class:"gi_box pane-right"},xt={class:"content"},Ft=f("\u65B0\u589E"),bt=f("\u5220\u9664"),Bt=f("\u5BFC\u51FA"),Dt={class:"table-box"},Et=f("\u4FEE\u6539"),$t=f("\u8BE6\u60C5"),At=f("\u5220\u9664"),zt=P({name:"DataManage"}),It=P({...zt,setup(v){const g=he(),c=[{title:"\u5E8F\u53F7",width:68,slotName:"index"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5730\u5740",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"\u6BD4\u4F8B",slotName:"proportion",width:200},{title:"\u72B6\u6001",slotName:"status",width:100,align:"center"},{title:"\u64CD\u4F5C",slotName:"operation",width:200,align:"center"}],{pagination:i,setTotal:p}=ye(()=>z()),s=se({name:"",status:""}),l=y([]),C=y(!1),_=y(),V=n=>n<30?"danger":n<60?"warning":"success",z=async()=>{C.value=!0;const n=await we({current:i.current,pageSize:i.pageSize,...s});n.success&&(l.value=n.data.list,p(n.data.total)),C.value=!1};z();const F=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{l.value=[]}})},x=()=>{var n;(n=_.value)==null||n.add()},b=n=>{var r;(r=_.value)==null||r.edit(n.id)},D=()=>{g.push({path:"/data/detail"})},k=n=>{J.success("\u5220\u9664\u6210\u529F"),z()},I=()=>{if(!d.value.length)return J.warning("\u8BF7\u52FE\u9009\u6570\u636E");J.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},d=y([]),h=(n,r,M)=>{d.value=n},a=n=>{d.value=n?l.value.map(r=>r.id):[]};return(n,r)=>{const M=Fe,E=o("icon-plus"),A=o("a-button"),T=o("icon-delete"),O=o("icon-export"),W=o("a-space"),ee=o("a-option"),te=o("a-select"),R=o("a-input"),ne=o("icon-search"),ie=o("a-input-group"),ce=o("icon-refresh"),q=o("a-row"),re=o("a-progress"),de=o("a-tag"),_e=o("a-popconfirm"),pe=o("a-table"),me=ge("loading");return u(),S("div",wt,[B("section",kt,[e(M,{title:"\u6570\u636E\u5206\u7C7B"}),e(rt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:r[0]||(r[0]=m=>N(i).onChange(1))})]),B("section",Ct,[e(M,{title:"\u6570\u636E\u5217\u8868"}),B("div",xt,[e(q,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(W,null,{default:t(()=>[e(A,{type:"primary",onClick:x},{icon:t(()=>[e(E)]),default:t(()=>[Ft]),_:1}),e(A,{type:"primary",status:"danger",onClick:F},{icon:t(()=>[e(T)]),default:t(()=>[bt]),_:1}),e(A,{type:"primary",status:"success",onClick:I},{icon:t(()=>[e(O)]),default:t(()=>[Bt]),_:1})]),_:1}),e(W,null,{default:t(()=>[e(te,{modelValue:s.status,"onUpdate:modelValue":r[1]||(r[1]=m=>s.status=m),placeholder:"\u8BF7\u9009\u62E9","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(u(!0),S(H,null,Q(N(le),m=>(u(),w(ee,{key:m.value,value:m.value},{default:t(()=>[f(j(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(ie,null,{default:t(()=>[e(R,{modelValue:s.name,"onUpdate:modelValue":r[2]||(r[2]=m=>s.name=m),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(A,{type:"primary",onClick:z},{default:t(()=>[e(ne)]),_:1})]),_:1}),e(A,{type:"primary",onClick:z},{icon:t(()=>[e(ce)]),_:1})]),_:1})]),_:1}),B("section",Dt,[ue((u(),w(pe,{"row-key":"id",size:"small",bordered:{cell:!0},columns:c,data:l.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:N(i),onSelect:h,onSelectAll:a},{index:t(({rowIndex:m})=>[f(j(m+1),1)]),proportion:t(({record:m})=>[e(re,{status:V(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),status:t(({record:m})=>[(u(!0),S(H,null,Q(N(le),U=>(u(),S(H,{key:U.value},[U.value===m.status?(u(),w(de,{key:0,size:"small",color:U.color},{default:t(()=>[f(j(U.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:m})=>[e(W,null,{default:t(()=>[e(A,{type:"primary",size:"mini",onClick:U=>b(m)},{default:t(()=>[Et]),_:2},1032,["onClick"]),e(A,{size:"mini",onClick:D},{default:t(()=>[$t]),_:1}),e(_e,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:U=>k(m.id)},{default:t(()=>[e(A,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[At]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["data","pagination"])),[[me,C.value]])])])]),e(De,{ref_key:"EditModalRef",ref:_},null,512)])}}}),Tt={class:"cate-tree"},Vt={class:"search-wrap"},Nt={class:"wrap"},Mt=f("\u65B0\u589E"),St=f("\u91CD\u547D\u540D"),Rt=f(" \u79FB\u52A8 "),Ot=f("\u5220\u9664"),Pt=P({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(v,{emit:g}){const c=y(!1),i=y(),p=y(""),s=y([]),l=()=>{g("node-click")};return(async()=>{try{c.value=!0;const _=await Be();_.success&&(s.value=_.data,Y(()=>{i.value.expandAll()}))}catch(_){return _}finally{c.value=!1}})(),(_,V)=>{const z=o("icon-search"),F=o("a-input"),x=qe,b=o("icon-drive-file"),D=ae,k=o("a-tree"),I=o("a-scrollbar"),d=o("a-popover"),h=be,a=o("a-trigger");return u(),S("div",Tt,[B("div",Vt,[e(F,{"allow-clear":"",maxlength:20,placeholder:v.placeholder,modelValue:p.value,"onUpdate:modelValue":V[0]||(V[0]=n=>p.value=n)},{prefix:t(()=>[e(z)]),_:1},8,["placeholder","modelValue"])]),B("div",Nt,[e(I,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(k,{ref_key:"treeRef",ref:i,"show-line":"",size:"mini",data:s.value,fieldNames:{key:"id"},onSelect:l},{"switcher-icon":t((n,{checked:r,selected:M,expanded:E})=>[n.children&&n.children.length&&E?(u(),w(x,{key:0,class:"switcher-icon",name:"plus-square",size:16})):n.children&&n.children.length&&!E?(u(),w(x,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(u(),w(b,{key:2,size:16}))]),icon:t(n=>[n.children?n.children?(u(),w(x,{key:1,name:"com-file-open",size:16})):(u(),w(x,{key:2,name:"com-file",size:16})):(u(),w(x,{key:0,name:"com-file-close",size:16}))]),title:t(n=>[e(a,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(h,{width:110,style:{"background-color":"var(--color-bg-3)","box-shadow":"0 4px 10px rgb(0 0 0 / 10%)"}},{default:t(()=>[e(D,{icon:"IconPlusCircle"},{default:t(()=>[Mt]),_:1}),e(D,{icon:"IconEdit"},{default:t(()=>[St]),_:1}),e(d,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(I,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(k,{ref:"treeMoveRef","show-line":"",size:"mini",data:s.value[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((r,{checked:M,selected:E,expanded:A})=>[r.children&&r.children.length&&A?(u(),w(x,{key:0,class:"switcher-icon",name:"plus-square",size:16})):r.children&&r.children.length&&!A?(u(),w(x,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(u(),w(b,{key:2,size:16}))]),icon:t(r=>[r.children?r.children?(u(),w(x,{key:1,name:"com-file-open",size:16})):(u(),w(x,{key:2,name:"com-file",size:16})):(u(),w(x,{key:0,name:"com-file-close",size:16}))]),_:2},1032,["data"])]),_:2},1024)]),default:t(()=>[e(D,{more:"",icon:"IconExport"},{default:t(()=>[Rt]),_:1})]),_:2},1024),e(D,{icon:"IconDelete"},{default:t(()=>[Ot]),_:1})]),_:2},1024)]),default:t(()=>[B("div",null,j(n.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Ut=Z(Pt,[["__scopeId","data-v-551a37b6"]]),jt={class:"data-pane"},qt={class:"gi_box pane-left"},Ht={class:"gi_box pane-right"},Wt={class:"content"},Gt=f("\u5220\u9664"),Kt={class:"table-box"},Lt=f("\u4FEE\u6539"),Xt=f("\u8BE6\u60C5"),Jt=f("\u5220\u9664"),Yt=P({name:"DataManage"}),Qt=P({...Yt,setup(v){const g=he(),{pagination:c,setTotal:i}=ye(()=>_()),p=se({name:"",status:""}),s=y([]),l=y(!1),C=a=>a<30?"danger":a<60?"warning":"success",_=async()=>{try{l.value=!0;const a=await we({current:c.current,pageSize:c.pageSize,...p});s.value=a.data.list,i(a.data.total)}catch(a){return a}finally{l.value=!1}};_();const V=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{s.value=[]}})},z=y(),F=()=>{var a;(a=z.value)==null||a.add()},x=a=>{var n;(n=z.value)==null||n.edit(a.id)},b=()=>{g.push({path:"/data/detail"})},D=a=>{J.success("\u5220\u9664\u6210\u529F"),_()},k=()=>{if(!I.value.length)return J.warning("\u8BF7\u52FE\u9009\u6570\u636E");J.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},I=y([]),d=(a,n,r)=>{I.value=a},h=a=>{I.value=a?s.value.map(n=>n.id):[]};return(a,n)=>{const r=Fe,M=o("icon-plus"),E=o("a-button"),A=o("icon-delete"),T=o("icon-export"),O=o("a-space"),W=o("a-option"),ee=o("a-select"),te=o("a-input"),R=o("icon-search"),ne=o("a-input-group"),ie=o("icon-refresh"),ce=o("a-row"),q=o("a-table-column"),re=o("a-progress"),de=o("a-tag"),_e=o("a-popconfirm"),pe=o("a-table"),me=ge("loading");return u(),S("div",jt,[B("section",qt,[e(r,{title:"\u6570\u636E\u5206\u7C7B"}),e(Ut,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:n[0]||(n[0]=m=>N(c).onChange(1))})]),B("section",Ht,[e(r,{title:"\u6570\u636E\u5217\u8868"}),B("div",Wt,[e(ce,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(O,null,{default:t(()=>[e(E,{type:"primary",onClick:F},{icon:t(()=>[e(M)]),_:1}),e(E,{type:"primary",status:"danger",onClick:V},{icon:t(()=>[e(A)]),default:t(()=>[Gt]),_:1}),e(E,{type:"primary",status:"success",onClick:k},{icon:t(()=>[e(T)]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(ee,{modelValue:p.status,"onUpdate:modelValue":n[1]||(n[1]=m=>p.status=m),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(u(!0),S(H,null,Q(N(le),m=>(u(),w(W,{key:m.value,value:m.value},{default:t(()=>[f(j(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(ne,null,{default:t(()=>[e(te,{modelValue:p.name,"onUpdate:modelValue":n[2]||(n[2]=m=>p.name=m),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(E,{type:"primary",onClick:_},{default:t(()=>[e(R)]),_:1})]),_:1}),e(E,{type:"primary",onClick:_},{icon:t(()=>[e(ie)]),_:1})]),_:1})]),_:1}),B("section",Kt,[ue((u(),w(pe,{"row-key":"id",size:"small",bordered:{cell:!0},data:s.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:N(c),onSelect:d,onSelectAll:h},{columns:t(()=>[e(q,{title:"\u5E8F\u53F7",width:68},{cell:t(m=>[f(j(m.rowIndex+1),1)]),_:1}),e(q,{title:"\u59D3\u540D","data-index":"name"}),e(q,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(q,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:m})=>[e(re,{status:C(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),_:1}),e(q,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:m})=>[(u(!0),S(H,null,Q(N(le),U=>(u(),S(H,{key:U.value},[U.value===m.status?(u(),w(de,{key:0,size:"small",color:U.color},{default:t(()=>[f(j(U.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),_:1}),e(q,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime",width:180}),e(q,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:m})=>[e(O,null,{default:t(()=>[e(E,{type:"primary",size:"mini",onClick:U=>x(m)},{default:t(()=>[Lt]),_:2},1032,["onClick"]),e(E,{size:"mini",onClick:b},{default:t(()=>[Xt]),_:1}),e(_e,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:U=>D(m.id)},{default:t(()=>[e(E,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Jt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination"])),[[me,l.value]])])])]),e(De,{ref_key:"EditModalRef",ref:z},null,512)])}}}),Zt={class:"data-pane3"},en=f("\u9996\u9875"),tn=f("\u6570\u636E\u7BA1\u7406"),nn=f("\u5355\u4F4D\u7BA1\u7406"),on=f("\u91CD\u7F6E"),an=f("\u63D0\u4EA4"),ln={class:"content"},sn={class:"table-box"},un=f("\u8BE6\u60C5"),cn=P({__name:"Pane3",setup(v){he();const g=[{title:"\u5E8F\u53F7",width:68,slotName:"index"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5730\u5740",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"\u6BD4\u4F8B",slotName:"proportion",width:68,align:"center"},{title:"\u72B6\u6001",slotName:"status",width:100,align:"center"},{title:"\u64CD\u4F5C",slotName:"operation",width:200,align:"center"}],{pagination:c,setTotal:i}=ye(()=>l()),p=y([]),s=y(!1),l=async()=>{s.value=!0;const F=await we({current:c.current,pageSize:c.pageSize});F.success&&(p.value=F.data.list,i(F.data.total)),s.value=!1};l();const C=F=>F<30?"danger":F<60?"warning":"success",_=y([]),V=(F,x,b)=>{_.value=F},z=F=>{_.value=F?p.value.map(x=>x.id):[]};return(F,x)=>{const b=o("a-breadcrumb-item"),D=o("a-breadcrumb"),k=o("a-button"),I=o("a-space"),d=o("a-row"),h=o("a-progress"),a=o("a-tag"),n=o("icon-edit"),r=o("icon-delete"),M=o("a-popconfirm"),E=o("a-table"),A=ge("loading");return u(),S("div",Zt,[e(d,{justify:"space-between",align:"center",class:"head"},{default:t(()=>[e(D,null,{default:t(()=>[e(b,null,{default:t(()=>[en]),_:1}),e(b,null,{default:t(()=>[tn]),_:1}),e(b,null,{default:t(()=>[nn]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(k,null,{default:t(()=>[on]),_:1}),e(k,{type:"primary"},{default:t(()=>[an]),_:1})]),_:1})]),_:1}),B("section",ln,[B("section",sn,[ue((u(),w(E,{"row-key":"id",size:"small",bordered:{cell:!0},columns:g,data:p.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:N(c),onSelect:V,onSelectAll:z},{index:t(({rowIndex:T})=>[f(j(T+1),1)]),proportion:t(({record:T})=>[e(h,{size:"mini",status:C(T.proportion),percent:T.proportion/100},null,8,["status","percent"])]),status:t(({record:T})=>[(u(!0),S(H,null,Q(N(le),O=>(u(),S(H,{key:O.value},[O.value===T.status?(u(),w(a,{key:0,size:"small",color:O.color},{default:t(()=>[f(j(O.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:T})=>[e(I,null,{default:t(()=>[e(k,{type:"primary",size:"mini"},{default:t(()=>[e(n)]),_:1}),e(k,{size:"mini"},{default:t(()=>[un]),_:1}),e(M,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?"},{default:t(()=>[e(k,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[e(r)]),_:1})]),_:1})]),_:1})]),_:1},8,["data","pagination"])),[[A,s.value]])])])])}}});const rn=Z(cn,[["__scopeId","data-v-e56832e3"]]),dn={class:"manage"},_n={class:"tab"},pn=P({name:"DataManage"}),xn=P({...pn,setup(v){const g={1:It,2:Qt,3:rn},c=y(2);return(i,p)=>{const s=o("a-tab-pane"),l=o("a-tabs");return u(),S("div",dn,[B("section",_n,[e(l,{"hide-content":"",size:"medium","active-key":c.value,"onUpdate:active-key":p[0]||(p[0]=C=>c.value=C)},{default:t(()=>[(u(),w(s,{key:1,title:"\u5468\u671F\u7BA1\u7406"})),(u(),w(s,{key:2,title:"\u7EF4\u5EA6\u7BA1\u7406"})),(u(),w(s,{key:3,title:"\u5355\u4F4D\u7BA1\u7406"}))]),_:1},8,["active-key"])]),e(xe,{name:"fade-slide",mode:"out-in",appear:""},{default:t(()=>[(u(),w(Pe,null,[(u(),w(Oe(g[c.value])))],1024))]),_:1})])}}});export{xn as default};
