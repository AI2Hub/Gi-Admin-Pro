import{_ as a}from"./AddDeptModal.vue_vue_type_script_setup_true_lang-61ff6be0.js";import{d as e,g as t,N as l,r as n,o as i,c as s,a as d,w as o,u,f as r,h as c,e as p,E as m,C as _}from"./index-a4638611.js";import{g as f}from"./index-cbdc0464.js";import"./useDept-87d246a7.js";const y={class:"gi_page_scroll_y dept-manage"},g=c("span",null,"搜索",-1),v=c("span",null,"重置",-1),x=c("span",null,"新增",-1),h=c("span",null,"删除",-1),w={class:"gi_mt"},k=e({name:"SystemDept",__name:"index",setup(e){const k=t(),C=t(),V=l({name:"",status:""}),b=t(!1),D=t([]),j=async()=>{try{b.value=!0;const a=await f();D.value=a.data,_((()=>{var a;null==(a=C.value)||a.expandAll(!0)}))}catch(a){}finally{b.value=!1}};j();const R=()=>{j()},z=()=>{V.name="",V.status="",j()},A=()=>{var a;null==(a=k.value)||a.add()};return(e,t)=>{const l=n("icon-search"),_=n("a-input"),f=n("a-option"),j=n("a-select"),I=n("a-button"),M=n("icon-refresh"),T=n("a-space"),U=n("icon-plus"),E=n("icon-delete"),N=n("a-row"),P=n("IconDown"),Q=n("IconRight"),S=n("a-table-column"),W=n("icon-edit"),q=n("a-popconfirm"),B=n("a-table"),F=n("a-card");return i(),s("div",y,[d(F,{title:"部门管理"},{default:o((()=>[d(T,null,{default:o((()=>[d(_,{modelValue:u(V).name,"onUpdate:modelValue":t[0]||(t[0]=a=>u(V).name=a),placeholder:"输入部门名称搜索","allow-clear":"",style:{width:"250px"}},{prefix:o((()=>[d(l)])),_:1},8,["modelValue"]),d(j,{modelValue:u(V).status,"onUpdate:modelValue":t[1]||(t[1]=a=>u(V).status=a),placeholder:"部门状态",style:{width:"120px"}},{default:o((()=>[d(f,{value:1},{default:o((()=>[r("正常")])),_:1}),d(f,{value:0},{default:o((()=>[r("禁用")])),_:1})])),_:1},8,["modelValue"]),d(I,{type:"primary",onClick:R},{icon:o((()=>[d(l)])),default:o((()=>[g])),_:1}),d(I,{onClick:z},{icon:o((()=>[d(M)])),default:o((()=>[v])),_:1})])),_:1}),d(N,{class:"gi_my"},{default:o((()=>[d(T,null,{default:o((()=>[d(I,{type:"primary",onClick:A},{icon:o((()=>[d(U)])),default:o((()=>[x])),_:1}),d(I,{type:"primary",status:"danger"},{icon:o((()=>[d(E)])),default:o((()=>[h])),_:1})])),_:1})])),_:1}),c("section",w,[d(B,{loading:u(b),ref_key:"TableRef",ref:C,"row-key":"id",data:u(D),scroll:{x:"100%",y:"100%",minWidth:900},pagination:!1,expandable:{width:80}},{"expand-icon":o((({expanded:a})=>[a?(i(),p(P,{key:0})):(i(),p(Q,{key:1}))])),columns:o((()=>[d(S,{title:"部门名称","data-index":"name"}),d(S,{title:"排序","data-index":"sort",width:100}),d(S,{title:"创建时间","data-index":"createTime",width:200}),d(S,{title:"操作",width:150,align:"left"},{cell:o((({record:a})=>[d(T,null,{default:o((()=>[d(I,{type:"primary",size:"mini",onClick:e=>{return t=a,void(null==(l=k.value)||l.edit(t.id));var t,l}},{icon:o((()=>[d(W)])),_:2},1032,["onClick"]),a.parentId?(i(),p(I,{key:0,type:"primary",status:"success",size:"mini",onClick:t[2]||(t[2]=a=>A())},{icon:o((()=>[d(U)])),_:1})):m("",!0),d(q,{type:"warning",content:"您确定要删除该项吗?"},{default:o((()=>[d(I,{type:"primary",status:"danger",size:"mini"},{icon:o((()=>[d(E)])),_:1})])),_:1})])),_:2},1024)])),_:1})])),_:1},8,["loading","data"])])])),_:1}),d(a,{ref_key:"AddDeptModalRef",ref:k},null,512)])}}});export{k as default};
