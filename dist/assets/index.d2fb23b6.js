import{_ as ge}from"./GiTitle.af90dc8e.js";import{ew as De,r as y,s as Ee,v as Y,d as O,q as ye,o as i,m as g,w as t,es as fe,ey as $e,j as T,a as F,n as Ae,el as ze,et as Ie,_ as ae,h as le,c as S,G as L,i as o,b as e,ei as X,k,eC as Ve,eD as Te,L as Me,em as ve,ej as Ne,J as oe,K as G,I as W,p as Se,e as Oe,u as ke,er as we,M as J,ek as Re,eG as Pe}from"./index.f97b524e.js";import"./index.463d26de.js";import{u as Ce}from"./usePagination.fbfc99e3.js";import"./viewer.29cecdef.js";import{g as xe}from"./index.22bbe64e.js";import{o as Ue,c as qe}from"./index.503b3a6b.js";import{_ as ne,a as Fe}from"./GiOptionItem.8570b94b.js";import{_ as Ge}from"./GiSvgIcon.1ab3ca44.js";const je="/mock";function be(){return De.get(`${je}/cate/tree`)}function He(f,h,d={alignPoint:!1}){const u=y(!1),m=y(0),s=y(0),l=_=>{u.value=_},w=()=>{const _={};return f.clientX>window.innerWidth-s.value?_.right=d.alignPoint?window.innerWidth-f.clientX-m.value/2+"px":window.innerWidth-f.clientX+"px":_.left=d.alignPoint?f.clientX+m.value/2+"px":f.clientX+"px",f.clientY>window.innerHeight-s.value?(_.bottom=window.innerHeight-f.clientY+"px",_["transform-origin"]="center bottom"):(_.top=f.clientY+2+"px",_["transform-origin"]="center top"),_["z-index"]=999,_};return Ee(()=>{u.value=!0,Y(()=>{!h||(s.value=h==null?void 0:h.offsetHeight,m.value=h==null?void 0:h.offsetWidth,w())})}),{visible:u,setVisible:l,getStyle:w}}function We(f,h="\u65B0\u5EFA\u5206\u7C7B"){let d=0;for(let u=0;u<f.length+1;u++)if(!f.includes(`${h}${u+1}`)){d=u+1;break}return`${h}${d}`}const Ke=O({name:"GiContextMenu"}),Le=O({...Ke,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(f,{expose:h,emit:d}){const u=f,m=y(null),{visible:s,setVisible:l,getStyle:w}=He(u.event,m,u.options);Ue(m,()=>{l(!1),d("close")},{capture:!1,ignore:u.ignoreRefs});const{width:_,height:I}=qe();return ye(()=>[_.value,I.value],()=>{l(!1),d("close")}),h({visible:s,onHidden:()=>{l(!1),d("close")}}),(R,C)=>(i(),g(Ie,{name:"slide-dynamic-origin"},{default:t(()=>[fe(F("div",{class:"gi-context-menu",ref_key:"elRef",ref:m,style:ze(T(w)())},[Ae(R.$slots,"default",{},void 0,!0)],4),[[$e,T(s)]])]),_:3}))}});const Xe=ae(Le,[["__scopeId","data-v-4ada3c17"]]),Je={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},Ye=O({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(f,{emit:h}){const d=f,u=y(null),m=le({callback:{onClick:(l,w,_)=>{s(l,w,_)}}});ye(d.treeData,()=>{Y(()=>{var l;u.value=$.fn.zTree.init($("#movetree"),m,d.treeData),(l=u.value)==null||l.expandAll(!0)})},{deep:!0,immediate:!0});function s(l,w,_){h("node-click",_)}return(l,w)=>(i(),S("ul",Je,null,512))}}),Qe=k("\u65B0\u589E"),Ze=k("\u91CD\u547D\u540D"),et=k(" \u79FB\u52A8 "),tt=k("\u5220\u9664"),nt=O({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(f,{expose:h}){const d=f,u=y(null),m=y(null),s=y([m]),l=y(!1),w=L(()=>d.fileInfo.id!==""),_=L(()=>d.fileInfo.id!=="root"),I=L(()=>d.fileInfo.id!=="root"),A=L(()=>d.fileInfo.id!=="root"),R=()=>{l.value=!1,d.onClose()},C=b=>{if(b==="move")return l.value=!l.value,!1;Y(()=>{var x;d.onClick(b),(x=u.value)==null||x.onHidden()})},B=()=>{var b;(b=u.value)==null||b.onHidden()};return h({menuRef:u,showMoveTreePopup:l,onClose:R,onClickItem:C}),(b,x)=>{const z=o("a-popover");return i(),g(Xe,{ref_key:"menuRef",ref:u,event:f.event,ignoreRefs:s.value,onClose:R},{default:t(()=>[e(Fe,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[T(w)?(i(),g(ne,{key:0,icon:"IconPlusCircle",onClick:x[0]||(x[0]=c=>C("add"))},{default:t(()=>[Qe]),_:1})):X("",!0),T(_)?(i(),g(ne,{key:1,icon:"IconEdit",onClick:x[1]||(x[1]=c=>C("rename"))},{default:t(()=>[Ze]),_:1})):X("",!0),e(z,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":l.value},{content:t(()=>[F("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:m},[e(Ye,{"tree-data":f.treeData,onNodeClick:B},null,8,["tree-data"])],512)]),default:t(()=>[T(I)?(i(),g(ne,{key:0,more:"",icon:"IconExport",active:l.value,onClick:x[2]||(x[2]=c=>C("move"))},{default:t(()=>[et]),_:1},8,["active"])):X("",!0)]),_:1},8,["popup-visible"]),T(A)?(i(),g(ne,{key:2,icon:"IconDelete",onClick:x[3]||(x[3]=c=>C("delete"))},{default:t(()=>[tt]),_:1})):X("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const ot=ae(nt,[["__scopeId","data-v-e36b4e3d"]]);let H=null,K=null;function at(f,h,d){return new Promise(u=>{m(),K=document.createElement("div"),document.body.appendChild(K),H=Ve(ot,{event:f,fileInfo:h,treeData:d,onClick:s=>{u({mode:s,fileInfo:h}),setTimeout(()=>{m()},360)},onClose:()=>{setTimeout(()=>{m()},360)}}),H.use(Te),H.use(Me),H.mount(K);function m(){H!==null&&(H.unmount(),H=null),K!==null&&(document.body.removeChild(K),K=null)}})}const me="/gi-demo/assets/com-file-open.a82dbda1.svg",te="/gi-demo/assets/com-file-close.e0ebbcc4.svg",lt="/gi-demo/assets/com-file.9070581a.svg",ut={class:"cate-tree"},st={class:"search-wrap"},it={class:"wrap"},ct=O({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(f,{emit:h}){const d=y(!1),u=y(""),m=y(null),s=y([]),l=y(null),w=y(null),_=(c,v,a)=>{console.log("\u70B9\u51FB\u8282\u70B9",a),w.value=a,h("node-click")},I=le({callback:{onRightClick:(c,v,a)=>{console.log("\u9F20\u6807\u53F3\u952E",a),a&&(w.value=a,at(c,a,s.value).then(n=>{console.log("res",n),n.mode==="add"&&C(),n.mode==="rename"&&B(),n.mode==="delete"&&b()}))},onClick:(c,v,a)=>{_(c,v,a)}}}),A=c=>{if(!c.length)return;function v(a){a.forEach(n=>{n.children&&n.children.length?(n.iconOpen=me,n.iconClose=te,v(n.children)):(n.children=null,n.iconOpen=me,n.iconClose=te,n.icon=te,n.type==null&&(n.icon=lt))})}v(c)};(async()=>{try{d.value=!0;const c=await be();if(c.success){const v=c.data;A(v),s.value=v,Y(()=>{var a;l.value=$.fn.zTree.init($("#treeDemo"),I,s.value),(a=l.value)==null||a.expandAll(!0)})}}catch(c){return c}finally{d.value=!1}})();const C=()=>{var M,D,E;const c=((M=w.value)==null?void 0:M.children)||[];let v="\u65B0\u5EFA\u5206\u7C7B1";if(c&&c.length){const P=c.map(U=>U.name);v=We(P,"\u65B0\u5EFA\u5206\u7C7B")}const a=new Date().getTime().toString(),n={id:a,name:v,children:null,iconOpen:me,iconClose:te,icon:te,isParent:!1};(D=l.value)==null||D.addNodes(w.value||{},n,!0);const r=(E=l.value)==null?void 0:E.getNodesByParam("id",a);setTimeout(()=>{var P;(P=l.value)==null||P.editName(r[0])},100)},B=()=>{Y(()=>{var v,a,n;const c=(a=l.value)==null?void 0:a.getNodesByParam("id",(v=w.value)==null?void 0:v.id);(n=l.value)==null||n.editName(c[0])})},b=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1})},x=(c,v)=>{let a=!1;if(c.name.indexOf(v)>-1&&(a=!0),c.children){const n=c.children;for(let r=0;r<n.length;r++){const M=n[r];x(M,v)?a=!0:n.splice(r--,1)}}return a},z=()=>{var v,a;let c=u.value;if(!c)l.value=$.fn.zTree.init($("#treeDemo"),I,s.value),(v=l.value)==null||v.expandAll(!0);else{const n=JSON.parse(JSON.stringify(s.value));for(let r=0;r<n.length;r++)x(n[r],c)||n.splice(r--,1);l.value=$.fn.zTree.init($("#treeDemo"),I,n),(a=l.value)==null||a.expandAll(!0)}};return(c,v)=>{const a=o("icon-search"),n=o("a-input");return i(),S("div",ut,[F("div",st,[e(n,{"allow-clear":"",maxlength:20,placeholder:f.placeholder,modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=r=>u.value=r),onInput:z,onClear:z},{prefix:t(()=>[e(a)]),_:1},8,["placeholder","modelValue"])]),F("div",it,[F("ul",{id:"treeDemo",ref_key:"treeRef",ref:m,class:"ztree cate-ztree"},null,512)])])}}});const rt=ae(ct,[["__scopeId","data-v-f49d6ff3"]]),he=f=>(Se("data-v-7c4411df"),f=f(),Oe(),f),dt=he(()=>F("div",null,"\u4EC5\u652F\u6301\u4E2D\u6587\u59D3\u540D",-1)),_t=k("\u5173\u95ED"),pt=k("\u5F00\u542F"),mt=he(()=>F("span",null,"\u6743\u9650\u914D\u7F6E",-1)),ft=he(()=>F("span",null,"\u81EA\u5B9A\u4E49\u7BA1\u7406\u5458\u3001\u7F16\u8F91\u8005\u7684\u6743\u9650\uFF0C \u70B9\u51FB",-1)),vt=k("\u4E86\u89E3\u66F4\u591A\u6743\u9650"),ht=k("\u7BA1\u7406\u5458"),gt=k("\u7F16\u8F91\u8005"),yt=O({__name:"EditModal",setup(f,{expose:h}){const d=[{name:"\u65B0\u589E"},{name:"\u7F16\u8F91"},{name:"\u91CD\u547D\u540D"},{name:"\u5206\u4EAB"},{name:"\u5220\u9664"}],u=le({name:"",address:"",status:!1}),m={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{minLength:1,maxLength:4,message:"\u540D\u5B57\u6700\u957F\u4E0D\u8D85\u8FC74\u4E2A\u5B57\u7B26"}],status:[{required:!0}]},s=y(!1),l=y(""),w=L(()=>!!l.value),_=L(()=>w.value?"\u7F16\u8F91":"\u65B0\u589E"),I=()=>{s.value=!1};return h({add:()=>{l.value="",s.value=!0},edit:C=>{l.value=C,s.value=!0}}),(C,B)=>{const b=o("a-input"),x=o("a-form-item"),z=o("a-radio"),c=o("a-radio-group"),v=o("a-form"),a=o("a-row"),n=o("icon-question-circle-fill"),r=o("a-link"),M=o("a-tooltip"),D=o("a-space"),E=o("icon-right"),P=o("a-checkbox"),U=o("a-checkbox-group"),j=o("a-collapse-item"),Q=o("a-collapse"),Z=o("a-modal");return i(),g(Z,{visible:s.value,"onUpdate:visible":B[3]||(B[3]=V=>s.value=V),title:T(_),onOk:I},{default:t(()=>[e(a,{justify:"center"},{default:t(()=>[e(v,{ref:"formRef",model:u,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(x,{field:"name",label:"\u59D3\u540D",rules:m.name},{extra:t(()=>[dt]),default:t(()=>[e(b,{modelValue:u.name,"onUpdate:modelValue":B[0]||(B[0]=V=>u.name=V),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(x,{field:"address",label:"\u5730\u5740"},{default:t(()=>[e(b,{modelValue:u.address,"onUpdate:modelValue":B[1]||(B[1]=V=>u.address=V),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(x,{field:"status",label:"\u72B6\u6001",rules:m.status},{default:t(()=>[e(c,{modelValue:u.status,"onUpdate:modelValue":B[2]||(B[2]=V=>u.status=V)},{default:t(()=>[e(z,{value:!1},{default:t(()=>[_t]),_:1}),e(z,{value:!0},{default:t(()=>[pt]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(Q,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(j,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(D,null,{default:t(()=>[mt,e(M,{position:"right","content-style":{width:"200px"}},{content:t(()=>[ft,e(r,{type:"primary",hoverable:!1},{default:t(()=>[vt]),_:1})]),default:t(()=>[e(n,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:V})=>[e(E,{class:Ne({gi_rotate_90deg:V})},null,8,["class"])]),default:t(()=>[(i(),S(W,null,oe(d,(V,ee)=>e(a,{justify:"space-between",key:ee},{default:t(()=>[F("span",null,G(V.name),1),e(U,null,{default:t(()=>[e(P,{value:"1"},{default:t(()=>[ht]),_:1}),e(P,{value:"2"},{default:t(()=>[gt]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Be=ae(yt,[["__scopeId","data-v-7c4411df"]]),ue=[{name:"\u7981\u7528",value:0,color:"red"},{name:"\u542F\u7528",value:1,color:"green"}],kt={class:"data-pane"},wt={class:"gi_box pane-left"},Ct={class:"gi_box pane-right"},xt={class:"content"},Ft=k("\u65B0\u589E"),bt=k("\u5220\u9664"),Bt=k("\u5BFC\u51FA"),Dt={class:"table-box"},Et=k("\u4FEE\u6539"),$t=k("\u8BE6\u60C5"),At=k("\u5220\u9664"),zt=O({name:"DataManage"}),It=O({...zt,setup(f){const h=ke(),d=[{title:"\u5E8F\u53F7",width:68,slotName:"index"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"startTime",width:180},{title:"\u5730\u5740",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"\u6BD4\u4F8B",slotName:"proportion",width:200},{title:"\u72B6\u6001",slotName:"status",width:100,align:"center"},{title:"\u64CD\u4F5C",slotName:"operation",width:200,align:"center"}],{pagination:u,setTotal:m}=Ce(()=>{A()}),s=le({name:"",status:""}),l=y([]),w=y(!1),_=y(),I=n=>n<30?"danger":n<60?"warning":"success",A=async()=>{w.value=!0;const n=await xe({current:u.current,pageSize:u.pageSize,...s});n.success&&(l.value=n.data.list,m(n.data.total)),w.value=!1};A();const R=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{l.value=[]}})},C=()=>{var n;(n=_.value)==null||n.add()},B=n=>{var r;(r=_.value)==null||r.edit(n.id)},b=()=>{h.push({path:"/data/detail"})},x=n=>{J.success("\u5220\u9664\u6210\u529F"),A()},z=()=>{if(!c.value.length)return J.warning("\u8BF7\u52FE\u9009\u6570\u636E");J.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},c=y([]),v=(n,r,M)=>{c.value=n},a=n=>{n?c.value=l.value.map(r=>r.id):c.value=[]};return(n,r)=>{const M=ge,D=o("icon-plus"),E=o("a-button"),P=o("icon-delete"),U=o("icon-export"),j=o("a-space"),Q=o("a-option"),Z=o("a-select"),V=o("a-input"),ee=o("icon-search"),se=o("a-input-group"),ie=o("icon-refresh"),q=o("a-row"),ce=o("a-progress"),re=o("a-tag"),de=o("a-popconfirm"),_e=o("a-table"),pe=we("loading");return i(),S("div",kt,[F("section",wt,[e(M,{title:"\u6570\u636E\u5206\u7C7B"}),e(rt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:r[0]||(r[0]=p=>T(u).onChange(1))})]),F("section",Ct,[e(M,{title:"\u6570\u636E\u5217\u8868"}),F("div",xt,[e(q,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(j,null,{default:t(()=>[e(E,{type:"primary",onClick:C},{icon:t(()=>[e(D)]),default:t(()=>[Ft]),_:1}),e(E,{type:"primary",status:"danger",onClick:R},{icon:t(()=>[e(P)]),default:t(()=>[bt]),_:1}),e(E,{type:"primary",status:"success",onClick:z},{icon:t(()=>[e(U)]),default:t(()=>[Bt]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(Z,{modelValue:s.status,"onUpdate:modelValue":r[1]||(r[1]=p=>s.status=p),placeholder:"\u8BF7\u9009\u62E9","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(i(!0),S(W,null,oe(T(ue),p=>(i(),g(Q,{key:p.value,value:p.value},{default:t(()=>[k(G(p.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(se,null,{default:t(()=>[e(V,{modelValue:s.name,"onUpdate:modelValue":r[2]||(r[2]=p=>s.name=p),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(E,{type:"primary",onClick:A},{default:t(()=>[e(ee)]),_:1})]),_:1}),e(E,{type:"primary",onClick:A},{icon:t(()=>[e(ie)]),_:1})]),_:1})]),_:1}),F("section",Dt,[fe((i(),g(_e,{"row-key":"id",bordered:{cell:!0},columns:d,data:l.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:T(u),onSelect:v,onSelectAll:a},{index:t(({rowIndex:p})=>[k(G(p+1),1)]),proportion:t(({record:p})=>[e(ce,{status:I(p.proportion),percent:p.proportion/100},null,8,["status","percent"])]),status:t(({record:p})=>[(i(!0),S(W,null,oe(T(ue),N=>(i(),S(W,{key:N.value},[N.value===p.status?(i(),g(re,{key:0,size:"small",color:N.color},{default:t(()=>[k(G(N.name),1)]),_:2},1032,["color"])):X("",!0)],64))),128))]),operation:t(({record:p})=>[e(j,null,{default:t(()=>[e(E,{type:"primary",size:"mini",onClick:N=>B(p)},{default:t(()=>[Et]),_:2},1032,["onClick"]),e(E,{size:"mini",onClick:b},{default:t(()=>[$t]),_:1}),e(de,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:N=>x(p.id)},{default:t(()=>[e(E,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[At]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["data","pagination"])),[[pe,w.value]])])])]),e(Be,{ref_key:"EditModalRef",ref:_},null,512)])}}}),Vt={class:"cate-tree"},Tt={class:"search-wrap"},Mt={class:"wrap"},Nt=k("\u65B0\u589E"),St=k("\u91CD\u547D\u540D"),Ot=k(" \u79FB\u52A8 "),Rt=k("\u5220\u9664"),Pt=O({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(f,{emit:h}){const d=y(!1),u=y(),m=y(""),s=y([]),l=()=>{h("node-click")};return(async()=>{try{d.value=!0;const _=await be();_.success&&(s.value=_.data,Y(()=>{u.value.expandAll()}))}catch(_){return _}finally{d.value=!1}})(),(_,I)=>{const A=o("icon-search"),R=o("a-input"),C=Ge,B=o("icon-drive-file"),b=ne,x=o("a-tree"),z=o("a-scrollbar"),c=o("a-popover"),v=Fe,a=o("a-trigger");return i(),S("div",Vt,[F("div",Tt,[e(R,{"allow-clear":"",maxlength:20,placeholder:f.placeholder,modelValue:m.value,"onUpdate:modelValue":I[0]||(I[0]=n=>m.value=n)},{prefix:t(()=>[e(A)]),_:1},8,["placeholder","modelValue"])]),F("div",Mt,[e(z,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(x,{ref_key:"treeRef",ref:u,"show-line":"",size:"mini",data:s.value,fieldNames:{key:"id"},onSelect:l},{"switcher-icon":t((n,{checked:r,selected:M,expanded:D})=>[n.children&&n.children.length&&D?(i(),g(C,{key:0,class:"switcher-icon",name:"plus-square",size:16})):n.children&&n.children.length&&!D?(i(),g(C,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(i(),g(B,{key:2,size:16}))]),icon:t(n=>[n.children?n.children?(i(),g(C,{key:1,name:"com-file-open",size:16})):(i(),g(C,{key:2,name:"com-file",size:16})):(i(),g(C,{key:0,name:"com-file-close",size:16}))]),title:t(n=>[e(a,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(v,{width:110,style:{"background-color":"var(--color-bg-3)","box-shadow":"0 4px 10px rgb(0 0 0 / 10%)"}},{default:t(()=>[e(b,{icon:"IconPlusCircle"},{default:t(()=>[Nt]),_:1}),e(b,{icon:"IconEdit"},{default:t(()=>[St]),_:1}),e(c,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(z,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(x,{ref:"treeMoveRef","show-line":"",size:"mini",data:s.value[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((r,{checked:M,selected:D,expanded:E})=>[r.children&&r.children.length&&E?(i(),g(C,{key:0,class:"switcher-icon",name:"plus-square",size:16})):r.children&&r.children.length&&!E?(i(),g(C,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(i(),g(B,{key:2,size:16}))]),icon:t(r=>[r.children?r.children?(i(),g(C,{key:1,name:"com-file-open",size:16})):(i(),g(C,{key:2,name:"com-file",size:16})):(i(),g(C,{key:0,name:"com-file-close",size:16}))]),_:2},1032,["data"])]),_:2},1024)]),default:t(()=>[e(b,{more:"",icon:"IconExport"},{default:t(()=>[Ot]),_:1})]),_:2},1024),e(b,{icon:"IconDelete"},{default:t(()=>[Rt]),_:1})]),_:2},1024)]),default:t(()=>[F("div",null,G(n.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Ut=ae(Pt,[["__scopeId","data-v-a1194cef"]]),qt={class:"data-pane"},Gt={class:"gi_box pane-left"},jt={class:"gi_box pane-right"},Ht={class:"content"},Wt=k("\u5220\u9664"),Kt={class:"table-box"},Lt=k("\u4FEE\u6539"),Xt=k("\u8BE6\u60C5"),Jt=k("\u5220\u9664"),Yt=O({name:"DataManage"}),Qt=O({...Yt,setup(f){const h=ke(),{pagination:d,setTotal:u}=Ce(()=>{_()},{defaultPageSize:20}),m=le({name:"",status:""}),s=y([]),l=y(!1),w=a=>a<30?"danger":a<60?"warning":"success",_=async()=>{try{l.value=!0;const a=await xe({current:d.current,pageSize:d.pageSize,...m});s.value=a.data.list,u(a.data.total)}catch(a){return a}finally{l.value=!1}};_();const I=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{s.value=[]}})},A=y(),R=()=>{var a;(a=A.value)==null||a.add()},C=a=>{var n;(n=A.value)==null||n.edit(a.id)},B=()=>{h.push({path:"/data/detail"})},b=a=>{J.success("\u5220\u9664\u6210\u529F"),_()},x=()=>{if(!z.value.length)return J.warning("\u8BF7\u52FE\u9009\u6570\u636E");J.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},z=y([]),c=(a,n,r)=>{z.value=a},v=a=>{a?z.value=s.value.map(n=>n.id):z.value=[]};return(a,n)=>{const r=ge,M=o("icon-plus"),D=o("a-button"),E=o("icon-delete"),P=o("icon-export"),U=o("a-space"),j=o("a-option"),Q=o("a-select"),Z=o("a-input"),V=o("icon-search"),ee=o("a-input-group"),se=o("icon-refresh"),ie=o("a-row"),q=o("a-table-column"),ce=o("a-progress"),re=o("a-tag"),de=o("a-popconfirm"),_e=o("a-table"),pe=we("loading");return i(),S("div",qt,[F("section",Gt,[e(r,{title:"\u6570\u636E\u5206\u7C7B"}),e(Ut,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:n[0]||(n[0]=p=>T(d).onChange(1))})]),F("section",jt,[e(r,{title:"\u6570\u636E\u5217\u8868"}),F("div",Ht,[e(ie,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(U,null,{default:t(()=>[e(D,{type:"primary",onClick:R},{icon:t(()=>[e(M)]),_:1}),e(D,{type:"primary",status:"danger",onClick:I},{icon:t(()=>[e(E)]),default:t(()=>[Wt]),_:1}),e(D,{type:"primary",status:"success",onClick:x},{icon:t(()=>[e(P)]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(Q,{modelValue:m.status,"onUpdate:modelValue":n[1]||(n[1]=p=>m.status=p),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(i(!0),S(W,null,oe(T(ue),p=>(i(),g(j,{key:p.value,value:p.value},{default:t(()=>[k(G(p.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(ee,null,{default:t(()=>[e(Z,{modelValue:m.name,"onUpdate:modelValue":n[2]||(n[2]=p=>m.name=p),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(D,{type:"primary",onClick:_},{default:t(()=>[e(V)]),_:1})]),_:1}),e(D,{type:"primary",onClick:_},{icon:t(()=>[e(se)]),_:1})]),_:1})]),_:1}),F("section",Kt,[fe((i(),g(_e,{"row-key":"id",bordered:{cell:!0},data:s.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:T(d),onSelect:c,onSelectAll:v},{columns:t(()=>[e(q,{title:"\u5E8F\u53F7",width:68},{cell:t(p=>[k(G(p.rowIndex+1),1)]),_:1}),e(q,{title:"\u59D3\u540D","data-index":"name"}),e(q,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(q,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:p})=>[e(ce,{status:w(p.proportion),percent:p.proportion/100},null,8,["status","percent"])]),_:1}),e(q,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:p})=>[(i(!0),S(W,null,oe(T(ue),N=>(i(),S(W,{key:N.value},[N.value===p.status?(i(),g(re,{key:0,size:"small",color:N.color},{default:t(()=>[k(G(N.name),1)]),_:2},1032,["color"])):X("",!0)],64))),128))]),_:1}),e(q,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"startTime",width:180}),e(q,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:p})=>[e(U,null,{default:t(()=>[e(D,{type:"primary",size:"mini",onClick:N=>C(p)},{default:t(()=>[Lt]),_:2},1032,["onClick"]),e(D,{size:"mini",onClick:B},{default:t(()=>[Xt]),_:1}),e(de,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:N=>b(p.id)},{default:t(()=>[e(D,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Jt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination"])),[[pe,l.value]])])])]),e(Be,{ref_key:"EditModalRef",ref:A},null,512)])}}}),Zt={class:"manage"},en={class:"tab"},tn=O({name:"DataManage"}),_n=O({...tn,setup(f){const h={1:It,2:Qt},d=y(2);return(u,m)=>{const s=o("a-tab-pane"),l=o("a-tabs");return i(),S("div",Zt,[F("section",en,[e(l,{"hide-content":"",size:"medium","active-key":d.value,"onUpdate:active-key":m[0]||(m[0]=w=>d.value=w)},{default:t(()=>[(i(),g(s,{key:1,title:"\u5468\u671F\u7BA1\u7406"})),(i(),g(s,{key:2,title:"\u7EF4\u5EA6\u7BA1\u7406"})),(i(),g(s,{key:3,title:"\u5355\u4F4D\u7BA1\u7406"}))]),_:1},8,["active-key"])]),(i(),g(Pe,null,[(i(),g(Re(h[d.value])))],1024))])}}});export{_n as default};
