import{N as ce,O as ie,d as P,r as n,o as l,e as m,i as G,w as t,a as e,p as re,j as _e,h as y,_ as F,g as C,c as B,u as _,L as de,t as E,C as pe,P as A,J as ue,Q as me,R as fe,f as V,F as O,b as U,E as he,S as ge}from"./index-f4aadaae.js";import{u as ye}from"./usePagination-1f819496.js";import ve from"./EditModal-9bb15bc7.js";import{g as ke}from"./index-f35fa13b.js";import{S as j}from"./person-ff3306fc.js";function we(){return ce.get(`${ie}/cate/tree`)}const J=P({__name:"TreeSwitcherIcon",props:{expanded:{type:Boolean},hasChildren:{type:Boolean}},setup(v){return(h,d)=>{const f=G,a=n("icon-drive-file");return h.hasChildren&&h.expanded?(l(),m(f,{key:0,class:"switcher-icon",name:"plus-square",size:16})):h.hasChildren&&!h.expanded?(l(),m(f,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(l(),m(a,{key:2,size:16}))}}}),q=v=>(re("data-v-a9b7b123"),v=v(),_e(),v),xe=q(()=>y("span",null,"新增",-1)),Ce=q(()=>y("span",null,"编辑",-1)),be=q(()=>y("span",null,"移动",-1)),ze=q(()=>y("span",null,"删除",-1)),$e=P({__name:"RightMenu",props:{treeData:{}},emits:["click"],setup(v,{emit:h}){const d=f=>{h("click",f)};return(f,a)=>{const g=n("icon-plus-circle"),p=n("a-menu-item"),R=n("icon-edit"),k=n("icon-export"),M=n("icon-right"),i=n("a-space"),w=G,I=n("a-tree"),D=n("a-scrollbar"),b=n("a-popover"),T=n("icon-delete"),z=n("a-menu");return l(),m(z,{class:"menu"},{default:t(()=>[e(p,{onClick:a[0]||(a[0]=r=>d("add"))},{icon:t(()=>[e(g,{size:16,"stroke-width":3})]),default:t(()=>[xe]),_:1}),e(p,{onClick:a[1]||(a[1]=r=>d("edit"))},{icon:t(()=>[e(R,{size:16,"stroke-width":3})]),default:t(()=>[Ce]),_:1}),e(b,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(D,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(I,{ref:"treeMoveRef","show-line":"",size:"mini",data:f.treeData[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((r,{checked:u,selected:o,expanded:c})=>[e(J,{expanded:c,"has-children":!!(r.children&&r.children.length)},null,8,["expanded","has-children"])]),icon:t(r=>[r.children?r.children?(l(),m(w,{key:1,name:"com-file-open",size:16})):(l(),m(w,{key:2,name:"com-file",size:16})):(l(),m(w,{key:0,name:"com-file-close",size:16}))]),_:1},8,["data"])]),_:1})]),default:t(()=>[e(p,{onClick:a[2]||(a[2]=r=>d("move"))},{icon:t(()=>[e(k,{size:16,"stroke-width":3})]),default:t(()=>[e(i,{size:18},{default:t(()=>[be,e(M)]),_:1})]),_:1})]),_:1}),e(p,{onClick:a[3]||(a[3]=r=>d("delete"))},{icon:t(()=>[e(T,{size:16,"stroke-width":3})]),default:t(()=>[ze]),_:1})]),_:1})}}});const Se=F($e,[["__scopeId","data-v-a9b7b123"]]),Ve={class:"cate-tree"},Re={class:"search-wrap"},Me={class:"wrap"},Ie=P({__name:"index",props:{type:{default:1},placeholder:{default:"请输入关键词"}},emits:["node-click"],setup(v,{emit:h}){const d=v,f=C(!1),a=C(),g=C(""),p=C([]),R=()=>{h("node-click")};(async()=>{try{f.value=!0;const i=await we();p.value=i.data,pe(()=>{a.value.expandAll()})}catch(i){return i}finally{f.value=!1}})();const M=i=>{i!=="move"&&A.info(i)};return(i,w)=>{const I=n("icon-search"),D=n("a-input"),b=G,T=n("a-trigger"),z=n("a-tree"),r=n("a-scrollbar");return l(),B("div",Ve,[y("div",Re,[e(D,{"allow-clear":"",maxlength:20,placeholder:d.placeholder,modelValue:_(g),"onUpdate:modelValue":w[0]||(w[0]=u=>de(g)?g.value=u:null)},{prefix:t(()=>[e(I)]),_:1},8,["placeholder","modelValue"])]),y("div",Me,[e(r,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(z,{ref_key:"treeRef",ref:a,"show-line":"",size:"mini",data:_(p),fieldNames:{key:"id"},onSelect:R},{"switcher-icon":t((u,{checked:o,selected:c,expanded:N})=>[e(J,{expanded:N,"has-children":!!(u.children&&u.children.length)},null,8,["expanded","has-children"])]),icon:t(u=>[u.children?u.children?(l(),m(b,{key:1,name:"com-file-open",size:16})):(l(),m(b,{key:2,name:"com-file",size:16})):(l(),m(b,{key:0,name:"com-file-close",size:16}))]),title:t(u=>[e(T,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(Se,{"tree-data":_(p),onClick:M},null,8,["tree-data"])]),default:t(()=>[y("div",null,E(u.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const De=F(Ie,[["__scopeId","data-v-2b2a084c"]]),Te={class:"data-pane"},Be={class:"content"},Ne={class:"table-box"},Oe=P({__name:"Pane1",setup(v){const h=ue(),{pagination:d,setTotal:f}=ye(()=>k()),a=me({name:"",status:""}),g=C([]),p=C(!1),R=o=>o<30?"danger":o<60?"warning":"success",k=async()=>{try{p.value=!0;const o=await ke({...a,current:d.current,pageSize:d.pageSize});g.value=o.data.list,f(o.data.total)}catch{}finally{p.value=!1}};fe(()=>{k()});const M=()=>{ge.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{g.value=[]}})},i=C(),w=()=>{var o;(o=i.value)==null||o.add()},I=o=>{var c;(c=i.value)==null||c.edit(o.id)},D=o=>{h.push({path:"/data/detail",query:{id:o.id}})},b=o=>{A.success("删除成功"),k()},T=()=>{if(!z.value.length)return A.warning("请勾选数据");A.success("点击了导出")},z=C([]),r=o=>{z.value=o},u=o=>{z.value=o?g.value.map(c=>c.id):[]};return(o,c)=>{const N=n("a-card"),K=n("icon-plus"),x=n("a-button"),Q=n("icon-delete"),W=n("icon-export"),L=n("a-space"),H=n("a-option"),X=n("a-select"),Y=n("a-input"),Z=n("icon-search"),ee=n("a-input-group"),te=n("icon-refresh"),ne=n("a-row"),$=n("a-table-column"),oe=n("a-progress"),ae=n("a-tag"),se=n("a-popconfirm"),le=n("a-table");return l(),B("div",Te,[e(N,{title:"数据分类",bordered:!1,class:"gi_card pane-left"},{default:t(()=>[e(De,{placeholder:"请输入搜索关键词",onNodeClick:c[0]||(c[0]=s=>_(d).onChange(1))})]),_:1}),e(N,{title:"数据列表",bordered:!1,"header-style":{display:"none"},class:"gi_card pane-right"},{default:t(()=>[y("div",Be,[e(ne,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(L,null,{default:t(()=>[e(x,{type:"primary",onClick:w},{icon:t(()=>[e(K)]),_:1}),e(x,{type:"primary",status:"danger",onClick:M},{icon:t(()=>[e(Q)]),default:t(()=>[V("删除")]),_:1}),e(x,{type:"primary",status:"success",onClick:T},{icon:t(()=>[e(W)]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(X,{modelValue:_(a).status,"onUpdate:modelValue":c[1]||(c[1]=s=>_(a).status=s),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:t(()=>[(l(!0),B(O,null,U(_(j),s=>(l(),m(H,{key:s.value,value:s.value},{default:t(()=>[V(E(s.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(ee,null,{default:t(()=>[e(Y,{modelValue:_(a).name,"onUpdate:modelValue":c[2]||(c[2]=s=>_(a).name=s),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(x,{type:"primary",onClick:k},{default:t(()=>[e(Z)]),_:1})]),_:1}),e(x,{type:"primary",onClick:k},{icon:t(()=>[e(te)]),_:1})]),_:1})]),_:1}),y("section",Ne,[e(le,{"row-key":"id",size:"small",loading:_(p),bordered:{cell:!0},data:_(g),scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:_(d),onSelect:r,onSelectAll:u},{columns:t(()=>[e($,{title:"序号",width:68},{cell:t(s=>[V(E(s.rowIndex+1),1)]),_:1}),e($,{title:"姓名","data-index":"name"}),e($,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),e($,{title:"比例",width:200},{cell:t(({record:s})=>[e(oe,{status:R(s.proportion),percent:s.proportion/100},null,8,["status","percent"])]),_:1}),e($,{title:"状态",width:100,align:"center"},{cell:t(({record:s})=>[(l(!0),B(O,null,U(_(j),S=>(l(),B(O,{key:S.value},[S.value===s.status?(l(),m(ae,{key:0,size:"small",color:S.color},{default:t(()=>[V(E(S.name),1)]),_:2},1032,["color"])):he("",!0)],64))),128))]),_:1}),e($,{title:"创建时间","data-index":"createTime",width:180}),e($,{title:"操作",width:200,align:"center",fixed:"right"},{cell:t(({record:s})=>[e(L,null,{default:t(()=>[e(x,{type:"primary",size:"mini",onClick:S=>I(s)},{default:t(()=>[V("修改")]),_:2},1032,["onClick"]),e(x,{size:"mini",onClick:S=>D(s)},{default:t(()=>[V("详情")]),_:2},1032,["onClick"]),e(se,{type:"warning",content:"您确定要删除该项吗?",onOk:S=>b(s.id)},{default:t(()=>[e(x,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[V("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination"])])])]),_:1}),e(ve,{ref_key:"EditModalRef",ref:i},null,512)])}}});export{Oe as _};
