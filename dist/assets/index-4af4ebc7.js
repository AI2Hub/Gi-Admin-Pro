import{d as D,o as l,c as h,r as n,w as t,a as e,p as ae,b as oe,e as y,_ as G,f as w,g as N,t as B,n as ge,M as O,h as le,i as ne,u as q,j as f,k as ve,l as F,F as K,m as se,q as ce,s as ie,v as ye,T as be,x as ke,K as we}from"./index-dec34743.js";import"./index-578bfdd4.js";import{u as re}from"./usePagination-60308646.js";import{_ as ee}from"./GiSvgIcon-21086e47.js";import{g as xe}from"./index-da1b6bc3.js";import{O as Ce,P as ze}from"./regexp-52ced781.js";import{g as _e}from"./index-2ab3ef74.js";const $e=D({name:"TreeSwitcherIcon"}),de=D({...$e,props:{expanded:{type:Boolean},hasChildren:{type:Boolean}},setup(r){return($,a)=>{const g=ee,o=n("icon-drive-file");return r.hasChildren&&r.expanded?(l(),h(g,{key:0,class:"switcher-icon",name:"plus-square",size:16})):r.hasChildren&&!r.expanded?(l(),h(g,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(l(),h(o,{key:2,size:16}))}}}),W=r=>(ae("data-v-1bbb6891"),r=r(),oe(),r),Ve=W(()=>y("span",null,"新增",-1)),Se=W(()=>y("span",null,"编辑",-1)),Ie=W(()=>y("span",null,"移动",-1)),Me=W(()=>y("span",null,"删除",-1)),Te=D({__name:"RightMenu",props:{treeData:null},emits:["click"],setup(r,{emit:$}){const a=g=>{$("click",g)};return(g,o)=>{const i=n("icon-plus-circle"),u=n("a-menu-item"),I=n("icon-edit"),x=n("icon-export"),v=n("icon-right"),V=n("a-space"),_=ee,R=n("a-tree"),b=n("a-scrollbar"),p=n("a-popover"),k=n("icon-delete"),C=n("a-menu");return l(),h(C,{class:"menu"},{default:t(()=>[e(u,{onClick:o[0]||(o[0]=s=>a("add"))},{icon:t(()=>[e(i,{size:16,"stroke-width":3})]),default:t(()=>[Ve]),_:1}),e(u,{onClick:o[1]||(o[1]=s=>a("edit"))},{icon:t(()=>[e(I,{size:16,"stroke-width":3})]),default:t(()=>[Se]),_:1}),e(p,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(b,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(R,{ref:"treeMoveRef","show-line":"",size:"mini",data:r.treeData[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((s,{checked:P,selected:c,expanded:d})=>[e(de,{expanded:d,"has-children":Boolean(s.children&&s.children.length)},null,8,["expanded","has-children"])]),icon:t(s=>[s.children?s.children?(l(),h(_,{key:1,name:"com-file-open",size:16})):(l(),h(_,{key:2,name:"com-file",size:16})):(l(),h(_,{key:0,name:"com-file-close",size:16}))]),_:1},8,["data"])]),_:1})]),default:t(()=>[e(u,{onClick:o[2]||(o[2]=s=>a("move"))},{icon:t(()=>[e(x,{size:16,"stroke-width":3})]),default:t(()=>[e(V,{size:18},{default:t(()=>[Ie,e(v)]),_:1})]),_:1})]),_:1}),e(u,{onClick:o[3]||(o[3]=s=>a("delete"))},{icon:t(()=>[e(k,{size:16,"stroke-width":3})]),default:t(()=>[Me]),_:1})]),_:1})}}});const De=G(Te,[["__scopeId","data-v-1bbb6891"]]),Re={class:"cate-tree"},Ne={class:"search-wrap"},Pe={class:"wrap"},Ae=D({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"请输入关键词"}},emits:["node-click"],setup(r,{emit:$}){const a=w(!1),g=w(),o=w(""),i=w([]),u=()=>{$("node-click")};(async()=>{try{a.value=!0;const v=await xe();i.value=v.data,ge(()=>{g.value.expandAll()})}catch(v){return v}finally{a.value=!1}})();const x=v=>{v!=="move"&&O.info(v)};return(v,V)=>{const _=n("icon-search"),R=n("a-input"),b=ee,p=n("a-trigger"),k=n("a-tree"),C=n("a-scrollbar");return l(),N("div",Re,[y("div",Ne,[e(R,{"allow-clear":"",maxlength:20,placeholder:r.placeholder,modelValue:o.value,"onUpdate:modelValue":V[0]||(V[0]=s=>o.value=s)},{prefix:t(()=>[e(_)]),_:1},8,["placeholder","modelValue"])]),y("div",Pe,[e(C,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(k,{ref_key:"treeRef",ref:g,"show-line":"",size:"mini",data:i.value,fieldNames:{key:"id"},onSelect:u},{"switcher-icon":t((s,{checked:P,selected:c,expanded:d})=>[e(de,{expanded:d,"has-children":Boolean(s.children&&s.children.length)},null,8,["expanded","has-children"])]),icon:t(s=>[s.children?s.children?(l(),h(b,{key:1,name:"com-file-open",size:16})):(l(),h(b,{key:2,name:"com-file",size:16})):(l(),h(b,{key:0,name:"com-file-close",size:16}))]),title:t(s=>[e(p,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(De,{"tree-data":i.value,onClick:x},null,8,["tree-data"])]),default:t(()=>[y("div",null,B(s.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Ee=G(Ae,[["__scopeId","data-v-9aff2169"]]),te=r=>(ae("data-v-fb90ac75"),r=r(),oe(),r),qe=te(()=>y("div",null,"仅支持中文姓名",-1)),Be=te(()=>y("span",null,"权限配置",-1)),Ue=te(()=>y("span",null,"自定义管理员、编辑者的权限， 点击",-1)),Ke=D({__name:"EditModal",setup(r,{expose:$}){const a=le({name:"",phone:"",status:!1}),g={name:[{required:!0,message:"请输入姓名"},{match:Ce,message:"只能是中文姓名"},{minLength:1,maxLength:4,message:"名字最长不超过4个字符"}],phone:[{match:ze,message:"手机号格式不正确"}],status:[{required:!0}]},o=[{name:"新增"},{name:"编辑"},{name:"重命名"},{name:"分享"},{name:"删除"}],i=w(!1),u=w(""),I=ne(()=>!!u.value),x=ne(()=>I.value?"编辑":"新增"),v=w(),V=async()=>{var p;return await((p=v.value)==null?void 0:p.validate())?!1:(await new Promise(k=>setTimeout(k,1500)),O.success(I.value?"编辑成功":"新增成功"),!0)};return $({add:()=>{u.value="",i.value=!0},edit:b=>{u.value=b,i.value=!0}}),(b,p)=>{const k=n("a-input"),C=n("a-form-item"),s=n("a-radio"),P=n("a-radio-group"),c=n("a-form"),d=n("a-row"),U=n("icon-question-circle-fill"),j=n("a-link"),S=n("a-tooltip"),L=n("a-space"),M=n("icon-right"),T=n("a-checkbox"),H=n("a-checkbox-group"),J=n("a-collapse-item"),Q=n("a-collapse"),X=n("a-modal");return l(),h(X,{visible:i.value,"onUpdate:visible":p[3]||(p[3]=z=>i.value=z),title:q(x),"on-before-ok":V},{default:t(()=>[e(d,{justify:"center"},{default:t(()=>[e(c,{ref_key:"formRef",ref:v,model:a,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(C,{field:"name",label:"姓名",rules:g.name},{extra:t(()=>[qe]),default:t(()=>[e(k,{modelValue:a.name,"onUpdate:modelValue":p[0]||(p[0]=z=>a.name=z),placeholder:"请输入姓名",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(C,{field:"phone",label:"手机号"},{default:t(()=>[e(k,{modelValue:a.phone,"onUpdate:modelValue":p[1]||(p[1]=z=>a.phone=z),placeholder:"请输入手机号",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(C,{field:"status",label:"状态",rules:g.status},{default:t(()=>[e(P,{modelValue:a.status,"onUpdate:modelValue":p[2]||(p[2]=z=>a.status=z)},{default:t(()=>[e(s,{value:!1},{default:t(()=>[f("关闭")]),_:1}),e(s,{value:!0},{default:t(()=>[f("开启")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(Q,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(J,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(L,null,{default:t(()=>[Be,e(S,{position:"right","content-style":{width:"200px"}},{content:t(()=>[Ue,e(j,{type:"primary",hoverable:!1},{default:t(()=>[f("了解更多权限")]),_:1})]),default:t(()=>[e(U,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:z})=>[e(M,{class:ve({gi_rotate_90deg:z})},null,8,["class"])]),default:t(()=>[(l(),N(K,null,F(o,(z,Y)=>e(d,{justify:"space-between",key:Y},{default:t(()=>[y("span",null,B(z.name),1),e(H,null,{default:t(()=>[e(T,{value:"1"},{default:t(()=>[f("管理员")]),_:1}),e(T,{value:"2"},{default:t(()=>[f("编辑者")]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const je=G(Ke,[["__scopeId","data-v-fb90ac75"]]),Z=[{name:"禁用",value:0,color:"red"},{name:"启用",value:1,color:"green"}],Le={class:"data-pane"},Oe={class:"content"},Ge={class:"table-box"},Fe=D({name:"DataManage"}),We=D({...Fe,setup(r){const $=ce(),{pagination:a,setTotal:g}=re(()=>x()),o=le({name:"",status:""}),i=w([]),u=w(!1),I=c=>c<30?"danger":c<60?"warning":"success",x=async()=>{try{u.value=!0;const c=await _e({...o,current:a.current,pageSize:a.pageSize});i.value=c.data.list,g(c.data.total)}catch(c){return c}finally{u.value=!1}};se(()=>{x()});const v=()=>{ye.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{i.value=[]}})},V=w(),_=()=>{var c;(c=V.value)==null||c.add()},R=c=>{var d;(d=V.value)==null||d.edit(c.id)},b=c=>{$.push({path:"/data/detail",query:{id:c.id}})},p=c=>{O.success("删除成功"),x()},k=()=>{if(!C.value.length)return O.warning("请勾选数据");O.success("点击了导出")},C=w([]),s=c=>{C.value=c},P=c=>{C.value=c?i.value.map(d=>d.id):[]};return(c,d)=>{const U=n("a-card"),j=n("icon-plus"),S=n("a-button"),L=n("icon-delete"),M=n("icon-export"),T=n("a-space"),H=n("a-option"),J=n("a-select"),Q=n("a-input"),X=n("icon-search"),z=n("a-input-group"),Y=n("icon-refresh"),ue=n("a-row"),A=n("a-table-column"),pe=n("a-progress"),me=n("a-tag"),fe=n("a-popconfirm"),he=n("a-table");return l(),N("div",Le,[e(U,{title:"数据分类",bordered:!1,class:"gi_card pane-left"},{default:t(()=>[e(Ee,{placeholder:"请输入搜索关键词",onNodeClick:d[0]||(d[0]=m=>q(a).onChange(1))})]),_:1}),e(U,{title:"数据列表",bordered:!1,"header-style":{display:"none"},class:"gi_card pane-right"},{default:t(()=>[y("div",Oe,[e(ue,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(T,null,{default:t(()=>[e(S,{type:"primary",onClick:_},{icon:t(()=>[e(j)]),_:1}),e(S,{type:"primary",status:"danger",onClick:v},{icon:t(()=>[e(L)]),default:t(()=>[f("删除")]),_:1}),e(S,{type:"primary",status:"success",onClick:k},{icon:t(()=>[e(M)]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(J,{modelValue:o.status,"onUpdate:modelValue":d[1]||(d[1]=m=>o.status=m),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:t(()=>[(l(!0),N(K,null,F(q(Z),m=>(l(),h(H,{key:m.value,value:m.value},{default:t(()=>[f(B(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(z,null,{default:t(()=>[e(Q,{modelValue:o.name,"onUpdate:modelValue":d[2]||(d[2]=m=>o.name=m),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(S,{type:"primary",onClick:x},{default:t(()=>[e(X)]),_:1})]),_:1}),e(S,{type:"primary",onClick:x},{icon:t(()=>[e(Y)]),_:1})]),_:1})]),_:1}),y("section",Ge,[e(he,{"row-key":"id",size:"small",loading:u.value,bordered:{cell:!0},data:i.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:q(a),onSelect:s,onSelectAll:P},{columns:t(()=>[e(A,{title:"序号",width:68},{cell:t(m=>[f(B(m.rowIndex+1),1)]),_:1}),e(A,{title:"姓名","data-index":"name"}),e(A,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),e(A,{title:"比例",width:200},{cell:t(({record:m})=>[e(pe,{status:I(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),_:1}),e(A,{title:"状态",width:100,align:"center"},{cell:t(({record:m})=>[(l(!0),N(K,null,F(q(Z),E=>(l(),N(K,{key:E.value},[E.value===m.status?(l(),h(me,{key:0,size:"small",color:E.color},{default:t(()=>[f(B(E.name),1)]),_:2},1032,["color"])):ie("",!0)],64))),128))]),_:1}),e(A,{title:"创建时间","data-index":"createTime",width:180}),e(A,{title:"操作",width:200,align:"center",fixed:"right"},{cell:t(({record:m})=>[e(T,null,{default:t(()=>[e(S,{type:"primary",size:"mini",onClick:E=>R(m)},{default:t(()=>[f("修改")]),_:2},1032,["onClick"]),e(S,{size:"mini",onClick:E=>b(m)},{default:t(()=>[f("详情")]),_:2},1032,["onClick"]),e(fe,{type:"warning",content:"您确定要删除该项吗?",onOk:E=>p(m.id)},{default:t(()=>[e(S,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[f("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination"])])])]),_:1}),e(je,{ref_key:"EditModalRef",ref:V},null,512)])}}}),He={class:"content"},Je={class:"table-box"},Qe=D({__name:"Pane2",setup(r){ce();const $=[{title:"序号",width:68,slotName:"index"},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",slotName:"proportion",width:68,align:"center"},{title:"状态",slotName:"status",width:100,align:"center"},{title:"操作",slotName:"operation",width:200,align:"center"}],{pagination:a,setTotal:g}=re(()=>u()),o=w([]),i=w(!1),u=async()=>{i.value=!0;const _=await _e({current:a.current,pageSize:a.pageSize});_.success&&(o.value=_.data.list,g(_.data.total)),i.value=!1};se(()=>{u()});const I=_=>_<30?"danger":_<60?"warning":"success",x=w([]),v=_=>{x.value=_},V=_=>{x.value=_?o.value.map(R=>R.id):[]};return(_,R)=>{const b=n("a-breadcrumb-item"),p=n("a-breadcrumb"),k=n("a-button"),C=n("a-space"),s=n("a-row"),P=n("a-progress"),c=n("a-tag"),d=n("icon-edit"),U=n("icon-delete"),j=n("a-popconfirm"),S=n("a-table"),L=n("a-card");return l(),h(L,{bordered:!1,class:"gi_card pane3"},{default:t(()=>[e(s,{justify:"space-between",align:"center",class:"head"},{default:t(()=>[e(p,null,{default:t(()=>[e(b,null,{default:t(()=>[f("首页")]),_:1}),e(b,null,{default:t(()=>[f("数据管理")]),_:1}),e(b,null,{default:t(()=>[f("单位管理")]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(k,{type:"primary"},{default:t(()=>[f("导出")]),_:1})]),_:1})]),_:1}),y("section",He,[y("section",Je,[e(S,{"row-key":"id",size:"small",loading:i.value,bordered:{cell:!0},columns:$,data:o.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:q(a),onSelect:v,onSelectAll:V},{index:t(({rowIndex:M})=>[f(B(M+1),1)]),proportion:t(({record:M})=>[e(P,{size:"mini",status:I(M.proportion),percent:M.proportion/100},null,8,["status","percent"])]),status:t(({record:M})=>[(l(!0),N(K,null,F(q(Z),T=>(l(),N(K,{key:T.value},[T.value===M.status?(l(),h(c,{key:0,size:"small",color:T.color},{default:t(()=>[f(B(T.name),1)]),_:2},1032,["color"])):ie("",!0)],64))),128))]),operation:t(({record:M})=>[e(C,null,{default:t(()=>[e(k,{type:"primary",size:"mini"},{default:t(()=>[e(d)]),_:1}),e(k,{size:"mini"},{default:t(()=>[f("详情")]),_:1}),e(j,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(k,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[e(U)]),_:1})]),_:1})]),_:1})]),_:1},8,["loading","data","pagination"])])])]),_:1})}}});const Xe=G(Qe,[["__scopeId","data-v-942182e0"]]),Ye={class:"manage"},Ze={class:"tab"},et=D({name:"DataMain"}),tt=D({...et,setup(r){const $={1:We,2:Xe},a=w(1);return(g,o)=>{const i=n("a-tab-pane"),u=n("a-tabs");return l(),N("div",Ye,[y("section",Ze,[e(u,{"hide-content":"",size:"medium","active-key":a.value,"onUpdate:activeKey":o[0]||(o[0]=I=>a.value=I)},{default:t(()=>[(l(),h(i,{key:1,title:"人员管理"})),(l(),h(i,{key:2,title:"单位管理"}))]),_:1},8,["active-key"])]),e(be,{name:"fade-slide",mode:"out-in",appear:""},{default:t(()=>[(l(),h(we,null,[(l(),h(ke($[a.value])))],1024))]),_:1})])}}});const rt=G(tt,[["__scopeId","data-v-fb443d90"]]);export{rt as default};
