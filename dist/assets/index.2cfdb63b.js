import{ey as Te,h,s as Ve,v as Z,d as S,q as be,o as d,m as F,w as t,es as ie,ez as Me,j as M,a as B,n as Se,el as Ne,eu as Be,_ as X,r as ue,c as N,G as Y,i as n,b as e,ei as K,k,eA as Re,eB as Pe,L as Oe,em as he,ej as Ge,J as Q,K as U,I as j,M as W,p as De,e as $e,u as ge,eC as ye,er as ke,ek as Ue,eD as He}from"./index.1c531ee1.js";import{_ as Ee}from"./GiHead.02fb92c9.js";import"./index.463d26de.js";import{u as we}from"./usePagination.4998db26.js";import"./viewer.b864850f.js";import{g as Ce}from"./index.b18f6bfb.js";import{o as je,c as We}from"./index.9dff1184.js";import{G as se,a as qe}from"./GiOptionItem.6bbbad7f.js";import{O as Le,P as Ke}from"./regexp.eca22655.js";import{_ as Fe}from"./GiSvgIcon.68a8b662.js";import"./GiTitle.c3a61c89.js";const Xe="/mock";function Ae(){return Te.get(`${Xe}/cate/tree`)}function Je(_,f,l={alignPoint:!1}){const r=h(!1),i=h(0),c=h(0),u=p=>{r.value=p},g=()=>{const p={};return _.clientX>window.innerWidth-c.value?p.right=l.alignPoint?window.innerWidth-_.clientX-i.value/2+"px":window.innerWidth-_.clientX+"px":p.left=l.alignPoint?_.clientX+i.value/2+"px":_.clientX+"px",_.clientY>window.innerHeight-c.value?(p.bottom=window.innerHeight-_.clientY+"px",p["transform-origin"]="center bottom"):(p.top=_.clientY+2+"px",p["transform-origin"]="center top"),p["z-index"]=999,p};return Ve(()=>{r.value=!0,Z(()=>{!f||(c.value=f==null?void 0:f.offsetHeight,i.value=f==null?void 0:f.offsetWidth,g())})}),{visible:r,setVisible:u,getStyle:g}}function Ye(_,f="\u65B0\u5EFA\u5206\u7C7B"){let l=0;for(let r=0;r<_.length+1;r++)if(!_.includes(`${f}${r+1}`)){l=r+1;break}return`${f}${l}`}const Ze=S({name:"GiContextMenu"}),Qe=S({...Ze,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(_,{expose:f,emit:l}){const r=_,i=h(null),{visible:c,setVisible:u,getStyle:g}=Je(r.event,i,r.options);je(i,()=>{u(!1),l("close")},{capture:!1,ignore:r.ignoreRefs});const{width:p,height:b}=We();return be(()=>[p.value,b.value],()=>{u(!1),l("close")}),f({visible:c,onHidden:()=>{u(!1),l("close")}}),(x,z)=>(d(),F(Be,{name:"slide-dynamic-origin"},{default:t(()=>[ie(B("div",{class:"gi-context-menu",ref_key:"elRef",ref:i,style:Ne(M(g)())},[Se(x.$slots,"default",{},void 0,!0)],4),[[Me,M(c)]])]),_:3}))}});const et=X(Qe,[["__scopeId","data-v-4ada3c17"]]),tt={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},nt=S({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(_,{emit:f}){const l=_,r=h(null),i=ue({callback:{onClick:(u,g,p)=>{c(u,g,p)}}});be(l.treeData,()=>{Z(()=>{var u;r.value=$.fn.zTree.init($("#movetree"),i,l.treeData),(u=r.value)==null||u.expandAll(!0)})},{deep:!0,immediate:!0});function c(u,g,p){f("node-click",p)}return(u,g)=>(d(),N("ul",tt,null,512))}}),ot=k("\u65B0\u589E"),at=k("\u91CD\u547D\u540D"),lt=k(" \u79FB\u52A8 "),ut=k("\u5220\u9664"),st=S({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(_,{expose:f}){const l=_,r=h(null),i=h(null),c=h([i]),u=h(!1),g=Y(()=>l.fileInfo.id!==""),p=Y(()=>l.fileInfo.id!=="root"),b=Y(()=>l.fileInfo.id!=="root"),D=Y(()=>l.fileInfo.id!=="root"),x=()=>{u.value=!1,l.onClose()},z=C=>{if(C==="move")return u.value=!u.value,!1;Z(()=>{var y;l.onClick(C),(y=r.value)==null||y.onHidden()})},E=()=>{var C;(C=r.value)==null||C.onHidden()};return f({menuRef:r,showMoveTreePopup:u,onClose:x,onClickItem:z}),(C,y)=>{const A=n("a-popover");return d(),F(et,{ref_key:"menuRef",ref:r,event:_.event,ignoreRefs:c.value,onClose:x},{default:t(()=>[e(qe,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[M(g)?(d(),F(se,{key:0,icon:"IconPlusCircle",onClick:y[0]||(y[0]=a=>z("add"))},{default:t(()=>[ot]),_:1})):K("",!0),M(p)?(d(),F(se,{key:1,icon:"IconEdit",onClick:y[1]||(y[1]=a=>z("rename"))},{default:t(()=>[at]),_:1})):K("",!0),e(A,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":u.value},{content:t(()=>[B("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:i},[e(nt,{"tree-data":_.treeData,onNodeClick:E},null,8,["tree-data"])],512)]),default:t(()=>[M(b)?(d(),F(se,{key:0,more:"",icon:"IconExport",active:u.value,onClick:y[2]||(y[2]=a=>z("move"))},{default:t(()=>[lt]),_:1},8,["active"])):K("",!0)]),_:1},8,["popup-visible"]),M(D)?(d(),F(se,{key:2,icon:"IconDelete",onClick:y[3]||(y[3]=a=>z("delete"))},{default:t(()=>[ut]),_:1})):K("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const it=X(st,[["__scopeId","data-v-991fe312"]]);let L=null,J=null;function ct(_,f,l){return new Promise(r=>{i(),J=document.createElement("div"),document.body.appendChild(J),L=Re(it,{event:_,fileInfo:f,treeData:l,onClick:c=>{r({mode:c,fileInfo:f}),setTimeout(()=>{i()},360)},onClose:()=>{setTimeout(()=>{i()},360)}}),L.use(Pe),L.use(Oe),L.mount(J);function i(){L!==null&&(L.unmount(),L=null),J!==null&&(document.body.removeChild(J),J=null)}})}const ve="/gi-demo/assets/com-file-open.a82dbda1.svg",ae="/gi-demo/assets/com-file-close.e0ebbcc4.svg",rt="/gi-demo/assets/com-file.9070581a.svg",dt={class:"cate-tree"},_t={class:"search-wrap"},pt={class:"wrap"},mt=S({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(_,{emit:f}){const l=h(!1),r=h(""),i=h(null),c=h([]),u=h(null),g=h(null),p=(a,v,s)=>{console.log("\u70B9\u51FB\u8282\u70B9",s),g.value=s,f("node-click")},b=ue({callback:{onRightClick:(a,v,s)=>{console.log("\u9F20\u6807\u53F3\u952E",s),s&&(g.value=s,ct(a,s,c.value).then(o=>{console.log("res",o),o.mode==="add"&&z(),o.mode==="rename"&&E(),o.mode==="delete"&&C()}))},onClick:(a,v,s)=>{p(a,v,s)}}}),D=a=>{if(!a.length)return;function v(s){s.forEach(o=>{o.children&&o.children.length?(o.iconOpen=ve,o.iconClose=ae,v(o.children)):(o.children=null,o.iconOpen=ve,o.iconClose=ae,o.icon=ae,o.type==null&&(o.icon=rt))})}v(a)};(async()=>{try{l.value=!0;const a=await Ae();if(a.success){const v=a.data;D(v),c.value=v,Z(()=>{var s;u.value=$.fn.zTree.init($("#treeDemo"),b,c.value),(s=u.value)==null||s.expandAll(!0)})}}catch(a){return a}finally{l.value=!1}})();const z=()=>{var O,T,V;const a=((O=g.value)==null?void 0:O.children)||[];let v="\u65B0\u5EFA\u5206\u7C7B1";if(a&&a.length){const I=a.map(R=>R.name);v=Ye(I,"\u65B0\u5EFA\u5206\u7C7B")}const s=new Date().getTime().toString(),o={id:s,name:v,children:null,iconOpen:ve,iconClose:ae,icon:ae,isParent:!1};(T=u.value)==null||T.addNodes(g.value||{},o,!0);const w=(V=u.value)==null?void 0:V.getNodesByParam("id",s);setTimeout(()=>{var I;(I=u.value)==null||I.editName(w[0])},100)},E=()=>{Z(()=>{var v,s,o;const a=(s=u.value)==null?void 0:s.getNodesByParam("id",(v=g.value)==null?void 0:v.id);(o=u.value)==null||o.editName(a[0])})},C=()=>{he.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1})},y=(a,v)=>{let s=!1;if(a.name.indexOf(v)>-1&&(s=!0),a.children){const o=a.children;for(let w=0;w<o.length;w++){const O=o[w];y(O,v)?s=!0:o.splice(w--,1)}}return s},A=()=>{var v,s;let a=r.value;if(!a)u.value=$.fn.zTree.init($("#treeDemo"),b,c.value),(v=u.value)==null||v.expandAll(!0);else{const o=JSON.parse(JSON.stringify(c.value));for(let w=0;w<o.length;w++)y(o[w],a)||o.splice(w--,1);u.value=$.fn.zTree.init($("#treeDemo"),b,o),(s=u.value)==null||s.expandAll(!0)}};return(a,v)=>{const s=n("icon-search"),o=n("a-input");return d(),N("div",dt,[B("div",_t,[e(o,{"allow-clear":"",maxlength:20,placeholder:_.placeholder,modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=w=>r.value=w),onInput:A,onClear:A},{prefix:t(()=>[e(s)]),_:1},8,["placeholder","modelValue"])]),B("div",pt,[B("ul",{id:"treeDemo",ref_key:"treeRef",ref:i,class:"ztree cate-ztree"},null,512)])])}}});const ft=X(mt,[["__scopeId","data-v-b221a124"]]),xe=_=>(De("data-v-fb90ac75"),_=_(),$e(),_),vt=xe(()=>B("div",null,"\u4EC5\u652F\u6301\u4E2D\u6587\u59D3\u540D",-1)),ht=k("\u5173\u95ED"),gt=k("\u5F00\u542F"),yt=xe(()=>B("span",null,"\u6743\u9650\u914D\u7F6E",-1)),kt=xe(()=>B("span",null,"\u81EA\u5B9A\u4E49\u7BA1\u7406\u5458\u3001\u7F16\u8F91\u8005\u7684\u6743\u9650\uFF0C \u70B9\u51FB",-1)),wt=k("\u4E86\u89E3\u66F4\u591A\u6743\u9650"),Ct=k("\u7BA1\u7406\u5458"),Ft=k("\u7F16\u8F91\u8005"),xt=S({__name:"EditModal",setup(_,{expose:f}){const l=ue({name:"",phone:"",status:!1}),r={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{match:Le,message:"\u53EA\u80FD\u662F\u4E2D\u6587\u59D3\u540D"},{minLength:1,maxLength:4,message:"\u540D\u5B57\u6700\u957F\u4E0D\u8D85\u8FC74\u4E2A\u5B57\u7B26"}],phone:[{match:Ke,message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"}],status:[{required:!0}]},i=[{name:"\u65B0\u589E"},{name:"\u7F16\u8F91"},{name:"\u91CD\u547D\u540D"},{name:"\u5206\u4EAB"},{name:"\u5220\u9664"}],c=h(!1),u=h(""),g=Y(()=>!!u.value),p=Y(()=>g.value?"\u7F16\u8F91":"\u65B0\u589E"),b=h(),D=async()=>{var C;return await((C=b.value)==null?void 0:C.validate())?!1:(await new Promise(y=>setTimeout(y,1500)),W.success(g.value?"\u7F16\u8F91\u6210\u529F":"\u65B0\u589E\u6210\u529F"),!0)};return f({add:()=>{u.value="",c.value=!0},edit:E=>{u.value=E,c.value=!0}}),(E,C)=>{const y=n("a-input"),A=n("a-form-item"),a=n("a-radio"),v=n("a-radio-group"),s=n("a-form"),o=n("a-row"),w=n("icon-question-circle-fill"),O=n("a-link"),T=n("a-tooltip"),V=n("a-space"),I=n("icon-right"),R=n("a-checkbox"),q=n("a-checkbox-group"),ee=n("a-collapse-item"),te=n("a-collapse"),ne=n("a-modal");return d(),F(ne,{visible:c.value,"onUpdate:visible":C[3]||(C[3]=P=>c.value=P),title:M(p),"on-before-ok":D},{default:t(()=>[e(o,{justify:"center"},{default:t(()=>[e(s,{ref_key:"formRef",ref:b,model:l,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(A,{field:"name",label:"\u59D3\u540D",rules:r.name},{extra:t(()=>[vt]),default:t(()=>[e(y,{modelValue:l.name,"onUpdate:modelValue":C[0]||(C[0]=P=>l.name=P),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(A,{field:"phone",label:"\u624B\u673A\u53F7"},{default:t(()=>[e(y,{modelValue:l.phone,"onUpdate:modelValue":C[1]||(C[1]=P=>l.phone=P),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(A,{field:"status",label:"\u72B6\u6001",rules:r.status},{default:t(()=>[e(v,{modelValue:l.status,"onUpdate:modelValue":C[2]||(C[2]=P=>l.status=P)},{default:t(()=>[e(a,{value:!1},{default:t(()=>[ht]),_:1}),e(a,{value:!0},{default:t(()=>[gt]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(te,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(ee,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(V,null,{default:t(()=>[yt,e(T,{position:"right","content-style":{width:"200px"}},{content:t(()=>[kt,e(O,{type:"primary",hoverable:!1},{default:t(()=>[wt]),_:1})]),default:t(()=>[e(w,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:P})=>[e(I,{class:Ge({gi_rotate_90deg:P})},null,8,["class"])]),default:t(()=>[(d(),N(j,null,Q(i,(P,oe)=>e(o,{justify:"space-between",key:oe},{default:t(()=>[B("span",null,U(P.name),1),e(q,null,{default:t(()=>[e(R,{value:"1"},{default:t(()=>[Ct]),_:1}),e(R,{value:"2"},{default:t(()=>[Ft]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const ze=X(xt,[["__scopeId","data-v-fb90ac75"]]),le=[{name:"\u7981\u7528",value:0,color:"red"},{name:"\u542F\u7528",value:1,color:"green"}],bt={class:"data-pane"},Bt={class:"gi_box pane-left"},Dt={class:"gi_box pane-right"},$t={class:"content"},Et=k("\u65B0\u589E"),At=k("\u5220\u9664"),zt=k("\u5BFC\u51FA"),It={class:"table-box"},Tt=k("\u4FEE\u6539"),Vt=k("\u8BE6\u60C5"),Mt=k("\u5220\u9664"),St=S({name:"DataManage"}),Nt=S({...St,setup(_){const f=ge(),l=[{title:"\u5E8F\u53F7",width:68,slotName:"index"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5730\u5740",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"\u6BD4\u4F8B",slotName:"proportion",width:200},{title:"\u72B6\u6001",slotName:"status",width:100,align:"center"},{title:"\u64CD\u4F5C",slotName:"operation",width:200,align:"center",fixed:"right"}],{pagination:r,setTotal:i}=we(()=>D()),c=ue({name:"",status:""}),u=h([]),g=h(!1),p=h(),b=o=>o<30?"danger":o<60?"warning":"success",D=async()=>{g.value=!0;const o=await Ce({current:r.current,pageSize:r.pageSize,...c});o.success&&(u.value=o.data.list,i(o.data.total)),g.value=!1};ye(()=>{D()});const x=()=>{he.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{u.value=[]}})},z=()=>{var o;(o=p.value)==null||o.add()},E=o=>{var w;(w=p.value)==null||w.edit(o.id)},C=()=>{f.push({path:"/data/detail"})},y=o=>{W.success("\u5220\u9664\u6210\u529F"),D()},A=()=>{if(!a.value.length)return W.warning("\u8BF7\u52FE\u9009\u6570\u636E");W.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},a=h([]),v=o=>{a.value=o},s=o=>{a.value=o?u.value.map(w=>w.id):[]};return(o,w)=>{const O=Ee,T=n("icon-plus"),V=n("a-button"),I=n("icon-delete"),R=n("icon-export"),q=n("a-space"),ee=n("a-option"),te=n("a-select"),ne=n("a-input"),P=n("icon-search"),oe=n("a-input-group"),re=n("icon-refresh"),H=n("a-row"),de=n("a-progress"),_e=n("a-tag"),pe=n("a-popconfirm"),me=n("a-table"),fe=ke("loading");return d(),N("div",bt,[B("section",Bt,[e(O,{title:"\u6570\u636E\u5206\u7C7B(ZTree)"}),e(ft,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:w[0]||(w[0]=m=>M(r).onChange(1))})]),B("section",Dt,[e(O,{title:"\u6570\u636E\u5217\u8868"}),B("div",$t,[e(H,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(q,null,{default:t(()=>[e(V,{type:"primary",onClick:z},{icon:t(()=>[e(T)]),default:t(()=>[Et]),_:1}),e(V,{type:"primary",status:"danger",onClick:x},{icon:t(()=>[e(I)]),default:t(()=>[At]),_:1}),e(V,{type:"primary",status:"success",onClick:A},{icon:t(()=>[e(R)]),default:t(()=>[zt]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(te,{modelValue:c.status,"onUpdate:modelValue":w[1]||(w[1]=m=>c.status=m),placeholder:"\u8BF7\u9009\u62E9","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(d(!0),N(j,null,Q(M(le),m=>(d(),F(ee,{key:m.value,value:m.value},{default:t(()=>[k(U(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(oe,null,{default:t(()=>[e(ne,{modelValue:c.name,"onUpdate:modelValue":w[2]||(w[2]=m=>c.name=m),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(V,{type:"primary",onClick:D},{default:t(()=>[e(P)]),_:1})]),_:1}),e(V,{type:"primary",onClick:D},{icon:t(()=>[e(re)]),_:1})]),_:1})]),_:1}),B("section",It,[ie((d(),F(me,{"row-key":"id",size:"small",bordered:{cell:!0},columns:l,data:u.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:M(r),onSelect:v,onSelectAll:s},{index:t(({rowIndex:m})=>[k(U(m+1),1)]),proportion:t(({record:m})=>[e(de,{status:b(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),status:t(({record:m})=>[(d(!0),N(j,null,Q(M(le),G=>(d(),N(j,{key:G.value},[G.value===m.status?(d(),F(_e,{key:0,size:"small",color:G.color},{default:t(()=>[k(U(G.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:m})=>[e(q,null,{default:t(()=>[e(V,{type:"primary",size:"mini",onClick:G=>E(m)},{default:t(()=>[Tt]),_:2},1032,["onClick"]),e(V,{size:"mini",onClick:C},{default:t(()=>[Vt]),_:1}),e(pe,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:G=>y(m.id)},{default:t(()=>[e(V,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Mt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["data","pagination"])),[[fe,g.value]])])])]),e(ze,{ref_key:"EditModalRef",ref:p},null,512)])}}}),Rt=S({name:"TreeSwitcherIcon"}),Ie=S({...Rt,props:{expanded:{type:Boolean},hasChildren:{type:Boolean}},setup(_){return(f,l)=>{const r=Fe,i=n("icon-drive-file");return _.hasChildren&&_.expanded?(d(),F(r,{key:0,class:"switcher-icon",name:"plus-square",size:16})):_.hasChildren&&!_.expanded?(d(),F(r,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(d(),F(i,{key:2,size:16}))}}}),ce=_=>(De("data-v-e6d4a6b6"),_=_(),$e(),_),Pt=ce(()=>B("span",null,"\u65B0\u589E",-1)),Ot=ce(()=>B("span",null,"\u7F16\u8F91",-1)),Gt=ce(()=>B("span",null,"\u79FB\u52A8",-1)),Ut=ce(()=>B("span",null,"\u5220\u9664",-1)),Ht=S({__name:"RightMenu",props:{treeData:null},emits:["click"],setup(_,{emit:f}){const l=r=>{f("click",r)};return(r,i)=>{const c=n("icon-plus-circle"),u=n("a-menu-item"),g=n("icon-edit"),p=n("icon-export"),b=n("icon-right"),D=n("a-space"),x=Fe,z=n("a-tree"),E=n("a-scrollbar"),C=n("a-popover"),y=n("icon-delete"),A=n("a-menu");return d(),F(A,{class:"menu"},{default:t(()=>[e(u,{onClick:i[0]||(i[0]=a=>l("add"))},{icon:t(()=>[e(c,{size:16,"stroke-width":3})]),default:t(()=>[Pt]),_:1}),e(u,{onClick:i[1]||(i[1]=a=>l("edit"))},{icon:t(()=>[e(g,{size:16,"stroke-width":3})]),default:t(()=>[Ot]),_:1}),e(C,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(E,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(z,{ref:"treeMoveRef","show-line":"",size:"mini",data:_.treeData[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((a,{checked:v,selected:s,expanded:o})=>[e(Ie,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(d(),F(x,{key:1,name:"com-file-open",size:16})):(d(),F(x,{key:2,name:"com-file",size:16})):(d(),F(x,{key:0,name:"com-file-close",size:16}))]),_:1},8,["data"])]),_:1})]),default:t(()=>[e(u,{onClick:i[2]||(i[2]=a=>l("move"))},{icon:t(()=>[e(p,{size:16,"stroke-width":3})]),default:t(()=>[e(D,{size:18},{default:t(()=>[Gt,e(b)]),_:1})]),_:1})]),_:1}),e(u,{onClick:i[3]||(i[3]=a=>l("delete"))},{icon:t(()=>[e(y,{size:16,"stroke-width":3})]),default:t(()=>[Ut]),_:1})]),_:1})}}});const jt=X(Ht,[["__scopeId","data-v-e6d4a6b6"]]),Wt={class:"cate-tree"},qt={class:"search-wrap"},Lt={class:"wrap"},Kt=S({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(_,{emit:f}){const l=h(!1),r=h(),i=h(""),c=h([]),u=()=>{f("node-click")};(async()=>{try{l.value=!0;const b=await Ae();b.success&&(c.value=b.data,Z(()=>{r.value.expandAll()}))}catch(b){return b}finally{l.value=!1}})();const p=b=>{b!=="move"&&W.info(b)};return(b,D)=>{const x=n("icon-search"),z=n("a-input"),E=Fe,C=n("a-trigger"),y=n("a-tree"),A=n("a-scrollbar");return d(),N("div",Wt,[B("div",qt,[e(z,{"allow-clear":"",maxlength:20,placeholder:_.placeholder,modelValue:i.value,"onUpdate:modelValue":D[0]||(D[0]=a=>i.value=a)},{prefix:t(()=>[e(x)]),_:1},8,["placeholder","modelValue"])]),B("div",Lt,[e(A,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(y,{ref_key:"treeRef",ref:r,"show-line":"",size:"mini",data:c.value,fieldNames:{key:"id"},onSelect:u},{"switcher-icon":t((a,{checked:v,selected:s,expanded:o})=>[e(Ie,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(d(),F(E,{key:1,name:"com-file-open",size:16})):(d(),F(E,{key:2,name:"com-file",size:16})):(d(),F(E,{key:0,name:"com-file-close",size:16}))]),title:t(a=>[e(C,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(jt,{"tree-data":c.value,onClick:p},null,8,["tree-data"])]),default:t(()=>[B("div",null,U(a.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Xt=X(Kt,[["__scopeId","data-v-c24df243"]]),Jt={class:"data-pane"},Yt={class:"gi_box pane-left"},Zt={class:"gi_box pane-right"},Qt={class:"content"},en=k("\u5220\u9664"),tn={class:"table-box"},nn=k("\u4FEE\u6539"),on=k("\u8BE6\u60C5"),an=k("\u5220\u9664"),ln=S({name:"DataManage"}),un=S({...ln,setup(_){const f=ge(),{pagination:l,setTotal:r}=we(()=>p()),i=ue({name:"",status:""}),c=h([]),u=h(!1),g=s=>s<30?"danger":s<60?"warning":"success",p=async()=>{try{u.value=!0;const s=await Ce({...i,current:l.current,pageSize:l.pageSize});c.value=s.data.list,r(s.data.total)}catch(s){return s}finally{u.value=!1}};ye(()=>{p()});const b=()=>{he.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{c.value=[]}})},D=h(),x=()=>{var s;(s=D.value)==null||s.add()},z=s=>{var o;(o=D.value)==null||o.edit(s.id)},E=()=>{f.push({path:"/data/detail"})},C=s=>{W.success("\u5220\u9664\u6210\u529F"),p()},y=()=>{if(!A.value.length)return W.warning("\u8BF7\u52FE\u9009\u6570\u636E");W.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},A=h([]),a=s=>{A.value=s},v=s=>{A.value=s?c.value.map(o=>o.id):[]};return(s,o)=>{const w=Ee,O=n("icon-plus"),T=n("a-button"),V=n("icon-delete"),I=n("icon-export"),R=n("a-space"),q=n("a-option"),ee=n("a-select"),te=n("a-input"),ne=n("icon-search"),P=n("a-input-group"),oe=n("icon-refresh"),re=n("a-row"),H=n("a-table-column"),de=n("a-progress"),_e=n("a-tag"),pe=n("a-popconfirm"),me=n("a-table"),fe=ke("loading");return d(),N("div",Jt,[B("section",Yt,[e(w,{title:"\u6570\u636E\u5206\u7C7B"}),e(Xt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:o[0]||(o[0]=m=>M(l).onChange(1))})]),B("section",Zt,[e(w,{title:"\u6570\u636E\u5217\u8868"}),B("div",Qt,[e(re,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(R,null,{default:t(()=>[e(T,{type:"primary",onClick:x},{icon:t(()=>[e(O)]),_:1}),e(T,{type:"primary",status:"danger",onClick:b},{icon:t(()=>[e(V)]),default:t(()=>[en]),_:1}),e(T,{type:"primary",status:"success",onClick:y},{icon:t(()=>[e(I)]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(ee,{modelValue:i.status,"onUpdate:modelValue":o[1]||(o[1]=m=>i.status=m),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(d(!0),N(j,null,Q(M(le),m=>(d(),F(q,{key:m.value,value:m.value},{default:t(()=>[k(U(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(P,null,{default:t(()=>[e(te,{modelValue:i.name,"onUpdate:modelValue":o[2]||(o[2]=m=>i.name=m),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(T,{type:"primary",onClick:p},{default:t(()=>[e(ne)]),_:1})]),_:1}),e(T,{type:"primary",onClick:p},{icon:t(()=>[e(oe)]),_:1})]),_:1})]),_:1}),B("section",tn,[ie((d(),F(me,{"row-key":"id",size:"small",bordered:{cell:!0},data:c.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:M(l),onSelect:a,onSelectAll:v},{columns:t(()=>[e(H,{title:"\u5E8F\u53F7",width:68},{cell:t(m=>[k(U(m.rowIndex+1),1)]),_:1}),e(H,{title:"\u59D3\u540D","data-index":"name"}),e(H,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(H,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:m})=>[e(de,{status:g(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),_:1}),e(H,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:m})=>[(d(!0),N(j,null,Q(M(le),G=>(d(),N(j,{key:G.value},[G.value===m.status?(d(),F(_e,{key:0,size:"small",color:G.color},{default:t(()=>[k(U(G.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),_:1}),e(H,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime",width:180}),e(H,{title:"\u64CD\u4F5C",width:200,align:"center",fixed:"right"},{cell:t(({record:m})=>[e(R,null,{default:t(()=>[e(T,{type:"primary",size:"mini",onClick:G=>z(m)},{default:t(()=>[nn]),_:2},1032,["onClick"]),e(T,{size:"mini",onClick:E},{default:t(()=>[on]),_:1}),e(pe,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:G=>C(m.id)},{default:t(()=>[e(T,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[an]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination"])),[[fe,u.value]])])])]),e(ze,{ref_key:"EditModalRef",ref:D},null,512)])}}}),sn={class:"data-pane3"},cn=k("\u9996\u9875"),rn=k("\u6570\u636E\u7BA1\u7406"),dn=k("\u5355\u4F4D\u7BA1\u7406"),_n=k("\u91CD\u7F6E"),pn=k("\u63D0\u4EA4"),mn={class:"content"},fn={class:"table-box"},vn=k("\u8BE6\u60C5"),hn=S({__name:"Pane3",setup(_){ge();const f=[{title:"\u5E8F\u53F7",width:68,slotName:"index"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5730\u5740",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"\u6BD4\u4F8B",slotName:"proportion",width:68,align:"center"},{title:"\u72B6\u6001",slotName:"status",width:100,align:"center"},{title:"\u64CD\u4F5C",slotName:"operation",width:200,align:"center"}],{pagination:l,setTotal:r}=we(()=>u()),i=h([]),c=h(!1),u=async()=>{c.value=!0;const x=await Ce({current:l.current,pageSize:l.pageSize});x.success&&(i.value=x.data.list,r(x.data.total)),c.value=!1};ye(()=>{u()});const g=x=>x<30?"danger":x<60?"warning":"success",p=h([]),b=x=>{p.value=x},D=x=>{p.value=x?i.value.map(z=>z.id):[]};return(x,z)=>{const E=n("a-breadcrumb-item"),C=n("a-breadcrumb"),y=n("a-button"),A=n("a-space"),a=n("a-row"),v=n("a-progress"),s=n("a-tag"),o=n("icon-edit"),w=n("icon-delete"),O=n("a-popconfirm"),T=n("a-table"),V=ke("loading");return d(),N("div",sn,[e(a,{justify:"space-between",align:"center",class:"head"},{default:t(()=>[e(C,null,{default:t(()=>[e(E,null,{default:t(()=>[cn]),_:1}),e(E,null,{default:t(()=>[rn]),_:1}),e(E,null,{default:t(()=>[dn]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(y,null,{default:t(()=>[_n]),_:1}),e(y,{type:"primary"},{default:t(()=>[pn]),_:1})]),_:1})]),_:1}),B("section",mn,[B("section",fn,[ie((d(),F(T,{"row-key":"id",size:"small",bordered:{cell:!0},columns:f,data:i.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:M(l),onSelect:b,onSelectAll:D},{index:t(({rowIndex:I})=>[k(U(I+1),1)]),proportion:t(({record:I})=>[e(v,{size:"mini",status:g(I.proportion),percent:I.proportion/100},null,8,["status","percent"])]),status:t(({record:I})=>[(d(!0),N(j,null,Q(M(le),R=>(d(),N(j,{key:R.value},[R.value===I.status?(d(),F(s,{key:0,size:"small",color:R.color},{default:t(()=>[k(U(R.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:I})=>[e(A,null,{default:t(()=>[e(y,{type:"primary",size:"mini"},{default:t(()=>[e(o)]),_:1}),e(y,{size:"mini"},{default:t(()=>[vn]),_:1}),e(O,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?"},{default:t(()=>[e(y,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[e(w)]),_:1})]),_:1})]),_:1})]),_:1},8,["data","pagination"])),[[V,c.value]])])])])}}});const gn=X(hn,[["__scopeId","data-v-86e26aac"]]),yn={class:"manage"},kn={class:"tab"},wn=S({name:"DataManage"}),Tn=S({...wn,setup(_){const f={1:Nt,2:un,3:gn},l=h(2);return(r,i)=>{const c=n("a-tab-pane"),u=n("a-tabs");return d(),N("div",yn,[B("section",kn,[e(u,{"hide-content":"",size:"medium","active-key":l.value,"onUpdate:active-key":i[0]||(i[0]=g=>l.value=g)},{default:t(()=>[(d(),F(c,{key:1,title:"\u5468\u671F\u7BA1\u7406"})),(d(),F(c,{key:2,title:"\u7EF4\u5EA6\u7BA1\u7406"})),(d(),F(c,{key:3,title:"\u5355\u4F4D\u7BA1\u7406"}))]),_:1},8,["active-key"])]),e(Be,{name:"fade-slide",mode:"out-in",appear:""},{default:t(()=>[(d(),F(He,null,[(d(),F(Ue(f[l.value])))],1024))]),_:1})])}}});export{Tn as default};
