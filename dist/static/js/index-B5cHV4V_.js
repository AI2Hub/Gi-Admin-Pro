import{_ as e}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BTd11BkY.js";import{_ as a}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-45nwmnHt.js";import{_ as l}from"./PermModal.vue_vue_type_script_setup_true_lang-BRhN_yBR.js";import{d as t,J as i,S as s,e as n,o,f as d,h as r,w as u,g as c,i as p,G as m,t as _,V as f}from"./index-BV31vIGp.js";import{u as y}from"./useTable-BzCGu7kD.js";import{b as v}from"./role-CwD8iz4D.js";import{u as g}from"./useDict-B720UWRn.js";import{d as k}from"./index-CssvFpFx.js";import"./useResetReactive-B3MRrAZj.js";import"./menu-BbaNVk3P.js";import"./useBreakpoint-CPqr1DyH.js";import"./index-mGwjBKd5.js";const h={class:"gi_page role-manage"},w=t({name:"SystemRole",__name:"index",setup(t){const{data:w}=g({code:"status"}),x=i("AddRoleModalRef"),b=i("PermModalRef"),j=s({name:"",status:""}),{loading:C,tableData:S,pagination:R,selectedKeys:A,search:M,select:V,selectAll:z,handleDelete:B,fixed:D}=y((e=>v(e)),{immediate:!0}),P=()=>{j.name="",j.status="",M()},G=()=>{if(!A.value.length)return f.warning("请选择角色！");B((()=>k({ids:A.value})))},O=()=>{var e;null==(e=x.value)||e.add()};return(t,i)=>{const s=n("icon-search"),f=n("a-input"),y=n("a-select"),v=n("a-button"),g=n("icon-refresh"),T=n("a-space"),U=n("icon-plus"),I=n("icon-delete"),J=n("a-row"),K=n("a-table-column"),N=e,Q=n("icon-edit"),W=n("icon-safe"),X=n("a-popconfirm"),Y=n("a-table"),$=n("a-card");return o(),d("div",h,[r($,{title:"角色管理"},{default:u((()=>[r(T,{wrap:""},{default:u((()=>[r(f,{modelValue:c(j).name,"onUpdate:modelValue":i[0]||(i[0]=e=>c(j).name=e),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},{prefix:u((()=>[r(s)])),_:1},8,["modelValue"]),r(y,{modelValue:c(j).status,"onUpdate:modelValue":i[1]||(i[1]=e=>c(j).status=e),options:c(w),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),r(v,{type:"primary",onClick:c(M)},{icon:u((()=>[r(s)])),default:u((()=>[i[2]||(i[2]=p("span",null,"查询",-1))])),_:1},8,["onClick"]),r(v,{onClick:P},{icon:u((()=>[r(g)])),default:u((()=>[i[3]||(i[3]=p("span",null,"重置",-1))])),_:1})])),_:1}),r(J,null,{default:u((()=>[r(T,{wrap:""},{default:u((()=>[r(v,{type:"primary",onClick:O},{icon:u((()=>[r(U)])),default:u((()=>[i[4]||(i[4]=p("span",null,"新增",-1))])),_:1}),r(v,{type:"primary",status:"danger",onClick:G},{icon:u((()=>[r(I)])),default:u((()=>[i[5]||(i[5]=p("span",null,"删除",-1))])),_:1})])),_:1})])),_:1}),r(Y,{"row-key":"id",data:c(S),bordered:{cell:!0},loading:c(C),scroll:{x:"100%",y:"100%",minWidth:900},pagination:c(R),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":c(A),onSelect:c(V),onSelectAll:c(z)},{columns:u((()=>[r(K,{title:"序号",width:64},{cell:u((e=>[m(_(e.rowIndex+1),1)])),_:1}),r(K,{title:"角色名称","data-index":"name"}),r(K,{title:"角色编码","data-index":"code"}),r(K,{title:"状态",width:100,align:"center"},{cell:u((({record:e})=>[r(N,{status:e.status},null,8,["status"])])),_:1}),r(K,{title:"描述","data-index":"description",ellipsis:!0,tooltip:!0}),r(K,{title:"创建时间","data-index":"createTime"}),r(K,{title:"操作",width:280,align:"center",fixed:c(D)},{cell:u((({record:e})=>[r(T,null,{default:u((()=>[r(v,{type:"primary",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=x.value)||t.edit(l.id));var l,t}},{icon:u((()=>[r(Q)])),default:u((()=>[i[6]||(i[6]=p("span",null,"编辑",-1))])),_:2},1032,["disabled","onClick"]),r(v,{type:"primary",status:"success",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=b.value)||t.open({code:l.code,title:l.name}));var l,t}},{icon:u((()=>[r(W)])),default:u((()=>i[7]||(i[7]=[m("分配权限")]))),_:2},1032,["disabled","onClick"]),r(X,{type:"warning",content:"确定删除该角色吗?",onBeforeOk:a=>{return l=e,B((()=>k({ids:[l.id]})),{showModal:!1});var l}},{default:u((()=>[r(v,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:u((()=>[r(I)])),default:u((()=>[i[8]||(i[8]=p("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"]),r(a,{ref_key:"AddRoleModalRef",ref:x,onSaveSuccess:c(M)},null,8,["onSaveSuccess"]),r(l,{ref_key:"PermModalRef",ref:b},null,512)])),_:1})])}}});export{w as default};
