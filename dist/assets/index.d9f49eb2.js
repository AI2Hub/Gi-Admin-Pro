var q=Object.defineProperty,z=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var k=(s,o,n)=>o in s?q(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n,A=(s,o)=>{for(var n in o||(o={}))L.call(o,n)&&k(s,n,o[n]);if(C)for(var n of C(o))P.call(o,n)&&k(s,n,o[n]);return s},I=(s,o)=>z(s,M(o));import{f as x,C as U,g as S,r as a,o as E,c as F,w as t,a as e,u as i,F as V,I as g,q as b,h as j,i as G,D as H,a2 as J}from"./vendor.b4c92831.js";import{g as K}from"./system.123ca9c7.js";import{_ as O}from"./index.ec0eea10.js";import"./axios.d100dbef.js";const Q=g("dept_code_"),W=g("\u6B63\u5E38"),X=g("\u7981\u7528"),Y=x({props:{modelValue:{type:Boolean,default:!1},treeData:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(s,{emit:o}){const n=s,d=U({parentId:"",name:"",deptCode:"",order:"",status:1});let l=S({get:()=>n.modelValue,set:h=>{o("update:modelValue",h)}});return(h,u)=>{const c=a("a-tree-select"),m=a("a-form-item"),f=a("a-input"),B=a("a-input-number"),v=a("a-radio"),D=a("a-radio-group"),p=a("a-form"),y=a("a-modal");return E(),F(y,{visible:i(l),"onUpdate:visible":u[4]||(u[4]=r=>V(l)?l.value=r:l=r),title:"\u65B0\u589E\u90E8\u95E8"},{default:t(()=>[e(p,{ref:"formRef",model:i(d),labelCol:{span:4}},{default:t(()=>[e(m,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:t(()=>[e(c,{data:s.treeData,placeholder:"\u8BF7\u9009\u62E9",fieldNames:{key:"id",title:"name",children:"children"},treeProps:{virtualListProps:{height:250}}},null,8,["data"])]),_:1}),e(m,{label:"\u90E8\u95E8\u540D\u79F0",field:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 10\u4E2A\u5B57\u7B26",trigger:"blur"}],"validate-trigger":["change","input"]},{default:t(()=>[e(f,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",modelValue:i(d).name,"onUpdate:modelValue":u[0]||(u[0]=r=>i(d).name=r)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u90E8\u95E8\u7F16\u53F7",field:"deptCode",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 30\u4E2A\u5B57\u7B26",trigger:"blur"}],"validate-trigger":["change","input"]},{default:t(()=>[e(f,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",modelValue:i(d).deptCode,"onUpdate:modelValue":u[1]||(u[1]=r=>i(d).deptCode=r)},{prepend:t(()=>[Q]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u6392\u5E8F",name:"order"},{default:t(()=>[e(B,{modelValue:i(d).order,"onUpdate:modelValue":u[2]||(u[2]=r=>i(d).order=r)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u72B6\u6001",name:"status"},{default:t(()=>[e(D,{modelValue:i(d).status,"onUpdate:modelValue":u[3]||(u[3]=r=>i(d).status=r)},{default:t(()=>[e(v,{value:1},{default:t(()=>[W]),_:1}),e(v,{value:0},{default:t(()=>[X]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}});const Z={class:"dept-manage"},ee=g("\u65B0\u589E\u90E8\u95E8 "),te={class:"table-box"},ae=g("\u6B63\u5E38"),oe=g("\u7981\u7528"),ue=x({name:"DeptManage"}),le=x(I(A({},ue),{setup(s){const o=b([]);let n=b(0),d=b(!1),l=b(!1);return U({pageCount:1,pageSize:1e3}),(async()=>{try{d.value=!0;const u=await K();u.success&&(o.value=u.data.list,n.value=u.data.total,d.value=!1)}catch(u){return d.value=!1,u}})(),(u,c)=>{const m=a("icon-plus"),f=a("a-button"),B=a("a-row"),v=a("IconDown"),D=a("IconRight"),p=a("a-table-column"),y=a("a-switch"),r=a("icon-edit"),N=a("icon-delete"),R=a("a-space"),T=a("a-table"),$=J("loading");return E(),j("div",Z,[e(B,{class:"head"},{default:t(()=>[e(f,{type:"primary",onClick:c[0]||(c[0]=_=>V(l)?l.value=!0:l=!0)},{icon:t(()=>[e(m)]),default:t(()=>[ee]),_:1})]),_:1}),G("section",te,[H((E(),F(T,{data:o.value,scroll:{x:"100%",y:"100%"},pagination:{"show-page-size":!0},expandable:{width:80}},{"expand-icon":t(({expanded:_})=>[_?(E(),F(v,{key:0})):(E(),F(D,{key:1}))]),columns:t(()=>[e(p,{title:"\u90E8\u95E8\u540D\u79F0","data-index":"name"}),e(p,{title:"\u90E8\u95E8\u7F16\u7801","data-index":"deptCode"}),e(p,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime",width:"200"}),e(p,{title:"\u72B6\u6001",width:"100"},{cell:t(({record:_})=>[e(y,{modelValue:_.status,"onUpdate:modelValue":w=>_.status=w,size:"medium","checked-value":1,"unchecked-value":0},{checked:t(()=>[ae]),unchecked:t(()=>[oe]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(p,{title:"\u64CD\u4F5C",width:"100"},{cell:t(({record:_})=>[e(R,null,{default:t(()=>[e(f,{type:"primary",onClick:c[1]||(c[1]=w=>V(l)?l.value=!0:l=!0)},{icon:t(()=>[e(r)]),_:1}),e(f,{type:"primary",status:"danger"},{icon:t(()=>[e(N)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])),[[$,i(d)]])]),e(Y,{"tree-data":o.value,modelValue:i(l),"onUpdate:modelValue":c[2]||(c[2]=_=>V(l)?l.value=_:l=_)},null,8,["tree-data","modelValue"])])}}}));var _e=O(le,[["__scopeId","data-v-3e27f0e7"]]);export{_e as default};
