import{d as B,g as c,l as x,z as H,eB as R,eC as W,eD as O,r as y,o as V,e as X,w as j,W as A,h as a,D as J,u as p,a as w,t as S,X as T,T as Y,_ as E}from"./index-cf2c3459.js";const F="/gi-demo/assets/致你-e67c8f57.mp3",M={style:{padding:"10px 14px 14px 14px"}},q={class:"name"},G=["src"],K=B({__name:"Dialog",props:{fileInfo:Object,onCancel:Function},setup(D,{expose:C}){const s=D,i=c(!1),u=c(null),b=c(null),I=x(()=>{var e,o;return((e=s.fileInfo)==null?void 0:e.id)==="004"?F:(o=s.fileInfo)==null?void 0:o.src});H(()=>{i.value=!0});const{width:d,height:v}=R(),{width:n,height:_}=W(u),l=c({top:40,left:d.value-n.value}),t=JSON.parse(sessionStorage.getItem("AudioDialogXY"));t&&t.top&&t.left&&(l.value.top=t.top,l.value.left=t.left);const{x:r,y:f}=O(u,{initialValue:{x:l.value.left-n.value,y:l.value.top}}),z=x(()=>{let e=r.value,o=f.value;return r.value>d.value-n.value&&(e=d.value-n.value),r.value<0&&(e=0),f.value>v.value-_.value&&(o=v.value-_.value),f.value<0&&(o=0),sessionStorage.setItem("AudioDialogXY",JSON.stringify({top:o,left:e})),{left:e+"px",top:o+"px"}}),m=()=>{i.value=!1,s.onCancel&&s.onCancel()};return C({visible:i,handleClose:m}),(e,o)=>{const k=y("icon-music"),N=y("icon-close");return V(),X(Y,{name:"slide-dynamic-origin"},{default:j(()=>{var g,h;return[A(a("div",{class:"audio-preview-wrapper",ref_key:"audioRef",ref:u,style:J(p(z))},[a("section",M,[a("div",{class:"head",ref_key:"audioHeadRef",ref:b},[a("div",q,[w(k,{size:16,spin:""}),a("span",null,S((g=s.fileInfo)==null?void 0:g.name)+"."+S((h=s.fileInfo)==null?void 0:h.extendName),1)]),a("div",{class:"close-icon",onClick:m},[w(N,{size:12})])],512),a("audio",{class:"audio",src:p(I),controls:"",autoplay:""},null,8,G)])],4),[[T,p(i)]])]}),_:1})}}});const P=E(K,[["__scopeId","data-v-58bae5ae"]]);export{P as default};
