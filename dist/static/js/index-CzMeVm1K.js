import{_ as e}from"./GiCellGender.vue_vue_type_script_setup_true_lang-BW6hwTVa.js";import{_ as a}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-6kDWA25M.js";import{_ as l}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-DXeXt0Ap.js";import{_ as t}from"./AddUserModal.vue_vue_type_script_setup_true_lang-BsakQHAV.js";import{_ as n}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-C5vlhPRI.js";import{d as i,b as r,R as s,e as d,o,f as u,h as c,w as p,g as m,H as _,i as f,G as g,t as y,c as x,a as h,J as v,S as w,Q as k}from"./index-nwng0QS3.js";import{u as j}from"./useBreakpoint-BCl7Sgev.js";import{u as S}from"./useDept-O3vghuds.js";import{a as b}from"./user-lmqD6CdI.js";import{u as C}from"./useDict-DnO1faH7.js";import{d as V}from"./index-BC6V0ZU_.js";import"./regexp-LyZ7ySAN.js";import"./role-rmrCAAzz.js";import"./useForm-DZWFr-rC.js";import"./index-BHeqEjUV.js";const A={class:"gi_page user-manage"},D=i({name:"SystemUser",__name:"index",setup(i){const{data:D}=C({code:"status"}),U=r(),z=r(),G=r(),R=r(""),{deptList:B,getDeptList:L}=S({onSuccess:()=>{k((()=>{var e;null==(e=U.value)||e.expandAll(!0)}))}});L();const M=s({status:"",username:""}),{loading:J,tableData:O,pagination:W,selectedKeys:F,search:H,select:I,selectAll:K,handleDelete:N}=j((e=>b(e)),{immediate:!0}),Q=()=>{M.status="",M.username="",H()},T=()=>{if(!F.value.length)return w.warning("请选择用户！");N((()=>V({ids:F.value})))},X=()=>{var e;null==(e=z.value)||e.add()};return(i,r)=>{const s=d("icon-search"),w=d("a-input"),k=d("a-tree"),j=d("a-col"),S=d("icon-plus"),b=d("a-button"),C=d("icon-delete"),L=d("a-space"),q=d("a-select"),E=d("a-input-group"),P=d("icon-refresh"),Y=d("a-row"),Z=d("a-table-column"),$=d("a-link"),ee=l,ae=a,le=e,te=d("a-tag"),ne=d("icon-edit"),ie=d("a-popconfirm"),re=d("a-table"),se=d("a-card");return o(),u("div",A,[c(se,{title:"用户管理"},{default:p((()=>[c(Y,{gutter:16},{default:p((()=>[c(j,{xs:0,md:6,lg:6,xl:6,xxl:4},{default:p((()=>[c(w,{modelValue:m(R),"onUpdate:modelValue":r[0]||(r[0]=e=>_(R)?R.value=e:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:p((()=>[c(s)])),_:1},8,["modelValue"]),c(k,{ref_key:"treeRef",ref:U,"block-node":"","show-line":"","default-expand-all":"",data:m(B),"field-names":{key:"id",title:"name",children:"children"},onSelect:m(H)},null,8,["data","onSelect"])])),_:1}),c(j,{xs:24,md:18,lg:18,xl:18,xxl:20},{default:p((()=>[c(Y,{justify:"space-between"},{default:p((()=>[c(L,{wrap:""},{default:p((()=>[c(b,{type:"primary",onClick:X},{icon:p((()=>[c(S)])),default:p((()=>[r[3]||(r[3]=f("span",null,"新增",-1))])),_:1}),c(b,{type:"primary",status:"danger",onClick:T},{icon:p((()=>[c(C)])),default:p((()=>[r[4]||(r[4]=f("span",null,"删除",-1))])),_:1})])),_:1}),c(L,{wrap:""},{default:p((()=>[c(E,null,{default:p((()=>[c(q,{modelValue:m(M).status,"onUpdate:modelValue":r[1]||(r[1]=e=>m(M).status=e),options:m(D),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),c(w,{modelValue:m(M).username,"onUpdate:modelValue":r[2]||(r[2]=e=>m(M).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])])),_:1}),c(b,{type:"primary",onClick:m(H)},{icon:p((()=>[c(s)])),default:p((()=>[r[5]||(r[5]=f("span",null,"查询",-1))])),_:1},8,["onClick"]),c(b,{onClick:Q},{icon:p((()=>[c(P)])),default:p((()=>[r[6]||(r[6]=f("span",null,"重置",-1))])),_:1})])),_:1})])),_:1}),c(re,{"row-key":"id",loading:m(J),data:m(O),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:m(W),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":m(F),onSelect:m(I),onSelectAll:m(K)},{columns:p((()=>[c(Z,{title:"序号",width:64},{cell:p((e=>[g(y(e.rowIndex+1),1)])),_:1}),c(Z,{title:"用户名","data-index":"username",width:120},{cell:p((({record:e})=>[c($,{onClick:a=>{return l=e,void(null==(t=G.value)||t.open(l.id));var l,t}},{default:p((()=>[g(y(e.username),1)])),_:2},1032,["onClick"])])),_:1}),c(Z,{title:"昵称","data-index":"nickname",width:150},{cell:p((({record:e})=>[c(ee,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),c(Z,{title:"状态",width:100,align:"center"},{cell:p((({record:e})=>[c(ae,{status:e.status},null,8,["status"])])),_:1}),c(Z,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:p((({record:e})=>[c(le,{gender:e.gender},null,8,["gender"])])),_:1}),c(Z,{title:"联系方式","data-index":"phone",width:180}),c(Z,{title:"部门","data-index":"deptName",width:180}),c(Z,{title:"类型",width:100,align:"center"},{cell:p((({record:e})=>[1===e.type?(o(),x(te,{key:0,color:"red",size:"small"},{default:p((()=>r[7]||(r[7]=[g("系统内置")]))),_:1})):h("",!0),2===e.type?(o(),x(te,{key:1,color:"orange",size:"small"},{default:p((()=>r[8]||(r[8]=[g("自定义")]))),_:1})):h("",!0)])),_:1}),c(Z,{title:"描述",width:200,"data-index":"description"}),c(Z,{title:"创建时间","data-index":"createTime",width:200}),c(Z,{title:"操作",width:180,align:"center",fixed:m(v)()?void 0:"right"},{cell:p((({record:e})=>[c(L,null,{default:p((()=>[c(b,{type:"primary",size:"mini",onClick:a=>{return l=e,void(null==(t=z.value)||t.edit(l.id));var l,t}},{icon:p((()=>[c(ne)])),default:p((()=>[r[9]||(r[9]=f("span",null,"编辑",-1))])),_:2},1032,["onClick"]),c(ie,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:a=>{return l=e,N((()=>V({ids:[l.id]})),{showModal:!1});var l}},{default:p((()=>[c(b,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:p((()=>[c(C)])),default:p((()=>[r[10]||(r[10]=f("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])])),_:1})])),_:1})])),_:1}),c(t,{ref_key:"AddUserModalRef",ref:z,onSaveSuccess:m(H)},null,8,["onSaveSuccess"]),c(n,{ref_key:"UserDetailDrawerRef",ref:G},null,512)])}}});export{D as default};
