import{_ as e}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-DJuLT-BE.js";import{_ as a}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-DXrEbqds.js";import{_ as l}from"./PermModal.vue_vue_type_script_setup_true_lang-j_vAIaVp.js";import{d as t,b as i,U as s,e as n,o,f as d,h as r,w as u,g as c,I as p,t as m,L as _,i as f,V as y}from"./index-BeJa-HIK.js";import{u as v}from"./useTable-XomLdSuY.js";import{b as g}from"./role-Dr_zbcES.js";import{d as h}from"./index-CZ2h4KSG.js";import{u as k}from"./useDict-jIY7fQYF.js";import"./useForm-2Vzy--Sc.js";import"./menu-C7M96ySM.js";import"./useBreakpoint-7R0dlkMx.js";import"./index-DghalQWv.js";const w={class:"gi_page role-manage"},b=f("span",null,"查询",-1),x=f("span",null,"重置",-1),j=f("span",null,"新增",-1),C=f("span",null,"删除",-1),S=f("span",null,"编辑",-1),V=f("span",null,"删除",-1),A=t({name:"SystemRole",__name:"index",setup(t){const{data:f}=k({code:"status"}),A=i(),M=i(),R=s({name:"",status:""}),{loading:U,tableData:z,pagination:B,selectedKeys:D,search:I,select:O,selectAll:P,handleDelete:T}=v((e=>g(e)),{immediate:!0}),W=()=>{R.name="",R.status="",I()},F=()=>{if(!D.value.length)return y.warning("请选择角色！");T((()=>h({ids:D.value})))},G=()=>{var e;null==(e=A.value)||e.add()};return(t,i)=>{const s=n("icon-search"),y=n("a-input"),v=n("a-select"),g=n("a-button"),k=n("icon-refresh"),J=n("a-space"),K=n("icon-plus"),L=n("icon-delete"),X=n("a-row"),Y=n("a-table-column"),q=e,E=n("icon-edit"),H=n("icon-safe"),N=n("a-popconfirm"),Q=n("a-table"),Z=n("a-card");return o(),d("div",w,[r(Z,{title:"角色管理"},{default:u((()=>[r(J,{wrap:""},{default:u((()=>[r(y,{modelValue:c(R).name,"onUpdate:modelValue":i[0]||(i[0]=e=>c(R).name=e),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},{prefix:u((()=>[r(s)])),_:1},8,["modelValue"]),r(v,{modelValue:c(R).status,"onUpdate:modelValue":i[1]||(i[1]=e=>c(R).status=e),options:c(f),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),r(g,{type:"primary",onClick:c(I)},{icon:u((()=>[r(s)])),default:u((()=>[b])),_:1},8,["onClick"]),r(g,{onClick:W},{icon:u((()=>[r(k)])),default:u((()=>[x])),_:1})])),_:1}),r(X,null,{default:u((()=>[r(J,{wrap:""},{default:u((()=>[r(g,{type:"primary",onClick:G},{icon:u((()=>[r(K)])),default:u((()=>[j])),_:1}),r(g,{type:"primary",status:"danger",onClick:F},{icon:u((()=>[r(L)])),default:u((()=>[C])),_:1})])),_:1})])),_:1}),r(Q,{"row-key":"id",data:c(z),bordered:{cell:!0},loading:c(U),scroll:{x:"100%",y:"100%",minWidth:900},pagination:c(B),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":c(D),onSelect:c(O),onSelectAll:c(P)},{columns:u((()=>[r(Y,{title:"序号",width:64},{cell:u((e=>[p(m(e.rowIndex+1),1)])),_:1}),r(Y,{title:"角色名称","data-index":"name"}),r(Y,{title:"角色编码","data-index":"code"}),r(Y,{title:"状态",width:100,align:"center"},{cell:u((({record:e})=>[r(q,{status:e.status},null,8,["status"])])),_:1}),r(Y,{title:"描述","data-index":"description"}),r(Y,{title:"创建时间","data-index":"createTime"}),r(Y,{title:"操作",width:280,align:"center",fixed:c(_)()?void 0:"right"},{cell:u((({record:e})=>[r(J,null,{default:u((()=>[r(g,{type:"primary",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=A.value)||t.edit(l.id));var l,t}},{icon:u((()=>[r(E)])),default:u((()=>[S])),_:2},1032,["disabled","onClick"]),r(g,{type:"primary",status:"success",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=M.value)||t.open({code:l.code,title:l.name}));var l,t}},{icon:u((()=>[r(H)])),default:u((()=>[p("分配权限")])),_:2},1032,["disabled","onClick"]),r(N,{type:"warning",content:"确定删除该角色吗?",onBeforeOk:a=>{return l=e,T((()=>h({ids:[l.id]})),{showModal:!1});var l}},{default:u((()=>[r(g,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:u((()=>[r(L)])),default:u((()=>[V])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"]),r(a,{ref_key:"AddRoleModalRef",ref:A,onSaveSuccess:c(I)},null,8,["onSaveSuccess"]),r(l,{ref_key:"PermModalRef",ref:M},null,512)])),_:1})])}}});export{A as default};
