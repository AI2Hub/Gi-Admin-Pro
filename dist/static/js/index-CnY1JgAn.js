import{_ as e}from"./GiCellGender.vue_vue_type_script_setup_true_lang-COIcHsQe.js";import{_ as a}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-DG34RfKT.js";import{_ as l}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-CK4S3jLI.js";import{_ as t}from"./AddUserModal.vue_vue_type_script_setup_true_lang-BkKyG5bn.js";import{_ as i}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-CSpXyxck.js";import{d as n,J as s,b as r,U as d,e as o,o as u,f as c,h as p,w as m,g as _,H as f,i as g,G as y,t as v,c as x,a as w,K as h,V as k,S as j}from"./index-BUFsz7Wk.js";import{u as S}from"./useBreakpoint-DLRBKOJM.js";import{u as b}from"./useDept-nnT5Ihws.js";import{a as C}from"./user-CxZyA5RP.js";import{u as D}from"./useDict-7a7D9ELK.js";import{d as U}from"./index-CLdkLKnB.js";import"./regexp-LyZ7ySAN.js";import"./role-CGapKLsr.js";import"./useResetReactive-DWj2tJcX.js";import"./index-BnJCFZ-6.js";const V={class:"gi_page user-manage"},A=n({name:"SystemUser",__name:"index",setup(n){const{data:A}=D({code:"status"}),R=s("treeRef"),G=s("AddUserModalRef"),z=s("UserDetailDrawerRef"),M=r(""),{deptList:B,getDeptList:O}=b({onSuccess:()=>{j((()=>{var e;null==(e=R.value)||e.expandAll(!0)}))}});O();const K=d({status:"",username:""}),{loading:L,tableData:H,pagination:I,selectedKeys:J,search:N,select:T,selectAll:W,handleDelete:Y}=S((e=>C(e)),{immediate:!0}),Z=()=>{K.status="",K.username="",N()},$=()=>{if(!J.value.length)return k.warning("请选择用户！");Y((()=>U({ids:J.value})))},q=()=>{var e;null==(e=G.value)||e.add()};return(n,s)=>{const r=o("icon-search"),d=o("a-input"),k=o("a-tree"),j=o("a-col"),S=o("icon-plus"),b=o("a-button"),C=o("icon-delete"),D=o("a-space"),O=o("a-select"),E=o("a-input-group"),F=o("icon-refresh"),P=o("a-row"),Q=o("a-table-column"),X=o("a-link"),ee=l,ae=a,le=e,te=o("a-tag"),ie=o("icon-edit"),ne=o("a-popconfirm"),se=o("a-table"),re=o("a-card");return u(),c("div",V,[p(re,{title:"用户管理"},{default:m((()=>[p(P,{gutter:16},{default:m((()=>[p(j,{xs:0,md:6,lg:6,xl:6,xxl:4},{default:m((()=>[p(d,{modelValue:_(M),"onUpdate:modelValue":s[0]||(s[0]=e=>f(M)?M.value=e:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:m((()=>[p(r)])),_:1},8,["modelValue"]),p(k,{ref_key:"treeRef",ref:R,"block-node":"","show-line":"","default-expand-all":"",data:_(B),"field-names":{key:"id",title:"name",children:"children"},onSelect:_(N)},null,8,["data","onSelect"])])),_:1}),p(j,{xs:24,md:18,lg:18,xl:18,xxl:20},{default:m((()=>[p(P,{justify:"space-between"},{default:m((()=>[p(D,{wrap:""},{default:m((()=>[p(b,{type:"primary",onClick:q},{icon:m((()=>[p(S)])),default:m((()=>[s[3]||(s[3]=g("span",null,"新增",-1))])),_:1}),p(b,{type:"primary",status:"danger",onClick:$},{icon:m((()=>[p(C)])),default:m((()=>[s[4]||(s[4]=g("span",null,"删除",-1))])),_:1})])),_:1}),p(D,{wrap:""},{default:m((()=>[p(E,null,{default:m((()=>[p(O,{modelValue:_(K).status,"onUpdate:modelValue":s[1]||(s[1]=e=>_(K).status=e),options:_(A),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),p(d,{modelValue:_(K).username,"onUpdate:modelValue":s[2]||(s[2]=e=>_(K).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])])),_:1}),p(b,{type:"primary",onClick:_(N)},{icon:m((()=>[p(r)])),default:m((()=>[s[5]||(s[5]=g("span",null,"查询",-1))])),_:1},8,["onClick"]),p(b,{onClick:Z},{icon:m((()=>[p(F)])),default:m((()=>[s[6]||(s[6]=g("span",null,"重置",-1))])),_:1})])),_:1})])),_:1}),p(se,{"row-key":"id",loading:_(L),data:_(H),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:_(I),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":_(J),onSelect:_(T),onSelectAll:_(W)},{columns:m((()=>[p(Q,{title:"序号",width:64},{cell:m((e=>[y(v(e.rowIndex+1),1)])),_:1}),p(Q,{title:"用户名","data-index":"username",width:120},{cell:m((({record:e})=>[p(X,{onClick:a=>{return l=e,void(null==(t=z.value)||t.open(l.id));var l,t}},{default:m((()=>[y(v(e.username),1)])),_:2},1032,["onClick"])])),_:1}),p(Q,{title:"昵称","data-index":"nickname",width:150},{cell:m((({record:e})=>[p(ee,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),p(Q,{title:"状态",width:100,align:"center"},{cell:m((({record:e})=>[p(ae,{status:e.status},null,8,["status"])])),_:1}),p(Q,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:m((({record:e})=>[p(le,{gender:e.gender},null,8,["gender"])])),_:1}),p(Q,{title:"联系方式","data-index":"phone",width:180}),p(Q,{title:"部门","data-index":"deptName",width:180}),p(Q,{title:"类型",width:100,align:"center"},{cell:m((({record:e})=>[1===e.type?(u(),x(te,{key:0,color:"red",size:"small"},{default:m((()=>s[7]||(s[7]=[y("系统内置")]))),_:1})):w("",!0),2===e.type?(u(),x(te,{key:1,color:"orange",size:"small"},{default:m((()=>s[8]||(s[8]=[y("自定义")]))),_:1})):w("",!0)])),_:1}),p(Q,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),p(Q,{title:"创建时间","data-index":"createTime",width:200}),p(Q,{title:"操作",width:180,align:"center",fixed:_(h)()?void 0:"right"},{cell:m((({record:e})=>[p(D,null,{default:m((()=>[p(b,{type:"primary",size:"mini",onClick:a=>{return l=e,void(null==(t=G.value)||t.edit(l.id));var l,t}},{icon:m((()=>[p(ie)])),default:m((()=>[s[9]||(s[9]=g("span",null,"编辑",-1))])),_:2},1032,["onClick"]),p(ne,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:a=>{return l=e,Y((()=>U({ids:[l.id]})),{showModal:!1});var l}},{default:m((()=>[p(b,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:m((()=>[p(C)])),default:m((()=>[s[10]||(s[10]=g("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])])),_:1})])),_:1})])),_:1}),p(t,{ref_key:"AddUserModalRef",ref:G,onSaveSuccess:_(N)},null,8,["onSaveSuccess"]),p(i,{ref_key:"UserDetailDrawerRef",ref:z},null,512)])}}});export{A as default};
