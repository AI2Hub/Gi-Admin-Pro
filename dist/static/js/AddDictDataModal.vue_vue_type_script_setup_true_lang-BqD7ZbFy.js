import{d as e,b as a,k as l,e as s,o as t,c as u,w as d,h as o,g as i,J as m,fa as r,V as n}from"./index-4GaN-tSn.js";import{s as c}from"./index-DRGqJhtj.js";import{u as v}from"./useForm-B9T1w1Xl.js";const f=e({__name:"AddDictDataModal",emits:["save-success"],setup(e,{expose:f,emit:p}){const h=p,_=a(),b=a(""),w=l((()=>!!b.value)),x=l((()=>w.value?"编辑字典数据":"新增字典数据")),V=a(!1),g=a(!1),{form:k,resetForm:y}=v({name:"",value:"",status:1}),j={name:[{required:!0,message:"请输入字典名"}],value:[{required:!0,message:"请输入字典值"},{match:/^[a-zA-Z0-9_]*$/,message:"格式不对！只能包含英文数字下划线"}],status:[{required:!0}]},U=()=>{var e;null==(e=_.value)||e.resetFields(),y()};f({add:()=>{b.value="",V.value=!0},edit:async e=>{V.value=!0,b.value=e.id,g.value=!0;const a=await r(e);Object.assign(k,a.data),g.value=!1}});const q=async()=>{var e;try{if(await(null==(e=_.value)?void 0:e.validate()))return!1;return!!(await c(k)).data&&(n.success("模拟保存成功"),h("save-success"),!0)}catch(a){return!1}};return(e,a)=>{const l=s("a-input"),r=s("a-form-item"),n=s("a-switch"),c=s("a-form"),v=s("a-spin"),f=s("a-modal");return t(),u(f,{visible:i(V),"onUpdate:visible":a[3]||(a[3]=e=>m(V)?V.value=e:null),title:i(x),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:q,onClose:U},{default:d((()=>[o(v,{loading:i(g),class:"w-full"},{default:d((()=>[o(c,{ref_key:"formRef",ref:_,model:i(k),rules:j,size:"medium","auto-label-width":""},{default:d((()=>[o(r,{label:"字典名",field:"name"},{default:d((()=>[o(l,{modelValue:i(k).name,"onUpdate:modelValue":a[0]||(a[0]=e=>i(k).name=e),modelModifiers:{trim:!0},placeholder:"请输入字典名","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),o(r,{label:"字典值",field:"value"},{default:d((()=>[o(l,{modelValue:i(k).value,"onUpdate:modelValue":a[1]||(a[1]=e=>i(k).value=e),modelModifiers:{trim:!0},placeholder:"请输入字典值","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),o(r,{label:"状态",field:"status"},{default:d((()=>[o(n,{modelValue:i(k).status,"onUpdate:modelValue":a[2]||(a[2]=e=>i(k).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["loading"])])),_:1},8,["visible","title"])}}});export{f as _};
