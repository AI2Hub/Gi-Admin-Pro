import{v as Ve,T as xe,c as Se}from"./runtime-dom.esm-bundler-a7552804.js";import{u as fe}from"./vue-router-dc831d57.js";import"./index-03184213.js";import{u as ve}from"./usePagination-a4b5d99b.js";import"./index-e68bf0d9.js";import{o as De,d as Me}from"./index-0813be0b.js";import{h as g,O as Ne,K as Z,f as O,E as be,o as _,c as C,w as t,a0 as Re,b as T,R as Ae,u as A,T as Oe,_ as L,G as se,d as U,L as J,r as n,a as e,U as k,i as X,S as Pe,F as j,a1 as Q,t as W,p as Ce,e as $e,a8 as ge,ae as Ee,g as Ue}from"./_plugin-vue_export-helper-a686c450.js";import{G as Be,a as ce}from"./GiOptionItem-a8bf6cdd.js";import{A as Ge}from"./arco-vue-608fec34.js";import{A as We}from"./arco-vue-icon-056882c6.js";import{r as He}from"./utils-b0df3aa8.js";import{M as he}from"./index-057adbeb.js";import{O as je,P as qe}from"./regexp-52ced781.js";import{R as q}from"./index-6b182eb3.js";import{g as ye}from"./index-7123684c.js";import{_ as ke}from"./GiSvgIcon-e4306b09.js";import"./index-5cc10064.js";import"./auth-56bca224.js";import"./dayjs.min-9fe9ade1.js";const Le="/mock";function ze(){return He.get(`${Le}/cate/tree`)}function Fe(d,f,l={alignPoint:!1}){const u=g(!1),i=g(0),r=g(0),s=p=>{u.value=p},h=()=>{const p={};return d.clientX>window.innerWidth-r.value?p.right=l.alignPoint?window.innerWidth-d.clientX-i.value/2+"px":window.innerWidth-d.clientX+"px":p.left=l.alignPoint?d.clientX+i.value/2+"px":d.clientX+"px",d.clientY>window.innerHeight-r.value?(p.bottom=window.innerHeight-d.clientY+"px",p["transform-origin"]="center bottom"):(p.top=d.clientY+2+"px",p["transform-origin"]="center top"),p["z-index"]=999,p};return Ne(()=>{u.value=!0,Z(()=>{f&&(r.value=f==null?void 0:f.offsetHeight,i.value=f==null?void 0:f.offsetWidth,h())})}),{visible:u,setVisible:s,getStyle:h}}function Ke(d,f="新建分类"){let l=0;for(let u=0;u<d.length+1;u++)if(!d.includes(`${f}${u+1}`)){l=u+1;break}return`${f}${l}`}const Xe=O({name:"GiContextMenu"}),Ye=O({...Xe,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(d,{expose:f,emit:l}){const u=d,i=g(null),{visible:r,setVisible:s,getStyle:h}=Fe(u.event,i,u.options);De(i,()=>{s(!1),l("close")},{capture:!1,ignore:u.ignoreRefs});const{width:p,height:z}=Me();return be(()=>[p.value,z.value],()=>{s(!1),l("close")}),f({visible:r,onHidden:()=>{s(!1),l("close")}}),(b,D)=>(_(),C(xe,{name:"slide-dynamic-origin"},{default:t(()=>[Re(T("div",{class:"gi-context-menu",ref_key:"elRef",ref:i,style:Ae(A(h)())},[Oe(b.$slots,"default",{},void 0,!0)],4),[[Ve,A(r)]])]),_:3}))}});const Je=L(Ye,[["__scopeId","data-v-4ada3c17"]]),Ze={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},Qe=O({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(d,{emit:f}){const l=d,u=g(null),i=se({callback:{onClick:(s,h,p)=>{r(s,h,p)}}});be(l.treeData,()=>{Z(()=>{var s;u.value=$.fn.zTree.init($("#movetree"),i,l.treeData),(s=u.value)==null||s.expandAll(!0)})},{deep:!0,immediate:!0});function r(s,h,p){f("node-click",p)}return(s,h)=>(_(),U("ul",Ze,null,512))}}),et=O({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(d,{expose:f}){const l=d,u=g(null),i=g(null),r=g([i]),s=g(!1),h=J(()=>l.fileInfo.id!==""),p=J(()=>l.fileInfo.id!=="root"),z=J(()=>l.fileInfo.id!=="root"),I=J(()=>l.fileInfo.id!=="root"),b=()=>{s.value=!1,l.onClose()},D=x=>{if(x==="move")return s.value=!s.value,!1;Z(()=>{var y;l.onClick(x),(y=u.value)==null||y.onHidden()})},V=()=>{var x;(x=u.value)==null||x.onHidden()};return f({menuRef:u,showMoveTreePopup:s,onClose:b,onClickItem:D}),(x,y)=>{const S=n("a-popover");return _(),C(Je,{ref_key:"menuRef",ref:u,event:d.event,ignoreRefs:r.value,onClose:b},{default:t(()=>[e(Be,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[A(h)?(_(),C(ce,{key:0,icon:"IconPlusCircle",onClick:y[0]||(y[0]=a=>D("add"))},{default:t(()=>[k("新增")]),_:1})):X("",!0),A(p)?(_(),C(ce,{key:1,icon:"IconEdit",onClick:y[1]||(y[1]=a=>D("rename"))},{default:t(()=>[k("重命名")]),_:1})):X("",!0),e(S,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":s.value},{content:t(()=>[T("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:i},[e(Qe,{"tree-data":d.treeData,onNodeClick:V},null,8,["tree-data"])],512)]),default:t(()=>[A(z)?(_(),C(ce,{key:0,more:"",icon:"IconExport",active:s.value,onClick:y[2]||(y[2]=a=>D("move"))},{default:t(()=>[k(" 移动 ")]),_:1},8,["active"])):X("",!0)]),_:1},8,["popup-visible"]),A(I)?(_(),C(ce,{key:2,icon:"IconDelete",onClick:y[3]||(y[3]=a=>D("delete"))},{default:t(()=>[k("删除")]),_:1})):X("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const tt=L(et,[["__scopeId","data-v-991fe312"]]);let K=null,Y=null;function nt(d,f,l){return new Promise(u=>{i(),Y=document.createElement("div"),document.body.appendChild(Y),K=Se(tt,{event:d,fileInfo:f,treeData:l,onClick:r=>{u({mode:r,fileInfo:f}),setTimeout(()=>{i()},360)},onClose:()=>{setTimeout(()=>{i()},360)}}),K.use(Ge),K.use(We),K.mount(Y);function i(){K!==null&&(K.unmount(),K=null),Y!==null&&(document.body.removeChild(Y),Y=null)}})}const me="/gi-demo/assets/com-file-open-a82dbda1.svg",ae="/gi-demo/assets/com-file-close-e0ebbcc4.svg",ot="/gi-demo/assets/com-file-9070581a.svg",at={class:"cate-tree"},lt={class:"search-wrap"},st={class:"wrap"},ct=O({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"请输入关键词"}},emits:["node-click"],setup(d,{emit:f}){const l=g(!1),u=g(""),i=g(null),r=g([]),s=g(null),h=g(null),p=(a,v,c)=>{console.log("点击节点",c),h.value=c,f("node-click")},z=se({callback:{onRightClick:(a,v,c)=>{console.log("鼠标右键",c),c&&(h.value=c,nt(a,c,r.value).then(o=>{console.log("res",o),o.mode==="add"&&D(),o.mode==="rename"&&V(),o.mode==="delete"&&x()}))},onClick:(a,v,c)=>{p(a,v,c)}}}),I=a=>{if(!a.length)return;function v(c){c.forEach(o=>{o.children&&o.children.length?(o.iconOpen=me,o.iconClose=ae,v(o.children)):(o.children=null,o.iconOpen=me,o.iconClose=ae,o.icon=ae,o.type==null&&(o.icon=ot))})}v(a)};(async()=>{try{l.value=!0;const a=await ze();if(a.success){const v=a.data;I(v),r.value=v,Z(()=>{var c;s.value=$.fn.zTree.init($("#treeDemo"),z,r.value),(c=s.value)==null||c.expandAll(!0)})}}catch(a){return a}finally{l.value=!1}})();const D=()=>{var B,N,R;const a=((B=h.value)==null?void 0:B.children)||[];let v="新建分类1";if(a&&a.length){const M=a.map(P=>P.name);v=Ke(M,"新建分类")}const c=new Date().getTime().toString(),o={id:c,name:v,children:null,iconOpen:me,iconClose:ae,icon:ae,isParent:!1};(N=s.value)==null||N.addNodes(h.value||{},o,!0);const w=(R=s.value)==null?void 0:R.getNodesByParam("id",c);setTimeout(()=>{var M;(M=s.value)==null||M.editName(w[0])},100)},V=()=>{Z(()=>{var v,c,o;const a=(c=s.value)==null?void 0:c.getNodesByParam("id",(v=h.value)==null?void 0:v.id);(o=s.value)==null||o.editName(a[0])})},x=()=>{he.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})},y=(a,v)=>{let c=!1;if(a.name.indexOf(v)>-1&&(c=!0),a.children){const o=a.children;for(let w=0;w<o.length;w++){const B=o[w];y(B,v)?c=!0:o.splice(w--,1)}}return c},S=()=>{var v,c;let a=u.value;if(!a)s.value=$.fn.zTree.init($("#treeDemo"),z,r.value),(v=s.value)==null||v.expandAll(!0);else{const o=JSON.parse(JSON.stringify(r.value));for(let w=0;w<o.length;w++)y(o[w],a)||o.splice(w--,1);s.value=$.fn.zTree.init($("#treeDemo"),z,o),(c=s.value)==null||c.expandAll(!0)}};return(a,v)=>{const c=n("icon-search"),o=n("a-input");return _(),U("div",at,[T("div",lt,[e(o,{"allow-clear":"",maxlength:20,placeholder:d.placeholder,modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=w=>u.value=w),onInput:S,onClear:S},{prefix:t(()=>[e(c)]),_:1},8,["placeholder","modelValue"])]),T("div",st,[T("ul",{id:"treeDemo",ref_key:"treeRef",ref:i,class:"ztree cate-ztree"},null,512)])])}}});const it=L(ct,[["__scopeId","data-v-8753ead7"]]),we=d=>(Ce("data-v-fb90ac75"),d=d(),$e(),d),rt=we(()=>T("div",null,"仅支持中文姓名",-1)),ut=we(()=>T("span",null,"权限配置",-1)),dt=we(()=>T("span",null,"自定义管理员、编辑者的权限， 点击",-1)),_t=O({__name:"EditModal",setup(d,{expose:f}){const l=se({name:"",phone:"",status:!1}),u={name:[{required:!0,message:"请输入姓名"},{match:je,message:"只能是中文姓名"},{minLength:1,maxLength:4,message:"名字最长不超过4个字符"}],phone:[{match:qe,message:"手机号格式不正确"}],status:[{required:!0}]},i=[{name:"新增"},{name:"编辑"},{name:"重命名"},{name:"分享"},{name:"删除"}],r=g(!1),s=g(""),h=J(()=>!!s.value),p=J(()=>h.value?"编辑":"新增"),z=g(),I=async()=>{var x;return await((x=z.value)==null?void 0:x.validate())?!1:(await new Promise(y=>setTimeout(y,1500)),q.success(h.value?"编辑成功":"新增成功"),!0)};return f({add:()=>{s.value="",r.value=!0},edit:V=>{s.value=V,r.value=!0}}),(V,x)=>{const y=n("a-input"),S=n("a-form-item"),a=n("a-radio"),v=n("a-radio-group"),c=n("a-form"),o=n("a-row"),w=n("icon-question-circle-fill"),B=n("a-link"),N=n("a-tooltip"),R=n("a-space"),M=n("icon-right"),P=n("a-checkbox"),F=n("a-checkbox-group"),ee=n("a-collapse-item"),te=n("a-collapse"),ne=n("a-modal");return _(),C(ne,{visible:r.value,"onUpdate:visible":x[3]||(x[3]=E=>r.value=E),title:A(p),"on-before-ok":I},{default:t(()=>[e(o,{justify:"center"},{default:t(()=>[e(c,{ref_key:"formRef",ref:z,model:l,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(S,{field:"name",label:"姓名",rules:u.name},{extra:t(()=>[rt]),default:t(()=>[e(y,{modelValue:l.name,"onUpdate:modelValue":x[0]||(x[0]=E=>l.name=E),placeholder:"请输入姓名",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(S,{field:"phone",label:"手机号"},{default:t(()=>[e(y,{modelValue:l.phone,"onUpdate:modelValue":x[1]||(x[1]=E=>l.phone=E),placeholder:"请输入手机号",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(S,{field:"status",label:"状态",rules:u.status},{default:t(()=>[e(v,{modelValue:l.status,"onUpdate:modelValue":x[2]||(x[2]=E=>l.status=E)},{default:t(()=>[e(a,{value:!1},{default:t(()=>[k("关闭")]),_:1}),e(a,{value:!0},{default:t(()=>[k("开启")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(te,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(ee,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(R,null,{default:t(()=>[ut,e(N,{position:"right","content-style":{width:"200px"}},{content:t(()=>[dt,e(B,{type:"primary",hoverable:!1},{default:t(()=>[k("了解更多权限")]),_:1})]),default:t(()=>[e(w,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:E})=>[e(M,{class:Pe({gi_rotate_90deg:E})},null,8,["class"])]),default:t(()=>[(_(),U(j,null,Q(i,(E,oe)=>e(o,{justify:"space-between",key:oe},{default:t(()=>[T("span",null,W(E.name),1),e(F,null,{default:t(()=>[e(P,{value:"1"},{default:t(()=>[k("管理员")]),_:1}),e(P,{value:"2"},{default:t(()=>[k("编辑者")]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Ie=L(_t,[["__scopeId","data-v-fb90ac75"]]),le=[{name:"禁用",value:0,color:"red"},{name:"启用",value:1,color:"green"}],pt={class:"data-pane"},mt={class:"content"},ft={class:"table-box"},vt=O({name:"DataManage"}),gt=O({...vt,setup(d){const f=fe(),l=[{title:"序号",width:68,slotName:"index"},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",slotName:"proportion",width:200},{title:"状态",slotName:"status",width:100,align:"center"},{title:"操作",slotName:"operation",width:200,align:"center",fixed:"right"}],{pagination:u,setTotal:i}=ve(()=>I()),r=se({name:"",status:""}),s=g([]),h=g(!1),p=g(),z=o=>o<30?"danger":o<60?"warning":"success",I=async()=>{h.value=!0;const o=await ye({current:u.current,pageSize:u.pageSize,...r});o.success&&(s.value=o.data.list,i(o.data.total)),h.value=!1};ge(()=>{I()});const b=()=>{he.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{s.value=[]}})},D=()=>{var o;(o=p.value)==null||o.add()},V=o=>{var w;(w=p.value)==null||w.edit(o.id)},x=()=>{f.push({path:"/data/detail"})},y=o=>{q.success("删除成功"),I()},S=()=>{if(!a.value.length)return q.warning("请勾选数据");q.success("点击了导出")},a=g([]),v=o=>{a.value=o},c=o=>{a.value=o?s.value.map(w=>w.id):[]};return(o,w)=>{const B=n("a-card"),N=n("icon-plus"),R=n("a-button"),M=n("icon-delete"),P=n("icon-export"),F=n("a-space"),ee=n("a-option"),te=n("a-select"),ne=n("a-input"),E=n("icon-search"),oe=n("a-input-group"),re=n("icon-refresh"),H=n("a-row"),ue=n("a-progress"),de=n("a-tag"),_e=n("a-popconfirm"),pe=n("a-table");return _(),U("div",pt,[e(B,{title:"数据分类(ZTree)",bordered:!1,class:"gi_card pane-left"},{default:t(()=>[e(it,{placeholder:"请输入搜索关键词",onNodeClick:w[0]||(w[0]=m=>A(u).onChange(1))})]),_:1}),e(B,{title:"数据列表",bordered:!1,class:"gi_card pane-right"},{default:t(()=>[T("div",mt,[e(H,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(F,null,{default:t(()=>[e(R,{type:"primary",onClick:D},{icon:t(()=>[e(N)]),default:t(()=>[k("新增")]),_:1}),e(R,{type:"primary",status:"danger",onClick:b},{icon:t(()=>[e(M)]),default:t(()=>[k("删除")]),_:1}),e(R,{type:"primary",status:"success",onClick:S},{icon:t(()=>[e(P)]),default:t(()=>[k("导出")]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(te,{modelValue:r.status,"onUpdate:modelValue":w[1]||(w[1]=m=>r.status=m),placeholder:"请选择","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(_(!0),U(j,null,Q(A(le),m=>(_(),C(ee,{key:m.value,value:m.value},{default:t(()=>[k(W(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(oe,null,{default:t(()=>[e(ne,{modelValue:r.name,"onUpdate:modelValue":w[2]||(w[2]=m=>r.name=m),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(R,{type:"primary",onClick:I},{default:t(()=>[e(E)]),_:1})]),_:1}),e(R,{type:"primary",onClick:I},{icon:t(()=>[e(re)]),_:1})]),_:1})]),_:1}),T("section",ft,[e(pe,{"row-key":"id",size:"small",loading:h.value,bordered:{cell:!0},columns:l,data:s.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:A(u),onSelect:v,onSelectAll:c},{index:t(({rowIndex:m})=>[k(W(m+1),1)]),proportion:t(({record:m})=>[e(ue,{status:z(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),status:t(({record:m})=>[(_(!0),U(j,null,Q(A(le),G=>(_(),U(j,{key:G.value},[G.value===m.status?(_(),C(de,{key:0,size:"small",color:G.color},{default:t(()=>[k(W(G.name),1)]),_:2},1032,["color"])):X("",!0)],64))),128))]),operation:t(({record:m})=>[e(F,null,{default:t(()=>[e(R,{type:"primary",size:"mini",onClick:G=>V(m)},{default:t(()=>[k("修改")]),_:2},1032,["onClick"]),e(R,{size:"mini",onClick:x},{default:t(()=>[k("详情")]),_:1}),e(_e,{type:"warning",content:"您确定要删除该项吗?",onOk:G=>y(m.id)},{default:t(()=>[e(R,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[k("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["loading","data","pagination"])])])]),_:1}),e(Ie,{ref_key:"EditModalRef",ref:p},null,512)])}}}),ht=O({name:"TreeSwitcherIcon"}),Te=O({...ht,props:{expanded:{type:Boolean},hasChildren:{type:Boolean}},setup(d){return(f,l)=>{const u=ke,i=n("icon-drive-file");return d.hasChildren&&d.expanded?(_(),C(u,{key:0,class:"switcher-icon",name:"plus-square",size:16})):d.hasChildren&&!d.expanded?(_(),C(u,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(_(),C(i,{key:2,size:16}))}}}),ie=d=>(Ce("data-v-e6d4a6b6"),d=d(),$e(),d),yt=ie(()=>T("span",null,"新增",-1)),kt=ie(()=>T("span",null,"编辑",-1)),wt=ie(()=>T("span",null,"移动",-1)),xt=ie(()=>T("span",null,"删除",-1)),bt=O({__name:"RightMenu",props:{treeData:null},emits:["click"],setup(d,{emit:f}){const l=u=>{f("click",u)};return(u,i)=>{const r=n("icon-plus-circle"),s=n("a-menu-item"),h=n("icon-edit"),p=n("icon-export"),z=n("icon-right"),I=n("a-space"),b=ke,D=n("a-tree"),V=n("a-scrollbar"),x=n("a-popover"),y=n("icon-delete"),S=n("a-menu");return _(),C(S,{class:"menu"},{default:t(()=>[e(s,{onClick:i[0]||(i[0]=a=>l("add"))},{icon:t(()=>[e(r,{size:16,"stroke-width":3})]),default:t(()=>[yt]),_:1}),e(s,{onClick:i[1]||(i[1]=a=>l("edit"))},{icon:t(()=>[e(h,{size:16,"stroke-width":3})]),default:t(()=>[kt]),_:1}),e(x,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(V,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(D,{ref:"treeMoveRef","show-line":"",size:"mini",data:d.treeData[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((a,{checked:v,selected:c,expanded:o})=>[e(Te,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(_(),C(b,{key:1,name:"com-file-open",size:16})):(_(),C(b,{key:2,name:"com-file",size:16})):(_(),C(b,{key:0,name:"com-file-close",size:16}))]),_:1},8,["data"])]),_:1})]),default:t(()=>[e(s,{onClick:i[2]||(i[2]=a=>l("move"))},{icon:t(()=>[e(p,{size:16,"stroke-width":3})]),default:t(()=>[e(I,{size:18},{default:t(()=>[wt,e(z)]),_:1})]),_:1})]),_:1}),e(s,{onClick:i[3]||(i[3]=a=>l("delete"))},{icon:t(()=>[e(y,{size:16,"stroke-width":3})]),default:t(()=>[xt]),_:1})]),_:1})}}});const Ct=L(bt,[["__scopeId","data-v-e6d4a6b6"]]),$t={class:"cate-tree"},zt={class:"search-wrap"},It={class:"wrap"},Tt=O({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"请输入关键词"}},emits:["node-click"],setup(d,{emit:f}){const l=g(!1),u=g(),i=g(""),r=g([]),s=()=>{f("node-click")};(async()=>{try{l.value=!0;const z=await ze();z.success&&(r.value=z.data,Z(()=>{u.value.expandAll()}))}catch(z){return z}finally{l.value=!1}})();const p=z=>{z!=="move"&&q.info(z)};return(z,I)=>{const b=n("icon-search"),D=n("a-input"),V=ke,x=n("a-trigger"),y=n("a-tree"),S=n("a-scrollbar");return _(),U("div",$t,[T("div",zt,[e(D,{"allow-clear":"",maxlength:20,placeholder:d.placeholder,modelValue:i.value,"onUpdate:modelValue":I[0]||(I[0]=a=>i.value=a)},{prefix:t(()=>[e(b)]),_:1},8,["placeholder","modelValue"])]),T("div",It,[e(S,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(y,{ref_key:"treeRef",ref:u,"show-line":"",size:"mini",data:r.value,fieldNames:{key:"id"},onSelect:s},{"switcher-icon":t((a,{checked:v,selected:c,expanded:o})=>[e(Te,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(_(),C(V,{key:1,name:"com-file-open",size:16})):(_(),C(V,{key:2,name:"com-file",size:16})):(_(),C(V,{key:0,name:"com-file-close",size:16}))]),title:t(a=>[e(x,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(Ct,{"tree-data":r.value,onClick:p},null,8,["tree-data"])]),default:t(()=>[T("div",null,W(a.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Vt=L(Tt,[["__scopeId","data-v-124f0962"]]),St={class:"data-pane"},Dt={class:"content"},Mt={class:"table-box"},Nt=O({name:"DataManage"}),Rt=O({...Nt,setup(d){const f=fe(),{pagination:l,setTotal:u}=ve(()=>p()),i=se({name:"",status:""}),r=g([]),s=g(!1),h=c=>c<30?"danger":c<60?"warning":"success",p=async()=>{try{s.value=!0;const c=await ye({...i,current:l.current,pageSize:l.pageSize});r.value=c.data.list,u(c.data.total)}catch(c){return c}finally{s.value=!1}};ge(()=>{p()});const z=()=>{he.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{r.value=[]}})},I=g(),b=()=>{var c;(c=I.value)==null||c.add()},D=c=>{var o;(o=I.value)==null||o.edit(c.id)},V=()=>{f.push({path:"/data/detail"})},x=c=>{q.success("删除成功"),p()},y=()=>{if(!S.value.length)return q.warning("请勾选数据");q.success("点击了导出")},S=g([]),a=c=>{S.value=c},v=c=>{S.value=c?r.value.map(o=>o.id):[]};return(c,o)=>{const w=n("a-card"),B=n("icon-plus"),N=n("a-button"),R=n("icon-delete"),M=n("icon-export"),P=n("a-space"),F=n("a-option"),ee=n("a-select"),te=n("a-input"),ne=n("icon-search"),E=n("a-input-group"),oe=n("icon-refresh"),re=n("a-row"),H=n("a-table-column"),ue=n("a-progress"),de=n("a-tag"),_e=n("a-popconfirm"),pe=n("a-table");return _(),U("div",St,[e(w,{title:"数据分类",bordered:!1,class:"gi_card pane-left"},{default:t(()=>[e(Vt,{placeholder:"请输入搜索关键词",onNodeClick:o[0]||(o[0]=m=>A(l).onChange(1))})]),_:1}),e(w,{title:"数据列表",bordered:!1,class:"gi_card pane-right"},{default:t(()=>[T("div",Dt,[e(re,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(P,null,{default:t(()=>[e(N,{type:"primary",onClick:b},{icon:t(()=>[e(B)]),_:1}),e(N,{type:"primary",status:"danger",onClick:z},{icon:t(()=>[e(R)]),default:t(()=>[k("删除")]),_:1}),e(N,{type:"primary",status:"success",onClick:y},{icon:t(()=>[e(M)]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(ee,{modelValue:i.status,"onUpdate:modelValue":o[1]||(o[1]=m=>i.status=m),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:t(()=>[(_(!0),U(j,null,Q(A(le),m=>(_(),C(F,{key:m.value,value:m.value},{default:t(()=>[k(W(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(E,null,{default:t(()=>[e(te,{modelValue:i.name,"onUpdate:modelValue":o[2]||(o[2]=m=>i.name=m),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(N,{type:"primary",onClick:p},{default:t(()=>[e(ne)]),_:1})]),_:1}),e(N,{type:"primary",onClick:p},{icon:t(()=>[e(oe)]),_:1})]),_:1})]),_:1}),T("section",Mt,[e(pe,{"row-key":"id",size:"small",loading:s.value,bordered:{cell:!0},data:r.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:A(l),onSelect:a,onSelectAll:v},{columns:t(()=>[e(H,{title:"序号",width:68},{cell:t(m=>[k(W(m.rowIndex+1),1)]),_:1}),e(H,{title:"姓名","data-index":"name"}),e(H,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),e(H,{title:"比例",width:200},{cell:t(({record:m})=>[e(ue,{status:h(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),_:1}),e(H,{title:"状态",width:100,align:"center"},{cell:t(({record:m})=>[(_(!0),U(j,null,Q(A(le),G=>(_(),U(j,{key:G.value},[G.value===m.status?(_(),C(de,{key:0,size:"small",color:G.color},{default:t(()=>[k(W(G.name),1)]),_:2},1032,["color"])):X("",!0)],64))),128))]),_:1}),e(H,{title:"创建时间","data-index":"createTime",width:180}),e(H,{title:"操作",width:200,align:"center",fixed:"right"},{cell:t(({record:m})=>[e(P,null,{default:t(()=>[e(N,{type:"primary",size:"mini",onClick:G=>D(m)},{default:t(()=>[k("修改")]),_:2},1032,["onClick"]),e(N,{size:"mini",onClick:V},{default:t(()=>[k("详情")]),_:1}),e(_e,{type:"warning",content:"您确定要删除该项吗?",onOk:G=>x(m.id)},{default:t(()=>[e(N,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[k("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination"])])])]),_:1}),e(Ie,{ref_key:"EditModalRef",ref:I},null,512)])}}}),At={class:"content"},Ot={class:"table-box"},Pt=O({__name:"Pane3",setup(d){fe();const f=[{title:"序号",width:68,slotName:"index"},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",slotName:"proportion",width:68,align:"center"},{title:"状态",slotName:"status",width:100,align:"center"},{title:"操作",slotName:"operation",width:200,align:"center"}],{pagination:l,setTotal:u}=ve(()=>s()),i=g([]),r=g(!1),s=async()=>{r.value=!0;const b=await ye({current:l.current,pageSize:l.pageSize});b.success&&(i.value=b.data.list,u(b.data.total)),r.value=!1};ge(()=>{s()});const h=b=>b<30?"danger":b<60?"warning":"success",p=g([]),z=b=>{p.value=b},I=b=>{p.value=b?i.value.map(D=>D.id):[]};return(b,D)=>{const V=n("a-breadcrumb-item"),x=n("a-breadcrumb"),y=n("a-button"),S=n("a-space"),a=n("a-row"),v=n("a-progress"),c=n("a-tag"),o=n("icon-edit"),w=n("icon-delete"),B=n("a-popconfirm"),N=n("a-table"),R=n("a-card");return _(),C(R,{bordered:!1,class:"gi_card pane3"},{default:t(()=>[e(a,{justify:"space-between",align:"center",class:"head"},{default:t(()=>[e(x,null,{default:t(()=>[e(V,null,{default:t(()=>[k("首页")]),_:1}),e(V,null,{default:t(()=>[k("数据管理")]),_:1}),e(V,null,{default:t(()=>[k("单位管理")]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(y,null,{default:t(()=>[k("重置")]),_:1}),e(y,{type:"primary"},{default:t(()=>[k("提交")]),_:1})]),_:1})]),_:1}),T("section",At,[T("section",Ot,[e(N,{"row-key":"id",size:"small",loading:r.value,bordered:{cell:!0},columns:f,data:i.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:A(l),onSelect:z,onSelectAll:I},{index:t(({rowIndex:M})=>[k(W(M+1),1)]),proportion:t(({record:M})=>[e(v,{size:"mini",status:h(M.proportion),percent:M.proportion/100},null,8,["status","percent"])]),status:t(({record:M})=>[(_(!0),U(j,null,Q(A(le),P=>(_(),U(j,{key:P.value},[P.value===M.status?(_(),C(c,{key:0,size:"small",color:P.color},{default:t(()=>[k(W(P.name),1)]),_:2},1032,["color"])):X("",!0)],64))),128))]),operation:t(({record:M})=>[e(S,null,{default:t(()=>[e(y,{type:"primary",size:"mini"},{default:t(()=>[e(o)]),_:1}),e(y,{size:"mini"},{default:t(()=>[k("详情")]),_:1}),e(B,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(y,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[e(w)]),_:1})]),_:1})]),_:1})]),_:1},8,["loading","data","pagination"])])])]),_:1})}}});const Et=L(Pt,[["__scopeId","data-v-0d0e723c"]]),Ut={class:"manage"},Bt={class:"tab"},Gt=O({name:"DataManage"}),Wt=O({...Gt,setup(d){const f={1:gt,2:Rt,3:Et},l=g(2);return(u,i)=>{const r=n("a-tab-pane"),s=n("a-tabs");return _(),U("div",Ut,[T("section",Bt,[e(s,{"hide-content":"",size:"medium","active-key":l.value,"onUpdate:active-key":i[0]||(i[0]=h=>l.value=h)},{default:t(()=>[(_(),C(r,{key:1,title:"周期管理"})),(_(),C(r,{key:2,title:"维度管理"})),(_(),C(r,{key:3,title:"单位管理"}))]),_:1},8,["active-key"])]),e(xe,{name:"fade-slide",mode:"out-in",appear:""},{default:t(()=>[(_(),C(Ee,null,[(_(),C(Ue(f[l.value])))],1024))]),_:1})])}}});const rn=L(Wt,[["__scopeId","data-v-b7ca7469"]]);export{rn as default};
