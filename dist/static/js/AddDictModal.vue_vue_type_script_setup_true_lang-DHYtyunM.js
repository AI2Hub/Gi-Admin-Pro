import{b as e}from"./regexp-LyZ7ySAN.js";import{d as a,J as l,b as s,k as t,e as o,o as d,c as i,w as u,h as m,g as r,H as n,f6 as c,U as f}from"./index-D93jnfat.js";import{u as p}from"./useForm-BSIIh-Kv.js";import{s as v}from"./index-BTvBBSEY.js";const h=a({__name:"AddDictModal",emits:["save-success"],setup(a,{expose:h,emit:x}){const w=x,b=l("formRef"),V=s(""),_=t((()=>!!V.value)),g=t((()=>_.value?"编辑字典":"新增字典")),k=s(!1),{form:y,resetForm:U}=p({name:"",code:"",status:1,description:""}),j={name:[{required:!0,message:"请输入字典名称"}],code:[{required:!0,message:"请输入字典编码"},{match:e,message:"格式不对！只能是英文"}],status:[{required:!0}]},M=()=>{var e;null==(e=b.value)||e.resetFields(),U()};h({add:()=>{V.value="",k.value=!0},edit:async e=>{V.value=e,k.value=!0;const a=await c({id:e});Object.assign(y,a.data)}});const R=async()=>{var e;try{if(await(null==(e=b.value)?void 0:e.validate()))return!1;return!!(await v(y)).data&&(f.success("模拟保存成功"),w("save-success"),!0)}catch(a){return!1}};return(e,a)=>{const l=o("a-input"),s=o("a-form-item"),t=o("a-textarea"),c=o("a-switch"),f=o("a-form"),p=o("a-modal");return d(),i(p,{visible:r(k),"onUpdate:visible":a[4]||(a[4]=e=>n(k)?k.value=e:null),title:r(g),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:R,onClose:M},{default:u((()=>[m(f,{ref_key:"formRef",ref:b,model:r(y),rules:j,size:"medium","auto-label-width":""},{default:u((()=>[m(s,{label:"字典名称",field:"name"},{default:u((()=>[m(l,{modelValue:r(y).name,"onUpdate:modelValue":a[0]||(a[0]=e=>r(y).name=e),modelModifiers:{trim:!0},placeholder:"请输入字典名称","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),m(s,{label:"字典编码",field:"code"},{default:u((()=>[m(l,{modelValue:r(y).code,"onUpdate:modelValue":a[1]||(a[1]=e=>r(y).code=e),modelModifiers:{trim:!0},placeholder:"请输入字典编码","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),m(s,{label:"描述",field:"description"},{default:u((()=>[m(t,{modelValue:r(y).description,"onUpdate:modelValue":a[2]||(a[2]=e=>r(y).description=e),modelModifiers:{trim:!0},placeholder:"请填写描述","max-length":200,"show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])])),_:1}),m(s,{label:"状态",field:"status"},{default:u((()=>[m(c,{modelValue:r(y).status,"onUpdate:modelValue":a[3]||(a[3]=e=>r(y).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{h as _};
