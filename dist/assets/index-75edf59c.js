import{_ as R}from"./index-344aab06.js";import{d as w,h as k,k as S,j as B,a as n,o as i,c as _,w as t,b as e,u as T,i as x,g as U,U as N,l as g,t as M,e as q,f as $,_ as j}from"./index-ad0224cd.js";const G=w({__name:"EditMenuModal",setup(v,{expose:h}){const u=k(""),m=k(!1),I=S(()=>u.value?"编辑菜单":"新增菜单"),l=B({parentId:"",name:"",path:"",icon:"",keepAlive:!1,hidden:!1});return h({add:()=>{u.value="",m.value=!0},edit:async f=>{u.value=f,m.value=!0}}),(f,o)=>{const d=n("a-tree-select"),p=n("a-form-item"),y=n("a-input"),b=n("a-switch"),c=n("a-form"),V=n("a-modal");return i(),_(V,{visible:m.value,"onUpdate:visible":o[5]||(o[5]=s=>m.value=s),title:T(I)},{default:t(()=>[e(c,{ref:"formRef",model:l,size:"medium","auto-label-width":""},{default:t(()=>[e(p,{label:"上级菜单",parentId:"name"},{default:t(()=>[e(d,{modelValue:l.parentId,"onUpdate:modelValue":o[0]||(o[0]=s=>l.parentId=s),placeholder:"请选择","field-names":{key:"id",title:"name",children:"children"}},null,8,["modelValue"])]),_:1}),e(p,{label:"菜单名称",field:"name",rules:[{required:!0,message:"请输入菜单名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],"validate-trigger":["change","input"]},{default:t(()=>[e(y,{placeholder:"请输入菜单名称",modelValue:l.name,"onUpdate:modelValue":o[1]||(o[1]=s=>l.name=s)},null,8,["modelValue"])]),_:1}),e(p,{label:"菜单地址",field:"path",rules:[{required:!0,message:"请输入菜单地址"},{min:3,max:10,message:"长度在 3 - 30个字符"}],"validate-trigger":["change","input"]},{default:t(()=>[e(y,{placeholder:"请输入菜单地址",modelValue:l.path,"onUpdate:modelValue":o[2]||(o[2]=s=>l.path=s)},null,8,["modelValue"])]),_:1}),e(p,{label:"是否缓存",name:"keepAlive"},{default:t(()=>[e(b,{size:"medium",modelValue:l.keepAlive,"onUpdate:modelValue":o[3]||(o[3]=s=>l.keepAlive=s)},null,8,["modelValue"])]),_:1}),e(p,{label:"是否隐藏",name:"hidden"},{default:t(()=>[e(b,{size:"medium",modelValue:l.hidden,"onUpdate:modelValue":o[4]||(o[4]=s=>l.hidden=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),L=v=>(q("data-v-e5cfaad7"),v=v(),$(),v),W={class:"menu-manage"},F=L(()=>U("span",null,"新增菜单",-1)),H={class:"table-box"},J={key:0},K={key:1,class:"no-text"},O={key:1,class:"no-text"},P=w({name:"MenuManage"}),Q=w({...P,setup(v){const h=k(),u=k(!1),m=k([]);(()=>{u.value=!0,setTimeout(()=>{m.value=N,u.value=!1},300)})();const l=()=>{var r;(r=h.value)==null||r.add()},z=r=>{var f;(f=h.value)==null||f.edit(r.path)};return(r,f)=>{const o=n("icon-plus"),d=n("a-button"),p=n("a-row"),y=n("IconDown"),b=n("IconRight"),c=n("a-table-column"),V=R,s=n("icon-edit"),A=n("icon-delete"),C=n("a-popconfirm"),D=n("a-space"),E=n("a-table");return i(),x("div",W,[e(p,{class:"head"},{default:t(()=>[e(d,{type:"primary",onClick:l},{icon:t(()=>[e(o)]),default:t(()=>[F]),_:1})]),_:1}),U("section",H,[e(E,{data:m.value,"row-key":"name",loading:u.value,scroll:{x:"100%",y:"100%",minWidth:900},pagination:!1,expandable:{width:80}},{"expand-icon":t(({expanded:a})=>[a?(i(),_(y,{key:0})):(i(),_(b,{key:1}))]),columns:t(()=>[e(c,{title:"菜单名称"},{cell:t(({record:a})=>[g(M(a.name),1)]),_:1}),e(c,{title:"菜单地址","data-index":"path"},{cell:t(({record:a})=>[a.path?(i(),x("span",J,M(a.path),1)):(i(),x("span",K,"无"))]),_:1}),e(c,{title:"菜单图标","data-index":"icon",width:200},{cell:t(({record:a})=>[a.icon?(i(),_(V,{key:0,size:24,name:a.icon},null,8,["name"])):(i(),x("span",O,"无"))]),_:1}),e(c,{title:"是否缓存",width:200},{cell:t(({record:a})=>[a.keepAlive?(i(),_(d,{key:0,status:"success",size:"mini"},{icon:t(()=>[g("是")]),_:1})):(i(),_(d,{key:1,status:"danger",size:"mini"},{icon:t(()=>[g("否")]),_:1}))]),_:1}),e(c,{title:"是否隐藏","data-index":"hidden",width:200},{cell:t(({record:a})=>[a.hidden?(i(),_(d,{key:0,status:"success",size:"mini"},{icon:t(()=>[g("是")]),_:1})):(i(),_(d,{key:1,status:"danger",size:"mini"},{icon:t(()=>[g("否")]),_:1}))]),_:1}),e(c,{title:"操作",width:100},{cell:t(({record:a})=>[e(D,null,{default:t(()=>[e(d,{type:"primary",size:"mini",onClick:X=>z(a)},{icon:t(()=>[e(s)]),_:2},1032,["onClick"]),e(C,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(d,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(A)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","loading"])]),e(G,{ref_key:"EditMenuModalRef",ref:h},null,512)])}}});const ee=j(Q,[["__scopeId","data-v-e5cfaad7"]]);export{ee as default};
