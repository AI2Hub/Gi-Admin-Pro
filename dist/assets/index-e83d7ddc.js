import{N as pe,O as re,eG as k,eH as M,ev as x,d as _e,eE as me,J as fe,eB as he,eI as ye,g as w,z as ve,eJ as ge,r as t,o as d,c as q,a as e,w as n,f as b,F as Ce,b as we,u as i,e as v,G as be,t as A,E as G,X as S,Y as T,P as z,U as j,i as ke,p as Me,j as xe,h as P,_ as Fe}from"./index-d92c8974.js";import{f as Ie,i as J}from"./file-map-2a15779f.js";import{a as Le}from"./index.es-c168347f.js";/* empty css               */import Se from"./FileNavPath-979d17b9.js";import Te from"./FileGrid-cd622b53.js";import Be from"./FileList-1523f5fe.js";import{_ as Ne}from"./Dialog.vue_vue_type_script_setup_true_lang-c63f876a.js";import Ve from"./Dialog-95439cd1.js";import $e from"./Dialog-38cd8da7.js";import De from"./Dialog-5adede78.js";import"./FileImg-8be88151.js";import"./FileRightMenu-43ae5a14.js";function Ee(l){return pe.get(`${re}/file/list`,l)}let h=null,p=null;function Re(l){h!==null&&h.unmount(),p!==null&&document.body.removeChild(p),p=document.createElement("div"),document.body.appendChild(p),h=k(Ne,{fileInfo:l,onCancel:()=>{setTimeout(()=>{s(),h=null,p=null},500)}}).use(M).use(x);function s(){h!==null&&h.unmount(),p!==null&&document.body.removeChild(p)}h.mount(p)}let y=null,r=null;function qe(l){y!==null&&y.unmount(),r!==null&&document.body.removeChild(r),r=document.createElement("div"),document.body.appendChild(r),y=k(Ve,{fileInfo:l,onCancel:()=>{setTimeout(()=>{s(),y=null,r=null},500)}}).use(M).use(x);function s(){y!==null&&y.unmount(),r!==null&&document.body.removeChild(r)}y.mount(r)}function Ae(l){const s=document.createElement("div");document.body.appendChild(s);const u=k($e,{fileInfo:l,onClose:()=>{setTimeout(()=>{u.unmount(),document.body.removeChild(s)},350)}});u.use(M),u.use(x),u.mount(s)}function Ge(l){const s=document.createElement("div");document.body.appendChild(s);const u=k(De,{fileInfo:l,onClose:()=>{setTimeout(()=>{u.unmount(),document.body.removeChild(s)},350)}});u.use(M),u.use(x),u.mount(s)}const U=l=>(Me("data-v-1756481f"),l=l(),xe(),l),ze={class:"file-main"},je=U(()=>P("span",null,"上传文件",-1)),Je=U(()=>P("span",null,"上传文件夹",-1)),Pe=_e({__name:"index",setup(l){var $;const s=me(),u=fe(),{width:W}=he(),_=ye(),g=w(!1),m=w([]),F=w("0");F.value=(($=s.query.fileType)==null?void 0:$.toString())||"0";const B=async()=>{try{g.value=!0,f.value=!1;const o=await Ee({fileType:F.value});m.value=o.data.list}catch(o){return o}finally{g.value=!1}};ve(()=>{B()}),ge(o=>{var a;o.query.fileType&&(F.value=(a=o.query.fileType)==null?void 0:a.toString(),B())});const f=w(!1),N=o=>{if(z.success(`点击了文件-${o.name}`),J.includes(o.extendName)&&o.src){const a=m.value.filter(c=>J.includes(c.extendName)).map(c=>c.src||""),I=a.findIndex(c=>c===o.src);a.length&&Le({options:{initialViewIndex:I},images:a})}o.extendName==="mp4"&&Re(o),o.extendName==="mp3"&&qe(o)},H=o=>{_.addSelectedFileItem(o)},V=(o,a)=>{z.success("点击了"+o),o==="delete"&&j.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),o==="rename"&&Ae(a),o==="move"&&Ge(a),o==="detail"&&u.push({path:"/file/detail"})},O=()=>{j.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(o,a)=>{const I=t("icon-upload"),c=t("a-button"),D=ke,E=t("a-doption"),X=t("a-dropdown"),Y=t("a-option"),K=t("a-select"),Q=t("a-input"),Z=t("icon-search"),ee=t("a-input-group"),R=t("a-space"),ne=t("icon-delete"),oe=t("icon-select-all"),te=t("icon-swap"),L=t("a-tooltip"),ie=t("icon-filter"),le=t("icon-apps"),ae=t("icon-list"),se=t("a-button-group"),ce=t("a-row"),ue=t("a-empty"),de=t("a-spin");return d(),q("div",ze,[e(Se),e(ce,{justify:"space-between",class:"row-operate"},{default:n(()=>[e(R,null,{default:n(()=>[e(X,null,{content:n(()=>[e(E,null,{icon:n(()=>[e(D,{name:"upload-file"})]),default:n(()=>[je]),_:1}),e(E,null,{icon:n(()=>[e(D,{name:"upload-folder"})]),default:n(()=>[Je]),_:1})]),default:n(()=>[e(c,{type:"primary",shape:"round"},{icon:n(()=>[e(I)]),default:n(()=>[b("上传")]),_:1})]),_:1}),e(ee,null,{default:n(()=>[e(K,{style:{width:"150px"},placeholder:"请选择"},{default:n(()=>[(d(!0),q(Ce,null,we(i(Ie),C=>(d(),v(Y,{key:C.value},{icon:n(()=>[(d(),v(be(C.icon),{size:"18",color:"#999"}))]),default:n(()=>[b(A(C.name),1)]),_:2},1024))),128))]),_:1}),e(Q,{placeholder:"请输入关键词...","allow-clear":""}),e(c,{type:"primary"},{icon:n(()=>[e(Z)]),default:n(()=>[b("搜索")]),_:1})]),_:1})]),_:1}),i(W)>715?(d(),v(R,{key:0},{default:n(()=>[i(f)?(d(),v(c,{key:0,disabled:!i(_).selectedFileIdList.length,type:"primary",status:"danger",onClick:O},{icon:n(()=>[e(ne)]),_:1},8,["disabled"])):G("",!0),e(c,{type:"primary",onClick:a[0]||(a[0]=C=>f.value=!i(f))},{icon:n(()=>[e(oe)]),default:n(()=>[b(A(i(f)?"取消批量":"批量操作"),1)]),_:1}),e(se,null,{default:n(()=>[e(L,{content:"传输列表",position:"bottom"},{default:n(()=>[e(c,{onClick:a[1]||(a[1]=C=>g.value=!i(g))},{icon:n(()=>[e(te)]),_:1})]),_:1}),e(L,{content:"排序",position:"bottom"},{default:n(()=>[e(c,null,{icon:n(()=>[e(ie)]),_:1})]),_:1}),e(L,{content:"视图",position:"bottom"},{default:n(()=>[e(c,{onClick:i(_).changeViewMode},{icon:n(()=>[i(_).viewMode==="grid"?(d(),v(le,{key:0})):(d(),v(ae,{key:1}))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):G("",!0)]),_:1}),e(de,{class:"file-wrap",loading:i(g)},{default:n(()=>[S(e(Te,{data:i(m),isBatchMode:i(f),selectedFileIdList:i(_).selectedFileIdList,onClick:N,onCheck:H,onRightMenuClick:V},null,8,["data","isBatchMode","selectedFileIdList"]),[[T,i(m).length&&i(_).viewMode=="grid"]]),S(e(Be,{data:i(m),isBatchMode:i(f),onClick:N,onRightMenuClick:V},null,8,["data","isBatchMode"]),[[T,i(m).length&&i(_).viewMode=="list"]]),S(e(ue,null,null,512),[[T,!i(m).length]])]),_:1},8,["loading"])])}}});const ln=Fe(Pe,[["__scopeId","data-v-1756481f"]]);export{ln as default};
