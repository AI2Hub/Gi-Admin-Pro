import{d as e,g as a,C as t,r as l,o as n,c as i,a as s,w as o,h as d,u as r,I as c,e as u,E as p,f as m,i as _,p as g,j as f,_ as y}from"./index-e0f7d8a5.js";import{u as v}from"./usePagination-d1c14ec9.js";import{u as x}from"./useDept-a64b215b.js";import{b as h}from"./index-853bf539.js";import{_ as k}from"./EditUserModal.vue_vue_type_script_setup_true_lang-a1f6fdb1.js";const w=e=>(g("data-v-9c985b69"),e=e(),f(),e),b={class:"user-manage"},z={class:"content"},C=w((()=>d("span",null,"新增用户",-1))),P=w((()=>d("span",null,"搜索",-1))),S={class:"table-box"},j={key:0},U={key:1},D=y(e({name:"SystemUser",__name:"index",setup(e){const g=a(),f=a(),y=a(!1),w=a(""),D=a(!1),E=a([]),{current:I,pageSize:L,total:M,changeCurrent:N,changePageSize:V,setTotal:R}=v((()=>{q()})),{deptList:T,getDeptList:A}=x();A(),t((()=>{var e;null==(e=g.value)||e.expandAll()}));const W=()=>{var e;null==(e=f.value)||e.add()},q=async()=>{D.value=!0;const e=await h();e.success?(E.value=e.data.list,R(e.data.total),D.value=!1):D.value=!1};return q(),(e,a)=>{const t=l("icon-search"),v=l("a-input"),x=l("IconDown"),h=_,R=l("a-tree"),A=l("a-spin"),B=l("a-card"),F=l("icon-plus"),G=l("a-button"),H=l("a-option"),J=l("a-select"),K=l("a-input-group"),O=l("a-space"),Q=l("icon-delete"),X=l("a-row"),Y=l("a-table-column"),Z=l("a-tag"),$=l("icon-edit"),ee=l("a-popconfirm"),ae=l("a-table");return n(),i("div",b,[s(B,{title:"部门列表",bordered:!1,class:"gi_card left"},{default:o((()=>[d("div",z,[s(v,{modelValue:r(w),"onUpdate:modelValue":a[0]||(a[0]=e=>c(w)?w.value=e:null),placeholder:"请输入搜索关键词","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:o((()=>[s(t)])),_:1},8,["modelValue"]),s(A,{class:"tree-box",loading:r(y)},{default:o((()=>[s(R,{ref_key:"treeRef",ref:g,"block-node":"","default-expand-all":"",data:r(T),"field-names":{key:"id",title:"name",children:"children"},onSelect:q},{"switcher-icon":o((()=>[s(x)])),icon:o((({node:e})=>[1==e.level?(n(),u(h,{key:0,name:"com-dept",size:14})):p("",!0),2==e.level?(n(),u(h,{key:1,name:"com-sub-dept",size:12})):p("",!0),3==e.level?(n(),u(h,{key:2,name:"com-group",size:12})):p("",!0)])),_:1},8,["data"])])),_:1},8,["loading"])])])),_:1}),s(B,{title:"用户列表",bordered:!1,class:"gi_card right"},{default:o((()=>[s(X,{justify:"space-between"},{default:o((()=>[s(O,null,{default:o((()=>[s(G,{type:"primary",onClick:W},{icon:o((()=>[s(F)])),default:o((()=>[C])),_:1}),s(K,null,{default:o((()=>[s(J,{placeholder:"部门状态","allow-clear":"",style:{width:"120px"}},{default:o((()=>[s(H,{value:1},{default:o((()=>[m("正常")])),_:1}),s(H,{value:0},{default:o((()=>[m("禁用")])),_:1})])),_:1}),s(v,{placeholder:"请输入关键词...","allow-clear":"",style:{width:"250px"}}),s(G,{type:"primary",onClick:q},{icon:o((()=>[s(t)])),default:o((()=>[P])),_:1})])),_:1})])),_:1}),s(G,{type:"primary",status:"danger"},{icon:o((()=>[s(Q)])),_:1})])),_:1}),d("section",S,[s(ae,{"row-key":"id",loading:r(D),data:r(E),scroll:{x:"100%",y:"100%",minWidth:900},pagination:{showPageSize:!0,total:r(M),current:r(I),pageSize:r(L)},onPageChange:r(N),onPageSizeChange:r(V)},{columns:o((()=>[s(Y,{title:"用户编号","data-index":"userNo"}),s(Y,{title:"用户名","data-index":"userName"}),s(Y,{title:"用户昵称","data-index":"nickName"}),s(Y,{title:"性别","data-index":"sex"},{cell:o((({record:e})=>[1===e.sex?(n(),i("span",j,"男")):(n(),i("span",U,"女"))])),_:1}),s(Y,{title:"头像","data-index":"avatar"},{cell:o((({record:e})=>[1===e.sex?(n(),u(h,{key:0,name:"avatar-man",size:40})):(n(),u(h,{key:1,name:"avatar-woman",size:40}))])),_:1}),s(Y,{title:"地址","data-index":"address"}),s(Y,{title:"状态",width:100},{cell:o((({record:e})=>[1==e.status?(n(),u(Z,{key:0,color:"green"},{default:o((()=>[m("正常")])),_:1})):(n(),u(Z,{key:1,color:"red"},{default:o((()=>[m("禁用")])),_:1}))])),_:1}),s(Y,{title:"创建时间","data-index":"createTime"}),s(Y,{title:"操作",width:100,align:"center"},{cell:o((({record:e})=>[s(O,null,{default:o((()=>[s(G,{type:"primary",size:"mini",onClick:a=>{return t=e,void(null==(l=f.value)||l.edit(t.id));var t,l}},{icon:o((()=>[s($)])),_:2},1032,["onClick"]),s(ee,{type:"warning",content:"您确定要删除该项吗?"},{default:o((()=>[s(G,{type:"primary",status:"danger",size:"mini"},{icon:o((()=>[s(Q)])),_:1})])),_:1})])),_:2},1024)])),_:1})])),_:1},8,["loading","data","pagination","onPageChange","onPageSizeChange"])])])),_:1}),s(k,{ref_key:"EditUserModalRef",ref:f},null,512)])}}}),[["__scopeId","data-v-9c985b69"]]);export{D as default};
