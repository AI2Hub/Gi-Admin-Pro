function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/FileList-mijllCYp.js","static/js/index-JnUDrixV.js","static/css/index-Bstnbuyu.css","static/js/FileImage-DMio0r6k.js","static/js/index-Dbek4iBq.js","static/css/index-B647mp6F.css","static/js/file-vS2Qaiq0.js","static/css/FileImage-B9i30NCh.css","static/js/FileRightMenu-gZ85Doce.js","static/css/FileRightMenu-CjwAsd39.css","static/css/FileList-Cbv-jVJR.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{b as e,M as a,a1 as t,V as l,f2 as i,f3 as n,eX as o,k as s,af as d,d as u,l as c,n as r,$ as m,f4 as p,e as f,o as _,f as v,h as y,w as g,I as h,F as w,j as k,g as b,c as x,r as C,t as j,a as I,D as F,ap as M,f5 as T,y as P,z as S,i as N,eY as R,_ as O}from"./index-JnUDrixV.js";import{_ as A}from"./index-Dbek4iBq.js";import{a as B}from"./index.es-B_INiAVh.js";import q from"./ModalContent-BSEn_TeR.js";import{_ as E}from"./ModalContent.vue_vue_type_script_setup_true_lang-BOCIa5b0.js";import{_ as L}from"./ModalContent.vue_vue_type_script_setup_true_lang-Do_7WUJQ.js";import V from"./ModalContent-wYW_XcjF.js";import W from"./FilePath-DbX3lWJ7.js";import $ from"./FileGrid-Dd8pcAbL.js";import{I as z,F as D}from"./file-vS2Qaiq0.js";import"./index-BlgP3rgD.js";import"./FileImage-DMio0r6k.js";import"./FileRightMenu-gZ85Doce.js";let G="";function H(e){if(!G)return G=e.id,function(e,a){const t=document.createElement("div");document.body.appendChild(t);const l=i(e,{...a,onClose:()=>{setTimeout((()=>{l.unmount(),document.body.removeChild(t),(null==a?void 0:a.callback)&&(null==a||a.callback())}),350)}});l.use(n),l.use(o),l.mount(t)}(V,{data:e,callback:()=>{G=""}})}const J=e=>(P("data-v-6eae32bd"),e=e(),S(),e),Q={class:"file-main"},X=J((()=>N("span",null,"上传文件",-1))),Y=J((()=>N("span",null,"上传文件夹",-1))),K=O(u({__name:"index",setup(i){const n=T((()=>R((()=>import("./FileList-mijllCYp.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])))),o=c(),u=r(),{mode:P,selectedFileIds:S,toggleMode:N,addSelectedFileItem:O}=function(){const a=e("grid"),t=e([]),l=s((()=>t.value.map((e=>e.id))));return{mode:a,selectedFileList:t,selectedFileIds:l,toggleMode:()=>{a.value="grid"===a.value?"list":"grid"},addSelectedFileItem:e=>{if(l.value.includes(e.id)){const a=t.value.findIndex((a=>a.id===e.id));t.value.splice(a,1)}else t.value.push(e)}}}(),V=e(!1),G=e(!1),J=e([]),K=e("0");K.value=o.query.fileType||"0";const U=async()=>{try{V.value=!0,G.value=!1;const a=await(e={fileType:K.value},d.get("/file/list",e));J.value=a.data.records}catch(a){return a}finally{V.value=!1}var e},Z=()=>{U()};m((()=>{U()})),p((e=>{e.query.fileType&&(K.value=e.query.fileType,U())}));const ee=s((()=>J.value.filter((e=>z.includes(e.extendName))).map((e=>e.src??"")))),ae=e=>{if(l.success(`点击了文件-${e.name}`),z.includes(e.extendName)&&e.src&&ee.value.length){const a=ee.value.findIndex((a=>a===e.src));B({images:ee.value,options:{initialViewIndex:a}})}var i;"mp4"===e.extendName&&(i=e,a.open({title:"视频播放",width:"auto",modalStyle:{},content:()=>t(L,{data:i})})),"mp3"===e.extendName&&H(e)},te=e=>{O(e)},le=(i,n)=>{l.success(`点击了${i}`),"delete"===i&&a.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1,okButtonProps:{status:"danger"},onBeforeOk:async()=>await new Promise((e=>setTimeout((()=>e(!0)),300)))}),"rename"===i&&function(){const i=e();a.open({title:"重命名",width:"90%",modalStyle:{maxWidth:"450px"},modalAnimationName:"el-fade",content:()=>t(E,{ref:e=>{i.value=e}}),onBeforeOk:async()=>{var e,a;return!(await(null==(a=null==(e=i.value)?void 0:e.formRef)?void 0:a.validate()))&&(await new Promise((e=>setTimeout((()=>e(!0)),300))),l.success("重命名成功"),!0)}})}(),"move"===i&&function(){const i=e();a.open({title:"移动到",width:"90%",modalStyle:{maxWidth:"500px"},modalAnimationName:"el-dialog",maskAnimationName:"el-mask",content:()=>t(q,{ref:e=>{i.value=e}}),onBeforeOk:async()=>{var e,a;return!(await(null==(a=null==(e=i.value)?void 0:e.formRef)?void 0:a.validate()))&&(await new Promise((e=>setTimeout((()=>e(!0)),300))),l.success("移动成功"),!0)}})}(),"detail"===i&&u.push({path:"/file/detail"})},ie=()=>{a.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,a)=>{const t=f("icon-upload"),l=f("a-button"),i=A,o=f("a-doption"),s=f("a-dropdown"),d=f("a-option"),u=f("a-select"),c=f("a-input"),r=f("icon-search"),m=f("a-input-group"),p=f("a-space"),T=f("icon-delete"),R=f("icon-select-all"),O=f("icon-swap"),B=f("a-tooltip"),q=f("icon-filter"),E=f("icon-apps"),L=f("icon-list"),z=f("a-button-group"),H=f("a-row"),K=f("a-empty"),U=f("a-spin");return _(),v("div",Q,[y(W),y(H,{justify:"space-between",class:"file-main__search"},{default:g((()=>[y(p,{wrap:""},{default:g((()=>[y(s,null,{content:g((()=>[y(o,null,{icon:g((()=>[y(i,{name:"upload-file"})])),default:g((()=>[X])),_:1}),y(o,null,{icon:g((()=>[y(i,{name:"upload-folder"})])),default:g((()=>[Y])),_:1})])),default:g((()=>[y(l,{type:"primary",shape:"round"},{icon:g((()=>[y(t)])),default:g((()=>[h("上传")])),_:1})])),_:1}),y(m,null,{default:g((()=>[y(u,{placeholder:"请选择","trigger-props":{autoFitPopupMinWidth:!0},style:{width:"150px"}},{default:g((()=>[(_(!0),v(w,null,k(b(D),(e=>(_(),x(d,{key:e.value},{icon:g((()=>[(_(),x(C(e.icon),{size:"18",color:"#999"}))])),default:g((()=>[h(j(e.name),1)])),_:2},1024)))),128))])),_:1}),y(c,{placeholder:"请输入关键词...","allow-clear":""}),y(l,{type:"primary",onClick:Z},{icon:g((()=>[y(r)])),default:g((()=>[h("搜索")])),_:1})])),_:1})])),_:1}),y(p,{wrap:""},{default:g((()=>[b(G)?(_(),x(l,{key:0,disabled:!b(S).length,type:"primary",status:"danger",onClick:ie},{icon:g((()=>[y(T)])),_:1},8,["disabled"])):I("",!0),y(l,{type:"primary",onClick:a[0]||(a[0]=e=>G.value=!b(G))},{icon:g((()=>[y(R)])),default:g((()=>[h(j(b(G)?"取消批量":"批量操作"),1)])),_:1}),y(z,null,{default:g((()=>[y(B,{content:"传输列表",position:"bottom"},{default:g((()=>[y(l,null,{icon:g((()=>[y(O)])),_:1})])),_:1}),y(B,{content:"排序",position:"bottom"},{default:g((()=>[y(l,null,{icon:g((()=>[y(q)])),_:1})])),_:1}),y(B,{content:"视图",position:"bottom"},{default:g((()=>[y(l,{onClick:b(N)},{icon:g((()=>["grid"===b(P)?(_(),x(E,{key:0})):(_(),x(L,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),y(U,{class:"file-main__list",loading:b(V)},{default:g((()=>[F(y($,{data:b(J),"is-batch-mode":b(G),"selected-file-ids":b(S),onClick:ae,onSelect:te,onRightMenuClick:le},null,8,["data","is-batch-mode","selected-file-ids"]),[[M,b(J).length&&"grid"===b(P)]]),F(y(b(n),{data:b(J),"is-batch-mode":b(G),"selected-file-ids":b(S),onClick:ae,onSelect:te,onRightMenuClick:le},null,8,["data","is-batch-mode","selected-file-ids"]),[[M,b(J).length&&"list"===b(P)]]),F(y(K,null,null,512),[[M,!b(J).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-6eae32bd"]]);export{K as default};
