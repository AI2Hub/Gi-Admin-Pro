var z=Object.defineProperty,M=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var k=(u,o,d)=>o in u?z(u,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):u[o]=d,A=(u,o)=>{for(var d in o||(o={}))P.call(o,d)&&k(u,d,o[d]);if(C)for(var d of C(o))W.call(o,d)&&k(u,d,o[d]);return u},I=(u,o)=>M(u,L(o));import{d as D,r as U,y as Y,g as a,o as g,q as F,w as t,b as e,u as i,i as V,h as E,_ as j,f as b,Y as G,c as H,a as S,A as J,p as K,e as O}from"./index.e70180cd.js";import{g as Q}from"./system.c121bffb.js";import"./axios.d689bef9.js";const X=E("dept_code_"),Z=E("\u6B63\u5E38"),ee=E("\u7981\u7528"),te=D({props:{modelValue:{type:Boolean,default:!1},treeData:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(u,{emit:o}){const d=u,s=U({parentId:"",name:"",deptCode:"",order:"",status:1});let n=Y({get:()=>d.modelValue,set:h=>{o("update:modelValue",h)}});return(h,l)=>{const c=a("a-tree-select"),p=a("a-form-item"),f=a("a-input"),B=a("a-input-number"),v=a("a-radio"),y=a("a-radio-group"),m=a("a-form"),w=a("a-modal");return g(),F(w,{visible:i(n),"onUpdate:visible":l[4]||(l[4]=r=>V(n)?n.value=r:n=r),title:"\u65B0\u589E\u90E8\u95E8"},{default:t(()=>[e(m,{ref:"formRef",model:i(s),labelCol:{span:4}},{default:t(()=>[e(p,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:t(()=>[e(c,{data:u.treeData,placeholder:"\u8BF7\u9009\u62E9",fieldNames:{key:"id",title:"name",children:"children"},treeProps:{virtualListProps:{height:250}}},null,8,["data"])]),_:1}),e(p,{label:"\u90E8\u95E8\u540D\u79F0",field:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 10\u4E2A\u5B57\u7B26",trigger:"blur"}],"validate-trigger":["change","input"]},{default:t(()=>[e(f,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",modelValue:i(s).name,"onUpdate:modelValue":l[0]||(l[0]=r=>i(s).name=r)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u90E8\u95E8\u7F16\u53F7",field:"deptCode",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 30\u4E2A\u5B57\u7B26",trigger:"blur"}],"validate-trigger":["change","input"]},{default:t(()=>[e(f,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",modelValue:i(s).deptCode,"onUpdate:modelValue":l[1]||(l[1]=r=>i(s).deptCode=r)},{prepend:t(()=>[X]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"\u6392\u5E8F",name:"order"},{default:t(()=>[e(B,{modelValue:i(s).order,"onUpdate:modelValue":l[2]||(l[2]=r=>i(s).order=r)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u72B6\u6001",name:"status"},{default:t(()=>[e(y,{modelValue:i(s).status,"onUpdate:modelValue":l[3]||(l[3]=r=>i(s).status=r)},{default:t(()=>[e(v,{value:1},{default:t(()=>[Z]),_:1}),e(v,{value:0},{default:t(()=>[ee]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}});const ae=u=>(K("data-v-3210ef7a"),u=u(),O(),u),oe={class:"dept-manage"},ue=ae(()=>S("span",null,"\u65B0\u589E\u90E8\u95E8",-1)),le={class:"table-box"},ne=E("\u6B63\u5E38"),de=E("\u7981\u7528"),se=D({name:"DeptManage"}),re=D(I(A({},se),{setup(u){const o=b([]);let d=b(0),s=b(!1),n=b(!1);return U({pageCount:1,pageSize:1e3}),(async()=>{try{s.value=!0;const l=await Q();l.success&&(o.value=l.data.list,d.value=l.data.total,s.value=!1)}catch(l){return s.value=!1,l}})(),(l,c)=>{const p=a("icon-plus"),f=a("a-button"),B=a("a-row"),v=a("IconDown"),y=a("IconRight"),m=a("a-table-column"),w=a("a-switch"),r=a("icon-edit"),N=a("icon-delete"),R=a("a-popconfirm"),T=a("a-space"),$=a("a-table"),q=G("loading");return g(),H("div",oe,[e(B,{class:"head"},{default:t(()=>[e(f,{type:"primary",onClick:c[0]||(c[0]=_=>V(n)?n.value=!0:n=!0)},{icon:t(()=>[e(p)]),default:t(()=>[ue]),_:1})]),_:1}),S("section",le,[J((g(),F($,{data:o.value,"row-key":"id",scroll:{x:"100%",y:"100%",minWidth:800},pagination:{"show-page-size":!0},expandable:{width:80}},{"expand-icon":t(({expanded:_})=>[_?(g(),F(v,{key:0})):(g(),F(y,{key:1}))]),columns:t(()=>[e(m,{title:"\u90E8\u95E8\u540D\u79F0","data-index":"name"}),e(m,{title:"\u90E8\u95E8\u7F16\u7801","data-index":"deptCode"}),e(m,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime",width:"200"}),e(m,{title:"\u72B6\u6001",width:"100"},{cell:t(({record:_})=>[e(w,{modelValue:_.status,"onUpdate:modelValue":x=>_.status=x,size:"medium","checked-value":1,"unchecked-value":0},{checked:t(()=>[ne]),unchecked:t(()=>[de]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{title:"\u64CD\u4F5C",width:"100"},{cell:t(({record:_})=>[e(T,null,{default:t(()=>[e(f,{type:"primary",onClick:c[1]||(c[1]=x=>V(n)?n.value=!0:n=!0)},{icon:t(()=>[e(r)]),_:1}),e(R,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?"},{default:t(()=>[e(f,{type:"primary",status:"danger"},{icon:t(()=>[e(N)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])),[[q,i(s)]])]),e(te,{"tree-data":o.value,modelValue:i(n),"onUpdate:modelValue":c[2]||(c[2]=_=>V(n)?n.value=_:n=_)},null,8,["tree-data","modelValue"])])}}}));var me=j(re,[["__scopeId","data-v-3210ef7a"]]);export{me as default};
