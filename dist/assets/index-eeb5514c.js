import{_ as ee}from"./index-344aab06.js";import"./index-578bfdd4.js";import{u as ae}from"./usePagination-44eed113.js";import{d as R,h as _,k as te,j as oe,a as t,o as s,c as r,w as a,b as e,l as x,u as f,g as k,n as ne,i as P,x as E,e as le,f as se,_ as ce}from"./index-ad0224cd.js";import{u as ie}from"./useDept-e5a24696.js";import{g as de}from"./index-195c7d49.js";const _e="/gi-demo/assets/avatar-a3ca9f0c.jpg",re=k("img",{src:_e},null,-1),ue=R({__name:"EditUserModal",setup(y,{expose:w}){const u=_(""),S=te(()=>u.value?"编辑用户":"新增用户"),p=_(!1),l=oe({userName:"",sex:0,address:""}),V=_([]);return w({add:()=>{u.value="",p.value=!0},edit:z=>{u.value=z,p.value=!0}}),(z,c)=>{const I=t("a-input"),g=t("a-form-item"),N=t("IconCamera"),U=t("a-avatar"),C=t("a-radio"),D=t("a-radio-group"),v=t("a-cascader"),o=t("a-form"),m=t("a-modal");return s(),r(m,{visible:p.value,"onUpdate:visible":c[3]||(c[3]=i=>p.value=i),title:f(S)},{default:a(()=>[e(o,{ref:"formRef",model:l,size:"medium","auto-label-width":""},{default:a(()=>[e(g,{label:"姓名",field:"userName",rules:[{required:!0,message:"请输入部门名称"},{min:2,max:4,message:"长度在 2 - 4个字符"}],"validate-trigger":["change","input"]},{default:a(()=>[e(I,{placeholder:"请输入用户姓名",modelValue:l.userName,"onUpdate:modelValue":c[0]||(c[0]=i=>l.userName=i)},null,8,["modelValue"])]),_:1}),e(g,{label:"头像",field:"avatar"},{default:a(()=>[e(U,{size:60,"trigger-icon-style":{color:"#3491FA"}},{"trigger-icon":a(()=>[e(N)]),default:a(()=>[re]),_:1})]),_:1}),e(g,{label:"性别",field:"sex"},{default:a(()=>[e(D,{modelValue:l.sex,"onUpdate:modelValue":c[1]||(c[1]=i=>l.sex=i)},{default:a(()=>[e(C,{value:1},{default:a(()=>[x("男")]),_:1}),e(C,{value:0},{default:a(()=>[x("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"地址",field:"address"},{default:a(()=>[e(v,{modelValue:l.address,"onUpdate:modelValue":c[2]||(c[2]=i=>l.address=i),options:V.value,"field-names":{value:"code",label:"label"},placeholder:"请选择省市区"},null,8,["modelValue","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),F=y=>(le("data-v-192e2df7"),y=y(),se(),y),pe={class:"user-manage"},me={class:"content"},fe=F(()=>k("span",null,"新增用户",-1)),ge=F(()=>k("span",null,"搜索",-1)),ve={class:"table-box"},xe={key:0},ye={key:1},be=R({name:"UserManage"}),he=R({...be,setup(y){const w=_(),u=_(),S=_(!1),p=_(""),l=_(!1),V=_([]),{current:T,pageSize:B,total:z,changeCurrent:c,changePageSize:I,setTotal:g}=ae(()=>{v()}),{deptList:N,getDeptList:U}=ie();U(),ne(()=>{var o;(o=w.value)==null||o.expandAll()});const C=()=>{var o;(o=u.value)==null||o.add()},D=o=>{var m;(m=u.value)==null||m.edit(o.id)},v=async()=>{l.value=!0;const o=await de();o.success&&(V.value=o.data.list,g(o.data.total)),l.value=!1};return v(),(o,m)=>{const i=t("icon-search"),L=t("a-input"),G=t("IconDown"),b=ee,W=t("a-tree"),H=t("a-spin"),M=t("a-card"),J=t("icon-plus"),h=t("a-button"),j=t("a-option"),K=t("a-select"),O=t("a-input-group"),A=t("a-space"),$=t("icon-delete"),Q=t("a-row"),d=t("a-table-column"),q=t("a-tag"),X=t("icon-edit"),Y=t("a-popconfirm"),Z=t("a-table");return s(),P("div",pe,[e(M,{title:"部门列表",bordered:!1,class:"gi_card left"},{default:a(()=>[k("div",me,[e(L,{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=n=>p.value=n),placeholder:"请输入搜索关键词","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:a(()=>[e(i)]),_:1},8,["modelValue"]),e(H,{class:"tree-box",loading:S.value},{default:a(()=>[e(W,{ref_key:"treeRef",ref:w,"block-node":"","default-expand-all":"",data:f(N),"field-names":{key:"id",title:"name",children:"children"},onSelect:v},{"switcher-icon":a(()=>[e(G)]),icon:a(({node:n})=>[n.level==1?(s(),r(b,{key:0,name:"com-dept",size:14})):E("",!0),n.level==2?(s(),r(b,{key:1,name:"com-sub-dept",size:12})):E("",!0),n.level==3?(s(),r(b,{key:2,name:"com-group",size:12})):E("",!0)]),_:1},8,["data"])]),_:1},8,["loading"])])]),_:1}),e(M,{title:"用户列表",bordered:!1,class:"gi_card right"},{default:a(()=>[e(Q,{justify:"space-between"},{default:a(()=>[e(A,null,{default:a(()=>[e(h,{type:"primary",onClick:C},{icon:a(()=>[e(J)]),default:a(()=>[fe]),_:1}),e(O,null,{default:a(()=>[e(K,{placeholder:"部门状态","allow-clear":"",style:{width:"120px"}},{default:a(()=>[e(j,{value:1},{default:a(()=>[x("正常")]),_:1}),e(j,{value:0},{default:a(()=>[x("禁用")]),_:1})]),_:1}),e(L,{placeholder:"请输入关键词...","allow-clear":"",style:{width:"250px"}}),e(h,{type:"primary",onClick:v},{icon:a(()=>[e(i)]),default:a(()=>[ge]),_:1})]),_:1})]),_:1}),e(h,{type:"primary",status:"danger"},{icon:a(()=>[e($)]),_:1})]),_:1}),k("section",ve,[e(Z,{"row-key":"id",loading:l.value,data:V.value,scroll:{x:"100%",y:"100%",minWidth:900},pagination:{showPageSize:!0,total:f(z),current:f(T),pageSize:f(B)},onPageChange:f(c),onPageSizeChange:f(I)},{columns:a(()=>[e(d,{title:"用户编号","data-index":"userNo"}),e(d,{title:"用户名","data-index":"userName"}),e(d,{title:"用户昵称","data-index":"nickName"}),e(d,{title:"性别","data-index":"sex"},{cell:a(({record:n})=>[n.sex===1?(s(),P("span",xe,"男")):(s(),P("span",ye,"女"))]),_:1}),e(d,{title:"头像","data-index":"avatar"},{cell:a(({record:n})=>[n.sex===1?(s(),r(b,{key:0,name:"avatar-man",size:40})):(s(),r(b,{key:1,name:"avatar-woman",size:40}))]),_:1}),e(d,{title:"地址","data-index":"address"}),e(d,{title:"状态",width:100},{cell:a(({record:n})=>[n.status==1?(s(),r(q,{key:0,color:"green"},{default:a(()=>[x("正常")]),_:1})):(s(),r(q,{key:1,color:"red"},{default:a(()=>[x("禁用")]),_:1}))]),_:1}),e(d,{title:"创建时间","data-index":"createTime"}),e(d,{title:"操作",width:100,align:"center"},{cell:a(({record:n})=>[e(A,null,{default:a(()=>[e(h,{type:"primary",size:"mini",onClick:ke=>D(n)},{icon:a(()=>[e(X)]),_:2},1032,["onClick"]),e(Y,{type:"warning",content:"您确定要删除该项吗?"},{default:a(()=>[e(h,{type:"primary",status:"danger",size:"mini"},{icon:a(()=>[e($)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination","onPageChange","onPageSizeChange"])])]),_:1}),e(ue,{ref_key:"EditUserModalRef",ref:u},null,512)])}}});const Ne=ce(he,[["__scopeId","data-v-192e2df7"]]);export{Ne as default};
