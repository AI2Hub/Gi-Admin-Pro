import{d as e,J as a,b as l,k as s,e as t,o as u,c as d,w as o,h as i,g as m,H as r,fa as n,U as c}from"./index-CpyorRoN.js";import{s as v}from"./index-C7SsGD_9.js";import{u as f}from"./useResetReactive-WFaHvQj8.js";const p=e({__name:"AddDictDataModal",emits:["save-success"],setup(e,{expose:p,emit:h}){const _=h,b=a("formRef"),w=l(""),x=s((()=>!!w.value)),g=s((()=>x.value?"编辑字典数据":"新增字典数据")),V=l(!1),k=l(!1),[y,U]=f({name:"",value:"",status:1}),j={name:[{required:!0,message:"请输入字典名"}],value:[{required:!0,message:"请输入字典值"},{match:/^[a-zA-Z0-9_]*$/,message:"格式不对！只能包含英文数字下划线"}],status:[{required:!0}]},R=()=>{var e;null==(e=b.value)||e.resetFields(),U()},q=async()=>{var e;try{if(await(null==(e=b.value)?void 0:e.validate()))return!1;return!!(await v(y)).data&&(c.success("模拟保存成功"),_("save-success"),!0)}catch(a){return!1}};return p({add:()=>{w.value="",V.value=!0},edit:async e=>{V.value=!0,w.value=e.id,k.value=!0;const a=await n(e);Object.assign(y,a.data),k.value=!1}}),(e,a)=>{const l=t("a-input"),s=t("a-form-item"),n=t("a-switch"),c=t("a-form"),v=t("a-spin"),f=t("a-modal");return u(),d(f,{visible:m(V),"onUpdate:visible":a[3]||(a[3]=e=>r(V)?V.value=e:null),title:m(g),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:q,onClose:R},{default:o((()=>[i(v,{loading:m(k),class:"w-full"},{default:o((()=>[i(c,{ref_key:"formRef",ref:b,model:m(y),rules:j,size:"medium","auto-label-width":""},{default:o((()=>[i(s,{label:"字典名",field:"name"},{default:o((()=>[i(l,{modelValue:m(y).name,"onUpdate:modelValue":a[0]||(a[0]=e=>m(y).name=e),modelModifiers:{trim:!0},placeholder:"请输入字典名","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),i(s,{label:"字典值",field:"value"},{default:o((()=>[i(l,{modelValue:m(y).value,"onUpdate:modelValue":a[1]||(a[1]=e=>m(y).value=e),modelModifiers:{trim:!0},placeholder:"请输入字典值","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),i(s,{label:"状态",field:"status"},{default:o((()=>[i(n,{modelValue:m(y).status,"onUpdate:modelValue":a[2]||(a[2]=e=>m(y).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["loading"])])),_:1},8,["visible","title"])}}});export{p as _};
