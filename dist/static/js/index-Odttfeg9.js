import{d as e,k as l,e as t,o as a,f as i,c as s,x as n,g as r,_ as d,b as o,O as u,E as c,s as p,h as _,w as m,i as f,H as v,J as g,U as y,G as k,t as x,a as h,W as w,S as b}from"./index-Do-DxwTW.js";import{u as j}from"./useBreakpoint-C432DLpE.js";import{_ as C}from"./GiCellGender.vue_vue_type_script_setup_true_lang-CFB-9ptk.js";import{_ as S}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-C0rcLmR2.js";import{_ as U}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-5-DvQtex.js";import{_ as D}from"./AddUserModal.vue_vue_type_script_setup_true_lang-CuO5ssOH.js";import{_ as R}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-BK_Y6XoR.js";import{u as A}from"./useTable-1oTNYRpR.js";import{u as V}from"./useDept-CZc3MUaM.js";import{a as $}from"./user-CDjdwPhJ.js";import{u as B}from"./useDict-CDMu9oO6.js";import{d as G}from"./index-sF-iIJxS.js";import"./index-CbTd3zAu.js";import"./regexp-LyZ7ySAN.js";import"./role-CIW1FD9d.js";import"./useResetReactive-WhHr6XjH.js";const z=d(e({__name:"index",props:{collapsed:{type:Boolean,default:!1},type:{default:"circle"}},emits:["click"],setup(e,{emit:d}){const o=e,u=d,c=l((()=>`gi-split-button--${o.type}`));return(e,l)=>{const d=t("icon-right"),p=t("icon-left");return a(),i("div",{class:n(["gi-split-button",r(c)]),onClick:l[0]||(l[0]=e=>u("click"))},[o.collapsed?(a(),s(d,{key:0})):(a(),s(p,{key:1}))],2)}}}),[["__scopeId","data-v-606291e7"]]),I=d(e({__name:"GiSplitPaneFlexibleBox",props:{visible:{type:Boolean,default:!1},direction:{default:"left"}},emits:["update:visible"],setup(e,{emit:t}){const s=e,n=t,r=o(),{breakpoint:d}=j();u((()=>d.value),(e=>{["xs"].includes(e)?n("update:visible",!1):n("update:visible",!0)}),{immediate:!0});const _=l((()=>{const e={};return e[`margin-${s.direction}`]=!s.visible&&r.value&&r.value.clientWidth?`-${r.value.clientWidth}px`:0,e}));return(e,l)=>(a(),i("div",{ref_key:"boxRef",ref:r,class:"gi-flexible-box",style:p(_.value)},[c(e.$slots,"default",{},void 0,!0)],4))}}),[["__scopeId","data-v-852c0e13"]]),M={class:"gi-split-pane"},W={class:"gi-split-pane__left"},O={class:"gi-split-pane__line"},L={class:"gi-split-pane__right"},N=d(e({__name:"index",setup(e){const l=o(!0),t=()=>{l.value=!l.value};return(e,s)=>{const n=I,d=z;return a(),i("div",M,[_(n,{visible:r(l),"onUpdate:visible":s[0]||(s[0]=e=>v(l)?l.value=e:null)},{default:m((()=>[f("div",W,[c(e.$slots,"left",{},void 0,!0)])])),_:3},8,["visible"]),f("div",O,[_(d,{collapsed:!r(l),onClick:t},null,8,["collapsed"])]),f("div",L,[c(e.$slots,"default",{},void 0,!0)])])}}}),[["__scopeId","data-v-747762c7"]]),T={class:"gi_page user-manage"},E=e({name:"SystemUser",__name:"index",setup(e){const{data:l}=B({code:"status"}),n=g("treeRef"),d=g("AddUserModalRef"),u=g("UserDetailDrawerRef"),c=o(""),{deptList:p,getDeptList:j}=V({onSuccess:()=>{b((()=>{var e;null==(e=n.value)||e.expandAll(!0)}))}});j();const z=y({status:"",username:""}),{loading:I,tableData:M,pagination:W,selectedKeys:O,search:L,select:E,selectAll:F,handleDelete:H,fixed:J}=A((e=>$(e)),{immediate:!0}),K=()=>{z.status="",z.username="",L()},P=()=>{if(!O.value.length)return w.warning("请选择用户！");H((()=>G({ids:O.value})))},Q=()=>{var e;null==(e=d.value)||e.add()};return(e,o)=>{const g=t("icon-search"),y=t("a-input"),w=t("a-tree"),b=t("icon-plus"),j=t("a-button"),A=t("icon-delete"),V=t("a-space"),$=t("a-select"),B=t("a-input-group"),X=t("icon-refresh"),Y=t("a-row"),q=t("a-table-column"),Z=t("a-link"),ee=U,le=S,te=C,ae=t("a-tag"),ie=t("icon-edit"),se=t("a-popconfirm"),ne=t("a-table"),re=N,de=t("a-card");return a(),i("div",T,[_(de,{title:"用户管理"},{default:m((()=>[_(re,null,{left:m((()=>[_(y,{modelValue:r(c),"onUpdate:modelValue":o[0]||(o[0]=e=>v(c)?c.value=e:null),placeholder:"输入部门名称搜索","allow-clear":""},{prefix:m((()=>[_(g)])),_:1},8,["modelValue"]),_(w,{ref_key:"treeRef",ref:n,"block-node":"","show-line":"","default-expand-all":"",data:r(p),"field-names":{key:"id",title:"name",children:"children"},onSelect:r(L)},null,8,["data","onSelect"])])),default:m((()=>[_(Y,{justify:"space-between"},{default:m((()=>[_(V,{wrap:""},{default:m((()=>[_(j,{type:"primary",onClick:Q},{icon:m((()=>[_(b)])),default:m((()=>[o[3]||(o[3]=f("span",null,"新增",-1))])),_:1}),_(j,{type:"primary",status:"danger",onClick:P},{icon:m((()=>[_(A)])),default:m((()=>[o[4]||(o[4]=f("span",null,"删除",-1))])),_:1})])),_:1}),_(V,{wrap:""},{default:m((()=>[_(B,null,{default:m((()=>[_($,{modelValue:r(z).status,"onUpdate:modelValue":o[1]||(o[1]=e=>r(z).status=e),options:r(l),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),_(y,{modelValue:r(z).username,"onUpdate:modelValue":o[2]||(o[2]=e=>r(z).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])])),_:1}),_(j,{type:"primary",onClick:r(L)},{icon:m((()=>[_(g)])),default:m((()=>[o[5]||(o[5]=f("span",null,"查询",-1))])),_:1},8,["onClick"]),_(j,{onClick:K},{icon:m((()=>[_(X)])),default:m((()=>[o[6]||(o[6]=f("span",null,"重置",-1))])),_:1})])),_:1})])),_:1}),_(ne,{"row-key":"id",loading:r(I),data:r(M),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:r(W),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":r(O),onSelect:r(E),onSelectAll:r(F)},{columns:m((()=>[_(q,{title:"序号",width:64},{cell:m((e=>[k(x(e.rowIndex+1),1)])),_:1}),_(q,{title:"用户名","data-index":"username",width:120},{cell:m((({record:e})=>[_(Z,{onClick:l=>{return t=e,void(null==(a=u.value)||a.open(t.id));var t,a}},{default:m((()=>[k(x(e.username),1)])),_:2},1032,["onClick"])])),_:1}),_(q,{title:"昵称","data-index":"nickname",width:150},{cell:m((({record:e})=>[_(ee,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),_(q,{title:"状态",width:100,align:"center"},{cell:m((({record:e})=>[_(le,{status:e.status},null,8,["status"])])),_:1}),_(q,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:m((({record:e})=>[_(te,{gender:e.gender},null,8,["gender"])])),_:1}),_(q,{title:"联系方式","data-index":"phone",width:180}),_(q,{title:"部门","data-index":"deptName",width:180}),_(q,{title:"类型",width:100,align:"center"},{cell:m((({record:e})=>[1===e.type?(a(),s(ae,{key:0,color:"red",size:"small"},{default:m((()=>o[7]||(o[7]=[k("系统内置")]))),_:1})):h("",!0),2===e.type?(a(),s(ae,{key:1,color:"orange",size:"small"},{default:m((()=>o[8]||(o[8]=[k("自定义")]))),_:1})):h("",!0)])),_:1}),_(q,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),_(q,{title:"创建时间","data-index":"createTime",width:200}),_(q,{title:"操作",width:180,align:"center",fixed:r(J)},{cell:m((({record:e})=>[_(V,null,{default:m((()=>[_(j,{type:"primary",size:"mini",onClick:l=>{return t=e,void(null==(a=d.value)||a.edit(t.id));var t,a}},{icon:m((()=>[_(ie)])),default:m((()=>[o[9]||(o[9]=f("span",null,"编辑",-1))])),_:2},1032,["onClick"]),_(se,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:l=>{return t=e,H((()=>G({ids:[t.id]})),{showModal:!1});var t}},{default:m((()=>[_(j,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:m((()=>[_(A)])),default:m((()=>[o[10]||(o[10]=f("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])])),_:1})])),_:1}),_(D,{ref_key:"AddUserModalRef",ref:d,onSaveSuccess:r(L)},null,8,["onSaveSuccess"]),_(R,{ref_key:"UserDetailDrawerRef",ref:u},null,512)])}}});export{E as default};
