import{v as Se,T as xe,c as De}from"./runtime-dom.esm-bundler-a7552804.js";import{_ as be}from"./GiHead-eecc5660.js";import{u as fe}from"./vue-router-dc831d57.js";import"./index-03184213.js";import{u as ve}from"./usePagination-a4b5d99b.js";import"./index-bd10b458.js";import{o as Me,d as Ne}from"./index-0813be0b.js";import{h as g,O as Re,K as Z,f as A,E as Ce,o as _,c as z,w as t,a0 as Ae,b as I,R as Oe,u as R,T as Pe,_ as X,G as se,d as O,L as J,r as n,a as e,U as k,i as K,S as Ee,F as j,a1 as Q,t as H,p as $e,e as ze,a8 as ge,ae as Ue,g as Be}from"./_plugin-vue_export-helper-a686c450.js";import{G as Ge,a as ie}from"./GiOptionItem-a8bf6cdd.js";import{A as He}from"./arco-vue-608fec34.js";import{A as We}from"./arco-vue-icon-056882c6.js";import{r as je}from"./utils-b0df3aa8.js";import{M as he}from"./index-057adbeb.js";import{O as qe,P as Le}from"./regexp-52ced781.js";import{R as q}from"./index-6b182eb3.js";import{g as ye}from"./index-7123684c.js";import{_ as ke}from"./GiSvgIcon-e4306b09.js";import"./GiTitle-d6d465aa.js";import"./index-be8e24a0.js";import"./auth-56bca224.js";import"./dayjs.min-9fe9ade1.js";const Fe="/mock";function Ie(){return je.get(`${Fe}/cate/tree`)}function Ke(d,f,l={alignPoint:!1}){const u=g(!1),c=g(0),r=g(0),s=p=>{u.value=p},h=()=>{const p={};return d.clientX>window.innerWidth-r.value?p.right=l.alignPoint?window.innerWidth-d.clientX-c.value/2+"px":window.innerWidth-d.clientX+"px":p.left=l.alignPoint?d.clientX+c.value/2+"px":d.clientX+"px",d.clientY>window.innerHeight-r.value?(p.bottom=window.innerHeight-d.clientY+"px",p["transform-origin"]="center bottom"):(p.top=d.clientY+2+"px",p["transform-origin"]="center top"),p["z-index"]=999,p};return Re(()=>{u.value=!0,Z(()=>{f&&(r.value=f==null?void 0:f.offsetHeight,c.value=f==null?void 0:f.offsetWidth,h())})}),{visible:u,setVisible:s,getStyle:h}}function Xe(d,f="新建分类"){let l=0;for(let u=0;u<d.length+1;u++)if(!d.includes(`${f}${u+1}`)){l=u+1;break}return`${f}${l}`}const Ye=A({name:"GiContextMenu"}),Je=A({...Ye,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(d,{expose:f,emit:l}){const u=d,c=g(null),{visible:r,setVisible:s,getStyle:h}=Ke(u.event,c,u.options);Me(c,()=>{s(!1),l("close")},{capture:!1,ignore:u.ignoreRefs});const{width:p,height:C}=Ne();return Ce(()=>[p.value,C.value],()=>{s(!1),l("close")}),f({visible:r,onHidden:()=>{s(!1),l("close")}}),(b,M)=>(_(),z(xe,{name:"slide-dynamic-origin"},{default:t(()=>[Ae(I("div",{class:"gi-context-menu",ref_key:"elRef",ref:c,style:Oe(R(h)())},[Pe(b.$slots,"default",{},void 0,!0)],4),[[Se,R(r)]])]),_:3}))}});const Ze=X(Je,[["__scopeId","data-v-4ada3c17"]]),Qe={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},et=A({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(d,{emit:f}){const l=d,u=g(null),c=se({callback:{onClick:(s,h,p)=>{r(s,h,p)}}});Ce(l.treeData,()=>{Z(()=>{var s;u.value=$.fn.zTree.init($("#movetree"),c,l.treeData),(s=u.value)==null||s.expandAll(!0)})},{deep:!0,immediate:!0});function r(s,h,p){f("node-click",p)}return(s,h)=>(_(),O("ul",Qe,null,512))}}),tt=A({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(d,{expose:f}){const l=d,u=g(null),c=g(null),r=g([c]),s=g(!1),h=J(()=>l.fileInfo.id!==""),p=J(()=>l.fileInfo.id!=="root"),C=J(()=>l.fileInfo.id!=="root"),T=J(()=>l.fileInfo.id!=="root"),b=()=>{s.value=!1,l.onClose()},M=x=>{if(x==="move")return s.value=!s.value,!1;Z(()=>{var y;l.onClick(x),(y=u.value)==null||y.onHidden()})},S=()=>{var x;(x=u.value)==null||x.onHidden()};return f({menuRef:u,showMoveTreePopup:s,onClose:b,onClickItem:M}),(x,y)=>{const D=n("a-popover");return _(),z(Ze,{ref_key:"menuRef",ref:u,event:d.event,ignoreRefs:r.value,onClose:b},{default:t(()=>[e(Ge,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[R(h)?(_(),z(ie,{key:0,icon:"IconPlusCircle",onClick:y[0]||(y[0]=a=>M("add"))},{default:t(()=>[k("新增")]),_:1})):K("",!0),R(p)?(_(),z(ie,{key:1,icon:"IconEdit",onClick:y[1]||(y[1]=a=>M("rename"))},{default:t(()=>[k("重命名")]),_:1})):K("",!0),e(D,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":s.value},{content:t(()=>[I("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:c},[e(et,{"tree-data":d.treeData,onNodeClick:S},null,8,["tree-data"])],512)]),default:t(()=>[R(C)?(_(),z(ie,{key:0,more:"",icon:"IconExport",active:s.value,onClick:y[2]||(y[2]=a=>M("move"))},{default:t(()=>[k(" 移动 ")]),_:1},8,["active"])):K("",!0)]),_:1},8,["popup-visible"]),R(T)?(_(),z(ie,{key:2,icon:"IconDelete",onClick:y[3]||(y[3]=a=>M("delete"))},{default:t(()=>[k("删除")]),_:1})):K("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const nt=X(tt,[["__scopeId","data-v-991fe312"]]);let F=null,Y=null;function ot(d,f,l){return new Promise(u=>{c(),Y=document.createElement("div"),document.body.appendChild(Y),F=De(nt,{event:d,fileInfo:f,treeData:l,onClick:r=>{u({mode:r,fileInfo:f}),setTimeout(()=>{c()},360)},onClose:()=>{setTimeout(()=>{c()},360)}}),F.use(He),F.use(We),F.mount(Y);function c(){F!==null&&(F.unmount(),F=null),Y!==null&&(document.body.removeChild(Y),Y=null)}})}const me="/gi-demo/assets/com-file-open-a82dbda1.svg",ae="/gi-demo/assets/com-file-close-e0ebbcc4.svg",at="/gi-demo/assets/com-file-9070581a.svg",lt={class:"cate-tree"},st={class:"search-wrap"},it={class:"wrap"},ct=A({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"请输入关键词"}},emits:["node-click"],setup(d,{emit:f}){const l=g(!1),u=g(""),c=g(null),r=g([]),s=g(null),h=g(null),p=(a,v,i)=>{console.log("点击节点",i),h.value=i,f("node-click")},C=se({callback:{onRightClick:(a,v,i)=>{console.log("鼠标右键",i),i&&(h.value=i,ot(a,i,r.value).then(o=>{console.log("res",o),o.mode==="add"&&M(),o.mode==="rename"&&S(),o.mode==="delete"&&x()}))},onClick:(a,v,i)=>{p(a,v,i)}}}),T=a=>{if(!a.length)return;function v(i){i.forEach(o=>{o.children&&o.children.length?(o.iconOpen=me,o.iconClose=ae,v(o.children)):(o.children=null,o.iconOpen=me,o.iconClose=ae,o.icon=ae,o.type==null&&(o.icon=at))})}v(a)};(async()=>{try{l.value=!0;const a=await Ie();if(a.success){const v=a.data;T(v),r.value=v,Z(()=>{var i;s.value=$.fn.zTree.init($("#treeDemo"),C,r.value),(i=s.value)==null||i.expandAll(!0)})}}catch(a){return a}finally{l.value=!1}})();const M=()=>{var U,N,V;const a=((U=h.value)==null?void 0:U.children)||[];let v="新建分类1";if(a&&a.length){const P=a.map(G=>G.name);v=Xe(P,"新建分类")}const i=new Date().getTime().toString(),o={id:i,name:v,children:null,iconOpen:me,iconClose:ae,icon:ae,isParent:!1};(N=s.value)==null||N.addNodes(h.value||{},o,!0);const w=(V=s.value)==null?void 0:V.getNodesByParam("id",i);setTimeout(()=>{var P;(P=s.value)==null||P.editName(w[0])},100)},S=()=>{Z(()=>{var v,i,o;const a=(i=s.value)==null?void 0:i.getNodesByParam("id",(v=h.value)==null?void 0:v.id);(o=s.value)==null||o.editName(a[0])})},x=()=>{he.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})},y=(a,v)=>{let i=!1;if(a.name.indexOf(v)>-1&&(i=!0),a.children){const o=a.children;for(let w=0;w<o.length;w++){const U=o[w];y(U,v)?i=!0:o.splice(w--,1)}}return i},D=()=>{var v,i;let a=u.value;if(!a)s.value=$.fn.zTree.init($("#treeDemo"),C,r.value),(v=s.value)==null||v.expandAll(!0);else{const o=JSON.parse(JSON.stringify(r.value));for(let w=0;w<o.length;w++)y(o[w],a)||o.splice(w--,1);s.value=$.fn.zTree.init($("#treeDemo"),C,o),(i=s.value)==null||i.expandAll(!0)}};return(a,v)=>{const i=n("icon-search"),o=n("a-input");return _(),O("div",lt,[I("div",st,[e(o,{"allow-clear":"",maxlength:20,placeholder:d.placeholder,modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=w=>u.value=w),onInput:D,onClear:D},{prefix:t(()=>[e(i)]),_:1},8,["placeholder","modelValue"])]),I("div",it,[I("ul",{id:"treeDemo",ref_key:"treeRef",ref:c,class:"ztree cate-ztree"},null,512)])])}}});const rt=X(ct,[["__scopeId","data-v-b221a124"]]),we=d=>($e("data-v-fb90ac75"),d=d(),ze(),d),ut=we(()=>I("div",null,"仅支持中文姓名",-1)),dt=we(()=>I("span",null,"权限配置",-1)),_t=we(()=>I("span",null,"自定义管理员、编辑者的权限， 点击",-1)),pt=A({__name:"EditModal",setup(d,{expose:f}){const l=se({name:"",phone:"",status:!1}),u={name:[{required:!0,message:"请输入姓名"},{match:qe,message:"只能是中文姓名"},{minLength:1,maxLength:4,message:"名字最长不超过4个字符"}],phone:[{match:Le,message:"手机号格式不正确"}],status:[{required:!0}]},c=[{name:"新增"},{name:"编辑"},{name:"重命名"},{name:"分享"},{name:"删除"}],r=g(!1),s=g(""),h=J(()=>!!s.value),p=J(()=>h.value?"编辑":"新增"),C=g(),T=async()=>{var x;return await((x=C.value)==null?void 0:x.validate())?!1:(await new Promise(y=>setTimeout(y,1500)),q.success(h.value?"编辑成功":"新增成功"),!0)};return f({add:()=>{s.value="",r.value=!0},edit:S=>{s.value=S,r.value=!0}}),(S,x)=>{const y=n("a-input"),D=n("a-form-item"),a=n("a-radio"),v=n("a-radio-group"),i=n("a-form"),o=n("a-row"),w=n("icon-question-circle-fill"),U=n("a-link"),N=n("a-tooltip"),V=n("a-space"),P=n("icon-right"),G=n("a-checkbox"),L=n("a-checkbox-group"),ee=n("a-collapse-item"),te=n("a-collapse"),ne=n("a-modal");return _(),z(ne,{visible:r.value,"onUpdate:visible":x[3]||(x[3]=E=>r.value=E),title:R(p),"on-before-ok":T},{default:t(()=>[e(o,{justify:"center"},{default:t(()=>[e(i,{ref_key:"formRef",ref:C,model:l,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(D,{field:"name",label:"姓名",rules:u.name},{extra:t(()=>[ut]),default:t(()=>[e(y,{modelValue:l.name,"onUpdate:modelValue":x[0]||(x[0]=E=>l.name=E),placeholder:"请输入姓名",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(D,{field:"phone",label:"手机号"},{default:t(()=>[e(y,{modelValue:l.phone,"onUpdate:modelValue":x[1]||(x[1]=E=>l.phone=E),placeholder:"请输入手机号",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(D,{field:"status",label:"状态",rules:u.status},{default:t(()=>[e(v,{modelValue:l.status,"onUpdate:modelValue":x[2]||(x[2]=E=>l.status=E)},{default:t(()=>[e(a,{value:!1},{default:t(()=>[k("关闭")]),_:1}),e(a,{value:!0},{default:t(()=>[k("开启")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(te,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(ee,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(V,null,{default:t(()=>[dt,e(N,{position:"right","content-style":{width:"200px"}},{content:t(()=>[_t,e(U,{type:"primary",hoverable:!1},{default:t(()=>[k("了解更多权限")]),_:1})]),default:t(()=>[e(w,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:E})=>[e(P,{class:Ee({gi_rotate_90deg:E})},null,8,["class"])]),default:t(()=>[(_(),O(j,null,Q(c,(E,oe)=>e(o,{justify:"space-between",key:oe},{default:t(()=>[I("span",null,H(E.name),1),e(L,null,{default:t(()=>[e(G,{value:"1"},{default:t(()=>[k("管理员")]),_:1}),e(G,{value:"2"},{default:t(()=>[k("编辑者")]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Te=X(pt,[["__scopeId","data-v-fb90ac75"]]),le=[{name:"禁用",value:0,color:"red"},{name:"启用",value:1,color:"green"}],mt={class:"data-pane"},ft={class:"gi_box pane-left"},vt={class:"gi_box pane-right"},gt={class:"content"},ht={class:"table-box"},yt=A({name:"DataManage"}),kt=A({...yt,setup(d){const f=fe(),l=[{title:"序号",width:68,slotName:"index"},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",slotName:"proportion",width:200},{title:"状态",slotName:"status",width:100,align:"center"},{title:"操作",slotName:"operation",width:200,align:"center",fixed:"right"}],{pagination:u,setTotal:c}=ve(()=>T()),r=se({name:"",status:""}),s=g([]),h=g(!1),p=g(),C=o=>o<30?"danger":o<60?"warning":"success",T=async()=>{h.value=!0;const o=await ye({current:u.current,pageSize:u.pageSize,...r});o.success&&(s.value=o.data.list,c(o.data.total)),h.value=!1};ge(()=>{T()});const b=()=>{he.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{s.value=[]}})},M=()=>{var o;(o=p.value)==null||o.add()},S=o=>{var w;(w=p.value)==null||w.edit(o.id)},x=()=>{f.push({path:"/data/detail"})},y=o=>{q.success("删除成功"),T()},D=()=>{if(!a.value.length)return q.warning("请勾选数据");q.success("点击了导出")},a=g([]),v=o=>{a.value=o},i=o=>{a.value=o?s.value.map(w=>w.id):[]};return(o,w)=>{const U=be,N=n("icon-plus"),V=n("a-button"),P=n("icon-delete"),G=n("icon-export"),L=n("a-space"),ee=n("a-option"),te=n("a-select"),ne=n("a-input"),E=n("icon-search"),oe=n("a-input-group"),re=n("icon-refresh"),W=n("a-row"),ue=n("a-progress"),de=n("a-tag"),_e=n("a-popconfirm"),pe=n("a-table");return _(),O("div",mt,[I("section",ft,[e(U,{title:"数据分类(ZTree)"}),e(rt,{placeholder:"请输入搜索关键词",onNodeClick:w[0]||(w[0]=m=>R(u).onChange(1))})]),I("section",vt,[e(U,{title:"数据列表"}),I("div",gt,[e(W,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(L,null,{default:t(()=>[e(V,{type:"primary",onClick:M},{icon:t(()=>[e(N)]),default:t(()=>[k("新增")]),_:1}),e(V,{type:"primary",status:"danger",onClick:b},{icon:t(()=>[e(P)]),default:t(()=>[k("删除")]),_:1}),e(V,{type:"primary",status:"success",onClick:D},{icon:t(()=>[e(G)]),default:t(()=>[k("导出")]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(te,{modelValue:r.status,"onUpdate:modelValue":w[1]||(w[1]=m=>r.status=m),placeholder:"请选择","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(_(!0),O(j,null,Q(R(le),m=>(_(),z(ee,{key:m.value,value:m.value},{default:t(()=>[k(H(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(oe,null,{default:t(()=>[e(ne,{modelValue:r.name,"onUpdate:modelValue":w[2]||(w[2]=m=>r.name=m),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(V,{type:"primary",onClick:T},{default:t(()=>[e(E)]),_:1})]),_:1}),e(V,{type:"primary",onClick:T},{icon:t(()=>[e(re)]),_:1})]),_:1})]),_:1}),I("section",ht,[e(pe,{"row-key":"id",size:"small",loading:h.value,bordered:{cell:!0},columns:l,data:s.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:R(u),onSelect:v,onSelectAll:i},{index:t(({rowIndex:m})=>[k(H(m+1),1)]),proportion:t(({record:m})=>[e(ue,{status:C(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),status:t(({record:m})=>[(_(!0),O(j,null,Q(R(le),B=>(_(),O(j,{key:B.value},[B.value===m.status?(_(),z(de,{key:0,size:"small",color:B.color},{default:t(()=>[k(H(B.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:m})=>[e(L,null,{default:t(()=>[e(V,{type:"primary",size:"mini",onClick:B=>S(m)},{default:t(()=>[k("修改")]),_:2},1032,["onClick"]),e(V,{size:"mini",onClick:x},{default:t(()=>[k("详情")]),_:1}),e(_e,{type:"warning",content:"您确定要删除该项吗?",onOk:B=>y(m.id)},{default:t(()=>[e(V,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[k("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["loading","data","pagination"])])])]),e(Te,{ref_key:"EditModalRef",ref:p},null,512)])}}}),wt=A({name:"TreeSwitcherIcon"}),Ve=A({...wt,props:{expanded:{type:Boolean},hasChildren:{type:Boolean}},setup(d){return(f,l)=>{const u=ke,c=n("icon-drive-file");return d.hasChildren&&d.expanded?(_(),z(u,{key:0,class:"switcher-icon",name:"plus-square",size:16})):d.hasChildren&&!d.expanded?(_(),z(u,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(_(),z(c,{key:2,size:16}))}}}),ce=d=>($e("data-v-e6d4a6b6"),d=d(),ze(),d),xt=ce(()=>I("span",null,"新增",-1)),bt=ce(()=>I("span",null,"编辑",-1)),Ct=ce(()=>I("span",null,"移动",-1)),$t=ce(()=>I("span",null,"删除",-1)),zt=A({__name:"RightMenu",props:{treeData:null},emits:["click"],setup(d,{emit:f}){const l=u=>{f("click",u)};return(u,c)=>{const r=n("icon-plus-circle"),s=n("a-menu-item"),h=n("icon-edit"),p=n("icon-export"),C=n("icon-right"),T=n("a-space"),b=ke,M=n("a-tree"),S=n("a-scrollbar"),x=n("a-popover"),y=n("icon-delete"),D=n("a-menu");return _(),z(D,{class:"menu"},{default:t(()=>[e(s,{onClick:c[0]||(c[0]=a=>l("add"))},{icon:t(()=>[e(r,{size:16,"stroke-width":3})]),default:t(()=>[xt]),_:1}),e(s,{onClick:c[1]||(c[1]=a=>l("edit"))},{icon:t(()=>[e(h,{size:16,"stroke-width":3})]),default:t(()=>[bt]),_:1}),e(x,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(S,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(M,{ref:"treeMoveRef","show-line":"",size:"mini",data:d.treeData[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((a,{checked:v,selected:i,expanded:o})=>[e(Ve,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(_(),z(b,{key:1,name:"com-file-open",size:16})):(_(),z(b,{key:2,name:"com-file",size:16})):(_(),z(b,{key:0,name:"com-file-close",size:16}))]),_:1},8,["data"])]),_:1})]),default:t(()=>[e(s,{onClick:c[2]||(c[2]=a=>l("move"))},{icon:t(()=>[e(p,{size:16,"stroke-width":3})]),default:t(()=>[e(T,{size:18},{default:t(()=>[Ct,e(C)]),_:1})]),_:1})]),_:1}),e(s,{onClick:c[3]||(c[3]=a=>l("delete"))},{icon:t(()=>[e(y,{size:16,"stroke-width":3})]),default:t(()=>[$t]),_:1})]),_:1})}}});const It=X(zt,[["__scopeId","data-v-e6d4a6b6"]]),Tt={class:"cate-tree"},Vt={class:"search-wrap"},St={class:"wrap"},Dt=A({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"请输入关键词"}},emits:["node-click"],setup(d,{emit:f}){const l=g(!1),u=g(),c=g(""),r=g([]),s=()=>{f("node-click")};(async()=>{try{l.value=!0;const C=await Ie();C.success&&(r.value=C.data,Z(()=>{u.value.expandAll()}))}catch(C){return C}finally{l.value=!1}})();const p=C=>{C!=="move"&&q.info(C)};return(C,T)=>{const b=n("icon-search"),M=n("a-input"),S=ke,x=n("a-trigger"),y=n("a-tree"),D=n("a-scrollbar");return _(),O("div",Tt,[I("div",Vt,[e(M,{"allow-clear":"",maxlength:20,placeholder:d.placeholder,modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=a=>c.value=a)},{prefix:t(()=>[e(b)]),_:1},8,["placeholder","modelValue"])]),I("div",St,[e(D,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(y,{ref_key:"treeRef",ref:u,"show-line":"",size:"mini",data:r.value,fieldNames:{key:"id"},onSelect:s},{"switcher-icon":t((a,{checked:v,selected:i,expanded:o})=>[e(Ve,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(_(),z(S,{key:1,name:"com-file-open",size:16})):(_(),z(S,{key:2,name:"com-file",size:16})):(_(),z(S,{key:0,name:"com-file-close",size:16}))]),title:t(a=>[e(x,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(It,{"tree-data":r.value,onClick:p},null,8,["tree-data"])]),default:t(()=>[I("div",null,H(a.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Mt=X(Dt,[["__scopeId","data-v-c24df243"]]),Nt={class:"data-pane"},Rt={class:"gi_box pane-left"},At={class:"gi_box pane-right"},Ot={class:"content"},Pt={class:"table-box"},Et=A({name:"DataManage"}),Ut=A({...Et,setup(d){const f=fe(),{pagination:l,setTotal:u}=ve(()=>p()),c=se({name:"",status:""}),r=g([]),s=g(!1),h=i=>i<30?"danger":i<60?"warning":"success",p=async()=>{try{s.value=!0;const i=await ye({...c,current:l.current,pageSize:l.pageSize});r.value=i.data.list,u(i.data.total)}catch(i){return i}finally{s.value=!1}};ge(()=>{p()});const C=()=>{he.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{r.value=[]}})},T=g(),b=()=>{var i;(i=T.value)==null||i.add()},M=i=>{var o;(o=T.value)==null||o.edit(i.id)},S=()=>{f.push({path:"/data/detail"})},x=i=>{q.success("删除成功"),p()},y=()=>{if(!D.value.length)return q.warning("请勾选数据");q.success("点击了导出")},D=g([]),a=i=>{D.value=i},v=i=>{D.value=i?r.value.map(o=>o.id):[]};return(i,o)=>{const w=be,U=n("icon-plus"),N=n("a-button"),V=n("icon-delete"),P=n("icon-export"),G=n("a-space"),L=n("a-option"),ee=n("a-select"),te=n("a-input"),ne=n("icon-search"),E=n("a-input-group"),oe=n("icon-refresh"),re=n("a-row"),W=n("a-table-column"),ue=n("a-progress"),de=n("a-tag"),_e=n("a-popconfirm"),pe=n("a-table");return _(),O("div",Nt,[I("section",Rt,[e(w,{title:"数据分类"}),e(Mt,{placeholder:"请输入搜索关键词",onNodeClick:o[0]||(o[0]=m=>R(l).onChange(1))})]),I("section",At,[e(w,{title:"数据列表"}),I("div",Ot,[e(re,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(G,null,{default:t(()=>[e(N,{type:"primary",onClick:b},{icon:t(()=>[e(U)]),_:1}),e(N,{type:"primary",status:"danger",onClick:C},{icon:t(()=>[e(V)]),default:t(()=>[k("删除")]),_:1}),e(N,{type:"primary",status:"success",onClick:y},{icon:t(()=>[e(P)]),_:1})]),_:1}),e(G,null,{default:t(()=>[e(ee,{modelValue:c.status,"onUpdate:modelValue":o[1]||(o[1]=m=>c.status=m),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:t(()=>[(_(!0),O(j,null,Q(R(le),m=>(_(),z(L,{key:m.value,value:m.value},{default:t(()=>[k(H(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(E,null,{default:t(()=>[e(te,{modelValue:c.name,"onUpdate:modelValue":o[2]||(o[2]=m=>c.name=m),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(N,{type:"primary",onClick:p},{default:t(()=>[e(ne)]),_:1})]),_:1}),e(N,{type:"primary",onClick:p},{icon:t(()=>[e(oe)]),_:1})]),_:1})]),_:1}),I("section",Pt,[e(pe,{"row-key":"id",size:"small",loading:s.value,bordered:{cell:!0},data:r.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:R(l),onSelect:a,onSelectAll:v},{columns:t(()=>[e(W,{title:"序号",width:68},{cell:t(m=>[k(H(m.rowIndex+1),1)]),_:1}),e(W,{title:"姓名","data-index":"name"}),e(W,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),e(W,{title:"比例",width:200},{cell:t(({record:m})=>[e(ue,{status:h(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),_:1}),e(W,{title:"状态",width:100,align:"center"},{cell:t(({record:m})=>[(_(!0),O(j,null,Q(R(le),B=>(_(),O(j,{key:B.value},[B.value===m.status?(_(),z(de,{key:0,size:"small",color:B.color},{default:t(()=>[k(H(B.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),_:1}),e(W,{title:"创建时间","data-index":"createTime",width:180}),e(W,{title:"操作",width:200,align:"center",fixed:"right"},{cell:t(({record:m})=>[e(G,null,{default:t(()=>[e(N,{type:"primary",size:"mini",onClick:B=>M(m)},{default:t(()=>[k("修改")]),_:2},1032,["onClick"]),e(N,{size:"mini",onClick:S},{default:t(()=>[k("详情")]),_:1}),e(_e,{type:"warning",content:"您确定要删除该项吗?",onOk:B=>x(m.id)},{default:t(()=>[e(N,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[k("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination"])])])]),e(Te,{ref_key:"EditModalRef",ref:T},null,512)])}}}),Bt={class:"data-pane3"},Gt={class:"content"},Ht={class:"table-box"},Wt=A({__name:"Pane3",setup(d){fe();const f=[{title:"序号",width:68,slotName:"index"},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",slotName:"proportion",width:68,align:"center"},{title:"状态",slotName:"status",width:100,align:"center"},{title:"操作",slotName:"operation",width:200,align:"center"}],{pagination:l,setTotal:u}=ve(()=>s()),c=g([]),r=g(!1),s=async()=>{r.value=!0;const b=await ye({current:l.current,pageSize:l.pageSize});b.success&&(c.value=b.data.list,u(b.data.total)),r.value=!1};ge(()=>{s()});const h=b=>b<30?"danger":b<60?"warning":"success",p=g([]),C=b=>{p.value=b},T=b=>{p.value=b?c.value.map(M=>M.id):[]};return(b,M)=>{const S=n("a-breadcrumb-item"),x=n("a-breadcrumb"),y=n("a-button"),D=n("a-space"),a=n("a-row"),v=n("a-progress"),i=n("a-tag"),o=n("icon-edit"),w=n("icon-delete"),U=n("a-popconfirm"),N=n("a-table");return _(),O("div",Bt,[e(a,{justify:"space-between",align:"center",class:"head"},{default:t(()=>[e(x,null,{default:t(()=>[e(S,null,{default:t(()=>[k("首页")]),_:1}),e(S,null,{default:t(()=>[k("数据管理")]),_:1}),e(S,null,{default:t(()=>[k("单位管理")]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(y,null,{default:t(()=>[k("重置")]),_:1}),e(y,{type:"primary"},{default:t(()=>[k("提交")]),_:1})]),_:1})]),_:1}),I("section",Gt,[I("section",Ht,[e(N,{"row-key":"id",size:"small",loading:r.value,bordered:{cell:!0},columns:f,data:c.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:R(l),onSelect:C,onSelectAll:T},{index:t(({rowIndex:V})=>[k(H(V+1),1)]),proportion:t(({record:V})=>[e(v,{size:"mini",status:h(V.proportion),percent:V.proportion/100},null,8,["status","percent"])]),status:t(({record:V})=>[(_(!0),O(j,null,Q(R(le),P=>(_(),O(j,{key:P.value},[P.value===V.status?(_(),z(i,{key:0,size:"small",color:P.color},{default:t(()=>[k(H(P.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:V})=>[e(D,null,{default:t(()=>[e(y,{type:"primary",size:"mini"},{default:t(()=>[e(o)]),_:1}),e(y,{size:"mini"},{default:t(()=>[k("详情")]),_:1}),e(U,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(y,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[e(w)]),_:1})]),_:1})]),_:1})]),_:1},8,["loading","data","pagination"])])])])}}});const jt=X(Wt,[["__scopeId","data-v-2a075f25"]]),qt={class:"manage"},Lt={class:"tab"},Ft=A({name:"DataManage"}),vn=A({...Ft,setup(d){const f={1:kt,2:Ut,3:jt},l=g(2);return(u,c)=>{const r=n("a-tab-pane"),s=n("a-tabs");return _(),O("div",qt,[I("section",Lt,[e(s,{"hide-content":"",size:"medium","active-key":l.value,"onUpdate:active-key":c[0]||(c[0]=h=>l.value=h)},{default:t(()=>[(_(),z(r,{key:1,title:"周期管理"})),(_(),z(r,{key:2,title:"维度管理"})),(_(),z(r,{key:3,title:"单位管理"}))]),_:1},8,["active-key"])]),e(xe,{name:"fade-slide",mode:"out-in",appear:""},{default:t(()=>[(_(),z(Ue,null,[(_(),z(Be(f[l.value])))],1024))]),_:1})])}}});export{vn as default};
