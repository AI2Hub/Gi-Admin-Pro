import{L as e,M as n,eF as t,eG as l,eu as o,d as a,eD as i,G as s,eA as u,eH as d,g as c,z as m,eI as r,r as p,o as f,c as h,a as v,w as y,f as _,F as g,b as C,u as b,e as w,J as j,t as k,E as I,W as F,X as M,N as x,R as T,i as N,p as L,j as B,h as D,_ as E}from"./index-e0f7d8a5.js";import{f as G,i as R}from"./file-map-2a15779f.js";import{a as q}from"./index.es-48c497b5.js";/* empty css               */import H from"./FileNavPath-c8823b23.js";import S from"./FileGrid-a618af4c.js";import z from"./FileList-2d664cc0.js";import{_ as P}from"./Dialog.vue_vue_type_script_setup_true_lang-38169928.js";import V from"./Dialog-c18f4d6b.js";import $ from"./Dialog-f0f07e52.js";import A from"./Dialog-e9c9badd.js";import"./FileImg-a1badd95.js";import"./FileRightMenu-228d1601.js";let J=null,O=null;function Q(e){null!==J&&J.unmount(),null!==O&&document.body.removeChild(O),O=document.createElement("div"),document.body.appendChild(O),J=t(P,{fileInfo:e,onCancel:()=>{setTimeout((()=>{!function(){null!==J&&J.unmount();null!==O&&document.body.removeChild(O)}(),J=null,O=null}),500)}}).use(l).use(o),J.mount(O)}let W=null,X=null;function K(e){null!==W&&W.unmount(),null!==X&&document.body.removeChild(X),X=document.createElement("div"),document.body.appendChild(X),W=t(V,{fileInfo:e,onCancel:()=>{setTimeout((()=>{!function(){null!==W&&W.unmount();null!==X&&document.body.removeChild(X)}(),W=null,X=null}),500)}}).use(l).use(o),W.mount(X)}const U=e=>(L("data-v-1756481f"),e=e(),B(),e),Y={class:"file-main"},Z=U((()=>D("span",null,"上传文件",-1))),ee=U((()=>D("span",null,"上传文件夹",-1))),ne=E(a({__name:"index",setup(a){var L;const B=i(),D=s(),{width:E}=u(),P=d(),V=c(!1),J=c([]),O=c("0");O.value=(null==(L=B.query.fileType)?void 0:L.toString())||"0";const W=async()=>{try{V.value=!0,X.value=!1;const l=await(t={fileType:O.value},e.get(`${n}/file/list`,t));J.value=l.data.list}catch(l){return l}finally{V.value=!1}var t};m((()=>{W()})),r((e=>{var n;e.query.fileType&&(O.value=null==(n=e.query.fileType)?void 0:n.toString(),W())}));const X=c(!1),U=e=>{if(x.success(`点击了文件-${e.name}`),R.includes(e.extendName)&&e.src){const n=J.value.filter((e=>R.includes(e.extendName))).map((e=>e.src||"")),t=n.findIndex((n=>n===e.src));n.length&&q({options:{initialViewIndex:t},images:n})}"mp4"===e.extendName&&Q(e),"mp3"===e.extendName&&K(e)},ne=e=>{P.addSelectedFileItem(e)},te=(e,n)=>{x.success("点击了"+e),"delete"===e&&T.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),"rename"===e&&function(e){const n=document.createElement("div");document.body.appendChild(n);const a=t($,{fileInfo:e,onClose:()=>{setTimeout((()=>{a.unmount(),document.body.removeChild(n)}),350)}});a.use(l),a.use(o),a.mount(n)}(n),"move"===e&&function(e){const n=document.createElement("div");document.body.appendChild(n);const a=t(A,{fileInfo:e,onClose:()=>{setTimeout((()=>{a.unmount(),document.body.removeChild(n)}),350)}});a.use(l),a.use(o),a.mount(n)}(n),"detail"===e&&D.push({path:"/file/detail"})},le=()=>{T.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,n)=>{const t=p("icon-upload"),l=p("a-button"),o=N,a=p("a-doption"),i=p("a-dropdown"),s=p("a-option"),u=p("a-select"),d=p("a-input"),c=p("icon-search"),m=p("a-input-group"),r=p("a-space"),x=p("icon-delete"),T=p("icon-select-all"),L=p("icon-swap"),B=p("a-tooltip"),D=p("icon-filter"),R=p("icon-apps"),q=p("icon-list"),$=p("a-button-group"),A=p("a-row"),O=p("a-empty"),Q=p("a-spin");return f(),h("div",Y,[v(H),v(A,{justify:"space-between",class:"row-operate"},{default:y((()=>[v(r,null,{default:y((()=>[v(i,null,{content:y((()=>[v(a,null,{icon:y((()=>[v(o,{name:"upload-file"})])),default:y((()=>[Z])),_:1}),v(a,null,{icon:y((()=>[v(o,{name:"upload-folder"})])),default:y((()=>[ee])),_:1})])),default:y((()=>[v(l,{type:"primary",shape:"round"},{icon:y((()=>[v(t)])),default:y((()=>[_("上传")])),_:1})])),_:1}),v(m,null,{default:y((()=>[v(u,{style:{width:"150px"},placeholder:"请选择"},{default:y((()=>[(f(!0),h(g,null,C(b(G),(e=>(f(),w(s,{key:e.value},{icon:y((()=>[(f(),w(j(e.icon),{size:"18",color:"#999"}))])),default:y((()=>[_(k(e.name),1)])),_:2},1024)))),128))])),_:1}),v(d,{placeholder:"请输入关键词...","allow-clear":""}),v(l,{type:"primary"},{icon:y((()=>[v(c)])),default:y((()=>[_("搜索")])),_:1})])),_:1})])),_:1}),b(E)>715?(f(),w(r,{key:0},{default:y((()=>[b(X)?(f(),w(l,{key:0,disabled:!b(P).selectedFileIdList.length,type:"primary",status:"danger",onClick:le},{icon:y((()=>[v(x)])),_:1},8,["disabled"])):I("",!0),v(l,{type:"primary",onClick:n[0]||(n[0]=e=>X.value=!b(X))},{icon:y((()=>[v(T)])),default:y((()=>[_(k(b(X)?"取消批量":"批量操作"),1)])),_:1}),v($,null,{default:y((()=>[v(B,{content:"传输列表",position:"bottom"},{default:y((()=>[v(l,{onClick:n[1]||(n[1]=e=>V.value=!b(V))},{icon:y((()=>[v(L)])),_:1})])),_:1}),v(B,{content:"排序",position:"bottom"},{default:y((()=>[v(l,null,{icon:y((()=>[v(D)])),_:1})])),_:1}),v(B,{content:"视图",position:"bottom"},{default:y((()=>[v(l,{onClick:b(P).changeViewMode},{icon:y((()=>["grid"===b(P).viewMode?(f(),w(R,{key:0})):(f(),w(q,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):I("",!0)])),_:1}),v(Q,{class:"file-wrap",loading:b(V)},{default:y((()=>[F(v(S,{data:b(J),isBatchMode:b(X),selectedFileIdList:b(P).selectedFileIdList,onClick:U,onCheck:ne,onRightMenuClick:te},null,8,["data","isBatchMode","selectedFileIdList"]),[[M,b(J).length&&"grid"==b(P).viewMode]]),F(v(z,{data:b(J),isBatchMode:b(X),onClick:U,onRightMenuClick:te},null,8,["data","isBatchMode"]),[[M,b(J).length&&"list"==b(P).viewMode]]),F(v(O,null,null,512),[[M,!b(J).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-1756481f"]]);export{ne as default};
