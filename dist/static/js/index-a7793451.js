import{_ as a}from"./AddDeptModal.vue_vue_type_script_setup_true_lang-77de8aa6.js";import{d as e,g as t,N as l,r as n,o as d,c as i,a as s,w as o,u,f as r,h as c,e as p,E as m,C as _,p as f,j as y,_ as v}from"./index-06cb2dae.js";import{g as x}from"./index-18740acb.js";import"./useDept-36b026ba.js";const h=a=>(f("data-v-db0254af"),a=a(),y(),a),w={class:"dept-manage"},g=h((()=>c("span",null,"搜索",-1))),k=h((()=>c("span",null,"重置",-1))),b=h((()=>c("span",null,"新增",-1))),C=h((()=>c("span",null,"删除",-1))),V={class:"table-box"},j=v(e({name:"SystemDept",__name:"index",setup(e){const f=t(),y=t(),v=l({name:"",status:""}),h=t(!1),j=t([]),D=async()=>{try{h.value=!0;const a=await x();j.value=a.data,_((()=>{var a;null==(a=y.value)||a.expandAll(!0)}))}catch(a){}finally{h.value=!1}};D();const I=()=>{D()},z=()=>{v.name="",v.status="",D()},A=()=>{var a;null==(a=f.value)||a.add()};return(e,t)=>{const l=n("a-input"),_=n("a-option"),x=n("a-select"),D=n("icon-search"),R=n("a-button"),M=n("icon-refresh"),T=n("a-space"),U=n("icon-plus"),E=n("icon-delete"),N=n("a-row"),O=n("IconDown"),P=n("IconRight"),Q=n("a-table-column"),S=n("icon-edit"),W=n("a-popconfirm"),q=n("a-table"),B=n("a-card");return d(),i("div",w,[s(B,{title:"部门管理"},{default:o((()=>[s(T,null,{default:o((()=>[s(l,{modelValue:u(v).name,"onUpdate:modelValue":t[0]||(t[0]=a=>u(v).name=a),placeholder:"输入部门名称搜索","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"]),s(x,{modelValue:u(v).status,"onUpdate:modelValue":t[1]||(t[1]=a=>u(v).status=a),placeholder:"部门状态",style:{width:"120px"}},{default:o((()=>[s(_,{value:1},{default:o((()=>[r("正常")])),_:1}),s(_,{value:0},{default:o((()=>[r("禁用")])),_:1})])),_:1},8,["modelValue"]),s(T,null,{default:o((()=>[s(R,{type:"primary",onClick:I},{icon:o((()=>[s(D)])),default:o((()=>[g])),_:1}),s(R,{onClick:z},{icon:o((()=>[s(M)])),default:o((()=>[k])),_:1})])),_:1})])),_:1}),s(N,{class:"btns"},{default:o((()=>[s(T,null,{default:o((()=>[s(R,{type:"primary",onClick:A},{icon:o((()=>[s(U)])),default:o((()=>[b])),_:1}),s(R,{type:"primary",status:"danger"},{icon:o((()=>[s(E)])),default:o((()=>[C])),_:1})])),_:1})])),_:1}),c("section",V,[s(q,{loading:u(h),ref_key:"TableRef",ref:y,"row-key":"id",data:u(j),scroll:{x:"100%",y:"100%",minWidth:900},pagination:!1,expandable:{width:80}},{"expand-icon":o((({expanded:a})=>[a?(d(),p(O,{key:0})):(d(),p(P,{key:1}))])),columns:o((()=>[s(Q,{title:"部门名称","data-index":"name"}),s(Q,{title:"排序","data-index":"sort",width:100}),s(Q,{title:"创建时间","data-index":"createTime",width:200}),s(Q,{title:"操作",width:150,align:"left"},{cell:o((({record:a})=>[s(T,null,{default:o((()=>[s(R,{type:"primary",size:"mini",onClick:e=>{return t=a,void(null==(l=f.value)||l.edit(t.id));var t,l}},{icon:o((()=>[s(S)])),_:2},1032,["onClick"]),a.parentId?(d(),p(R,{key:0,type:"primary",status:"success",size:"mini",onClick:t[2]||(t[2]=a=>A())},{icon:o((()=>[s(U)])),_:1})):m("",!0),s(W,{type:"warning",content:"您确定要删除该项吗?"},{default:o((()=>[s(R,{type:"primary",status:"danger",size:"mini"},{icon:o((()=>[s(E)])),_:1})])),_:1})])),_:2},1024)])),_:1})])),_:1},8,["loading","data"])])])),_:1}),s(a,{ref_key:"AddDeptModalRef",ref:f},null,512)])}}}),[["__scopeId","data-v-db0254af"]]);export{j as default};
