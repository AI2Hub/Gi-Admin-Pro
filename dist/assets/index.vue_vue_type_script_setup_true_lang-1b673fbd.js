import{d as S,g as x,r as v,o as I,c as _,a as W,u as q,Q as w}from"./index-080ea662.js";const N=[{id:"7e05bd5a227a5c5c05054b41d5e4c82c",parentId:"0",parentName:null,name:"一级指标（实施考核）",level:1,quotaWeight:60,selfScore:120,deptScore:null,children:[{id:"784f95270c4c6139194dd40a29fb15dc",parentId:"7e05bd5a227a5c5c05054b41d5e4c82c",parentName:"一级指标（实施考核）",name:"二级指标（实施考核）",level:2,quotaWeight:40,selfScore:30,deptScore:null,children:[{id:"7d8c544d388823c6c1c588ee3ac0f10d",parentId:"784f95270c4c6139194dd40a29fb15dc",parentName:"二级指标（实施考核）",name:"三级指标（实施考核）",level:3,quotaWeight:30,selfScore:20,deptScore:null,children:[{id:"5e91a2eac4b7f340d90a6d7bc294d83d",children:[],parentId:"7d8c544d388823c6c1c588ee3ac0f10d",parentName:"三级指标（实施考核）",name:"四级指标（实施考核）1",level:4,quotaWeight:80,selfScore:8,deptScore:68},{id:"5e91a2eac4b7f340d90a6d7bc294d84d",children:[],parentId:"7d8c544d388823c6c1c588ee3ac0f10d",parentName:"三级指标（实施考核）",name:"四级指标（实施考核）2",level:4,quotaWeight:21,selfScore:3,deptScore:70}]},{id:"7d8c544d388823c6c1c588ee3ac5560d",parentId:"784f95270c4c6139194dd40a29fb15dc",parentName:"二级指标（实施考核）",name:"三级指标（实施考核）1",level:3,quotaWeight:30,selfScore:20,deptScore:75,children:[{id:"5e91a2eac4b7f340d90a6d7bc294d56d",children:[],parentId:"7d8c544d388823c6c1c588ee3ac5560d",parentName:"三级指标（实施考核）",name:"四级指标（实施考核）3",level:4,quotaWeight:25,selfScore:5,deptScore:90}]}]}]}],k={class:"table-box"},C=S({__name:"index",setup(y){const n=x([]),h=[{title:"一级指标",dataIndex:"name1"},{title:"二级指标",dataIndex:"name2"},{title:"三级指标",dataIndex:"name3"},{title:"四级指标",dataIndex:"name4"},{title:"权重分",dataIndex:"quotaWeight",width:100},{title:"自评分",dataIndex:"selfScore",width:100},{title:"处室评分（百分制）",dataIndex:"deptScore",fixed:"right"}],u=o=>{console.log("treeData",o);const t={children:"children"},a=[],p={};return w.eachTree(o,(e,r,s,i,c)=>{if(p[e.id]=e,e.keys=c?c.keys.concat([e.id]):[e.id],!e.children||!e.children.length){console.log(`item${e.name}`,e),console.log("parent",c),console.log("-------------------");const d={};e.keys.forEach((b,g)=>{const f=g+1,l=p[b];d[`id${f}`]=l.id,d[`name${f}`]=l.name,f==4&&(d.quotaWeight=l.quotaWeight,d.selfScore=l.selfScore,d.deptScore=l.deptScore)}),a.push(d)}},t),console.log("list",a),a},m=({record:o,rowIndex:t,column:a,columnIndex:p})=>{const e=["name1","name2","name3"],r=o[a.dataIndex];if(r&&e.includes(a.dataIndex)){const s=n.value[t-1];console.log("上一行prevRow",s);let i=n.value[t+1];if(s&&s[a.dataIndex]===r)return{rowspan:0,colspan:0};{let c=1;for(;i&&i[a.dataIndex]===r;)i=n.value[++c+t];if(c>1)return{rowspan:c,colspan:1}}}};return n.value=u(N),(o,t)=>{const a=v("a-table");return I(),_("div",k,[W(a,{hoverable:!1,scroll:{x:"100%",y:"100%",minWidth:1e3},bordered:{cell:!0},columns:h,data:q(n),pagination:!1,"span-method":m},null,8,["data"])])}}});export{C as _};
