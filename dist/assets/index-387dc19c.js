import{L as e,M as n,eG as t,eH as l,eu as o,d as a,eE as i,G as s,eB as u,eI as d,g as c,z as m,eJ as r,r as p,o as f,c as h,a as v,w as y,f as _,F as g,b as C,u as b,e as w,J as I,t as j,E as k,W as M,X as x,N as F,R as T,i as E,p as L,j as N,h as B,_ as R}from"./index-1c0140d4.js";import{f as D,i as G}from"./file-map-2a15779f.js";import{a as J}from"./index.es-d09ff73b.js";/* empty css               */import S from"./FileNavPath-642605be.js";import q from"./FileGrid-a6ce182b.js";import H from"./FileList-5fa94b38.js";import{_ as z}from"./Dialog.vue_vue_type_script_setup_true_lang-d9269958.js";import P from"./Dialog-d9b1aeb3.js";import V from"./Dialog-db9d084a.js";import $ from"./Dialog-64ea2206.js";import"./FileImg-c670dd51.js";import"./FileRightMenu-f7dd87d5.js";let O=null,Q=null;function W(e){null!==O&&O.unmount(),null!==Q&&document.body.removeChild(Q),Q=document.createElement("div"),document.body.appendChild(Q),O=t(z,{fileInfo:e,onCancel:()=>{setTimeout((()=>{!function(){null!==O&&O.unmount();null!==Q&&document.body.removeChild(Q)}(),O=null,Q=null}),500)}}).use(l).use(o),O.mount(Q)}let X=null,A=null;function K(e){null!==X&&X.unmount(),null!==A&&document.body.removeChild(A),A=document.createElement("div"),document.body.appendChild(A),X=t(P,{fileInfo:e,onCancel:()=>{setTimeout((()=>{!function(){null!==X&&X.unmount();null!==A&&document.body.removeChild(A)}(),X=null,A=null}),500)}}).use(l).use(o),X.mount(A)}const U=e=>(L("data-v-1756481f"),e=e(),N(),e),Y={class:"file-main"},Z=U((()=>B("span",null,"上传文件",-1))),ee=U((()=>B("span",null,"上传文件夹",-1))),ne=R(a({__name:"index",setup(a){var L;const N=i(),B=s(),{width:R}=u(),z=d(),P=c(!1),O=c([]),Q=c("0");Q.value=(null==(L=N.query.fileType)?void 0:L.toString())||"0";const X=async()=>{try{P.value=!0,A.value=!1;const l=await(t={fileType:Q.value},e.get(`${n}/file/list`,t));O.value=l.data.list}catch(l){return l}finally{P.value=!1}var t};m((()=>{X()})),r((e=>{var n;e.query.fileType&&(Q.value=null==(n=e.query.fileType)?void 0:n.toString(),X())}));const A=c(!1),U=e=>{if(F.success(`点击了文件-${e.name}`),G.includes(e.extendName)&&e.src){const n=O.value.filter((e=>G.includes(e.extendName))).map((e=>e.src||"")),t=n.findIndex((n=>n===e.src));n.length&&J({options:{initialViewIndex:t},images:n})}"mp4"===e.extendName&&W(e),"mp3"===e.extendName&&K(e)},ne=e=>{z.addSelectedFileItem(e)},te=(e,n)=>{F.success("点击了"+e),"delete"===e&&T.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),"rename"===e&&function(e){const n=document.createElement("div");document.body.appendChild(n);const a=t(V,{fileInfo:e,onClose:()=>{setTimeout((()=>{a.unmount(),document.body.removeChild(n)}),350)}});a.use(l),a.use(o),a.mount(n)}(n),"move"===e&&function(e){const n=document.createElement("div");document.body.appendChild(n);const a=t($,{fileInfo:e,onClose:()=>{setTimeout((()=>{a.unmount(),document.body.removeChild(n)}),350)}});a.use(l),a.use(o),a.mount(n)}(n),"detail"===e&&B.push({path:"/file/detail"})},le=()=>{T.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,n)=>{const t=p("icon-upload"),l=p("a-button"),o=E,a=p("a-doption"),i=p("a-dropdown"),s=p("a-option"),u=p("a-select"),d=p("a-input"),c=p("icon-search"),m=p("a-input-group"),r=p("a-space"),F=p("icon-delete"),T=p("icon-select-all"),L=p("icon-swap"),N=p("a-tooltip"),B=p("icon-filter"),G=p("icon-apps"),J=p("icon-list"),V=p("a-button-group"),$=p("a-row"),Q=p("a-empty"),W=p("a-spin");return f(),h("div",Y,[v(S),v($,{justify:"space-between",class:"row-operate"},{default:y((()=>[v(r,null,{default:y((()=>[v(i,null,{content:y((()=>[v(a,null,{icon:y((()=>[v(o,{name:"upload-file"})])),default:y((()=>[Z])),_:1}),v(a,null,{icon:y((()=>[v(o,{name:"upload-folder"})])),default:y((()=>[ee])),_:1})])),default:y((()=>[v(l,{type:"primary",shape:"round"},{icon:y((()=>[v(t)])),default:y((()=>[_("上传")])),_:1})])),_:1}),v(m,null,{default:y((()=>[v(u,{style:{width:"150px"},placeholder:"请选择"},{default:y((()=>[(f(!0),h(g,null,C(b(D),(e=>(f(),w(s,{key:e.value},{icon:y((()=>[(f(),w(I(e.icon),{size:"18",color:"#999"}))])),default:y((()=>[_(j(e.name),1)])),_:2},1024)))),128))])),_:1}),v(d,{placeholder:"请输入关键词...","allow-clear":""}),v(l,{type:"primary"},{icon:y((()=>[v(c)])),default:y((()=>[_("搜索")])),_:1})])),_:1})])),_:1}),b(R)>715?(f(),w(r,{key:0},{default:y((()=>[b(A)?(f(),w(l,{key:0,disabled:!b(z).selectedFileIdList.length,type:"primary",status:"danger",onClick:le},{icon:y((()=>[v(F)])),_:1},8,["disabled"])):k("",!0),v(l,{type:"primary",onClick:n[0]||(n[0]=e=>A.value=!b(A))},{icon:y((()=>[v(T)])),default:y((()=>[_(j(b(A)?"取消批量":"批量操作"),1)])),_:1}),v(V,null,{default:y((()=>[v(N,{content:"传输列表",position:"bottom"},{default:y((()=>[v(l,{onClick:n[1]||(n[1]=e=>P.value=!b(P))},{icon:y((()=>[v(L)])),_:1})])),_:1}),v(N,{content:"排序",position:"bottom"},{default:y((()=>[v(l,null,{icon:y((()=>[v(B)])),_:1})])),_:1}),v(N,{content:"视图",position:"bottom"},{default:y((()=>[v(l,{onClick:b(z).changeViewMode},{icon:y((()=>["grid"===b(z).viewMode?(f(),w(G,{key:0})):(f(),w(J,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):k("",!0)])),_:1}),v(W,{class:"file-wrap",loading:b(P)},{default:y((()=>[M(v(q,{data:b(O),isBatchMode:b(A),selectedFileIdList:b(z).selectedFileIdList,onClick:U,onCheck:ne,onRightMenuClick:te},null,8,["data","isBatchMode","selectedFileIdList"]),[[x,b(O).length&&"grid"==b(z).viewMode]]),M(v(H,{data:b(O),isBatchMode:b(A),onClick:U,onRightMenuClick:te},null,8,["data","isBatchMode"]),[[x,b(O).length&&"list"==b(z).viewMode]]),M(v(Q,null,null,512),[[x,!b(O).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-1756481f"]]);export{ne as default};
