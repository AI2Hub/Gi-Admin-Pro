import"./index-03184213.js";import"./index-a25f1d51.js";import{u as L}from"./useApiSystem-fceced91.js";import{f as M,h as x,j as F,J as S,r as o,o as p,c as m,w as t,a as e,u as E,V as r,d as G,b as f,i as H,p as K,e as O,_ as P}from"./_plugin-vue_export-helper-e17621df.js";import"./index-faa9367c.js";import"./vue-router-d5bba377.js";import"./runtime-dom.esm-bundler-aa2e2a76.js";import"./index-0c1638bc.js";const Q=M({__name:"EditDeptModal",setup(v,{expose:k}){const y=x(""),c=x(!1),I=F(()=>y.value?"编辑部门":"新增部门"),{deptList:i,getDeptList:C}=L(),n=S({id:"",parentId:"",name:"",sort:0,status:1});return k({add:()=>{y.value="",c.value=!0},edit:async _=>{i.value.length||await C(),y.value=_,c.value=!0}}),(_,a)=>{const U=o("a-tree-select"),s=o("a-form-item"),b=o("a-input"),R=o("a-input-number"),h=o("a-radio"),u=o("a-radio-group"),z=o("a-form"),w=o("a-modal");return p(),m(w,{visible:c.value,"onUpdate:visible":a[4]||(a[4]=l=>c.value=l),title:E(I)},{default:t(()=>[e(z,{ref:"formRef",model:n,size:"medium","auto-label-width":""},{default:t(()=>[e(s,{label:"上级部门",name:"parentId"},{default:t(()=>[e(U,{modelValue:n.parentId,"onUpdate:modelValue":a[0]||(a[0]=l=>n.parentId=l),"allow-clear":"",data:E(i),placeholder:"请选择",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["modelValue","data"])]),_:1}),e(s,{label:"部门名称",field:"name",rules:[{required:!0,message:"请输入部门名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],"validate-trigger":["change","input"]},{default:t(()=>[e(b,{modelValue:n.name,"onUpdate:modelValue":a[1]||(a[1]=l=>n.name=l),placeholder:"请输入部门名称","allow-clear":""},null,8,["modelValue"])]),_:1}),e(s,{label:"排序",name:"sort",rules:[{required:!0,message:"请输入排序序号"}]},{default:t(()=>[e(R,{modelValue:n.sort,"onUpdate:modelValue":a[2]||(a[2]=l=>n.sort=l),style:{width:"120px"}},null,8,["modelValue"])]),_:1}),e(s,{label:"状态",name:"status"},{default:t(()=>[e(u,{modelValue:n.status,"onUpdate:modelValue":a[3]||(a[3]=l=>n.status=l)},{default:t(()=>[e(h,{value:1},{default:t(()=>[r("正常")]),_:1}),e(h,{value:0},{default:t(()=>[r("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),V=v=>(K("data-v-1c37fa6c"),v=v(),O(),v),X={class:"dept-manage"},Y=V(()=>f("span",null,"部门名称",-1)),Z=V(()=>f("span",null,"状态",-1)),ee=V(()=>f("span",null,"搜索",-1)),te=V(()=>f("span",null,"重置",-1)),oe=V(()=>f("span",null,"新增部门",-1)),ae={class:"table-box"},ne=M({name:"DeptManage"}),le=M({...ne,setup(v){const{deptList:k,getDeptList:y}=L(),c=x(),I=x(!1),i=S({name:"",status:""}),C=()=>{y()},n=()=>{i.name="",i.status=""},D=()=>{var _;(_=c.value)==null||_.add()},N=_=>{var a;(a=c.value)==null||a.edit(_.id)};return(_,a)=>{const U=o("a-input"),s=o("a-space"),b=o("a-option"),R=o("a-select"),h=o("icon-search"),u=o("a-button"),z=o("icon-sync"),w=o("icon-plus"),l=o("a-row"),$=o("IconDown"),q=o("IconRight"),g=o("a-table-column"),B=o("a-tag"),A=o("icon-edit"),T=o("icon-delete"),j=o("a-popconfirm"),J=o("a-table");return p(),G("div",X,[e(s,{size:20,class:"head"},{default:t(()=>[e(s,null,{default:t(()=>[Y,e(U,{modelValue:i.name,"onUpdate:modelValue":a[0]||(a[0]=d=>i.name=d),placeholder:"请输入部门名称","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[Z,e(R,{modelValue:i.status,"onUpdate:modelValue":a[1]||(a[1]=d=>i.status=d),placeholder:"部门状态",style:{width:"120px"}},{default:t(()=>[e(b,{value:1},{default:t(()=>[r("正常")]),_:1}),e(b,{value:0},{default:t(()=>[r("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(u,{type:"primary",onClick:C},{icon:t(()=>[e(h)]),default:t(()=>[ee]),_:1}),e(u,{onClick:n},{icon:t(()=>[e(z)]),default:t(()=>[te]),_:1})]),_:1})]),_:1}),e(l,{class:"head"},{default:t(()=>[e(u,{type:"primary",onClick:D},{icon:t(()=>[e(w)]),default:t(()=>[oe]),_:1})]),_:1}),f("section",ae,[e(J,{loading:I.value,ref:"tableRef","row-key":"id",data:E(k),scroll:{x:"100%",y:"100%",minWidth:900},pagination:!1,expandable:{width:80}},{"expand-icon":t(({expanded:d})=>[d?(p(),m($,{key:0})):(p(),m(q,{key:1}))]),columns:t(()=>[e(g,{title:"部门名称","data-index":"name"}),e(g,{title:"排序","data-index":"sort",width:100}),e(g,{title:"状态",width:100},{cell:t(({record:d})=>[d.status==1?(p(),m(B,{key:0,color:"green"},{default:t(()=>[r("正常")]),_:1})):(p(),m(B,{key:1,color:"red"},{default:t(()=>[r("禁用")]),_:1}))]),_:1}),e(g,{title:"创建时间","data-index":"createTime",width:200}),e(g,{title:"操作",width:150,align:"left"},{cell:t(({record:d})=>[e(s,null,{default:t(()=>[e(u,{type:"primary",size:"mini",onClick:W=>N(d)},{icon:t(()=>[e(A)]),_:2},1032,["onClick"]),d.parentId?(p(),m(u,{key:0,type:"primary",status:"success",size:"mini",onClick:a[2]||(a[2]=W=>D())},{icon:t(()=>[e(w)]),_:1})):H("",!0),e(j,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(u,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(T)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["loading","data"])]),e(Q,{ref_key:"EditDeptModalRef",ref:c},null,512)])}}});const re=P(le,[["__scopeId","data-v-1c37fa6c"]]);export{re as default};
