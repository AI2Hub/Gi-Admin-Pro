import{u as e}from"./useDept-87d246a7.js";import{d as a,g as l,l as d,N as t,r as s,o as u,e as i,w as o,a as m,u as n,f as r,H as p}from"./index-a4638611.js";import{b as f}from"./index-cbdc0464.js";import{E as c,P as g}from"./regexp-251ef192.js";const h=a({__name:"AddUserModal",setup(a,{expose:h}){const V=l(""),_=d((()=>V.value?"编辑用户":"新增用户")),b=l(!1),v=t({username:"",nickname:"",email:"",phone:"",gender:1,deptId:"",roleIds:[],address:"",disabled:!1,description:""}),w={username:[{required:!0,message:"请输入用户名"},{min:2,max:4,message:"长度在 2 - 4个字符"}],nickname:[{required:!0,message:"请输入昵称"},{min:2,max:4,message:"长度在 2 - 4个字符"}],email:[{match:c,message:"邮箱格式不正确"}],phone:[{match:g,message:"手机号格式不正确"}],deptId:[{required:!0,message:"请选择所属部门"}]},{deptList:x,getDeptList:U}=e();U();return h({add:()=>{V.value="",b.value=!0},edit:async e=>{V.value=e;const a=await f({id:e});Object.assign(v,a.data),b.value=!0}}),(e,a)=>{const l=s("a-input"),d=s("a-form-item"),t=s("a-col"),f=s("a-row"),c=s("a-radio"),g=s("a-radio-group"),h=s("a-tree-select"),V=s("a-textarea"),U=s("a-form"),k=s("a-modal");return u(),i(k,{visible:n(b),"onUpdate:visible":a[7]||(a[7]=e=>p(b)?b.value=e:null),title:n(_),"mask-closable":!1},{default:o((()=>[m(U,{ref:"formRef",model:n(v),rules:w,size:"medium","auto-label-width":""},{default:o((()=>[m(f,{gutter:16},{default:o((()=>[m(t,{span:12},{default:o((()=>[m(d,{label:"用户名",field:"username","validate-trigger":["change","input"]},{default:o((()=>[m(l,{placeholder:"请输入用户名",modelValue:n(v).username,"onUpdate:modelValue":a[0]||(a[0]=e=>n(v).username=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(t,{span:12},{default:o((()=>[m(d,{label:"昵称",field:"nickname","validate-trigger":["change","input"]},{default:o((()=>[m(l,{placeholder:"请输入昵称",modelValue:n(v).nickname,"onUpdate:modelValue":a[1]||(a[1]=e=>n(v).nickname=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(f,{gutter:16},{default:o((()=>[m(t,{span:12},{default:o((()=>[m(d,{label:"邮箱",field:"email","validate-trigger":["change","input"]},{default:o((()=>[m(l,{placeholder:"请输入邮箱",modelValue:n(v).email,"onUpdate:modelValue":a[2]||(a[2]=e=>n(v).email=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(t,{span:12},{default:o((()=>[m(d,{label:"手机号码",field:"phone","validate-trigger":["change","input"]},{default:o((()=>[m(l,{placeholder:"请输入手机号码",modelValue:n(v).phone,"onUpdate:modelValue":a[3]||(a[3]=e=>n(v).phone=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(d,{label:"性别",field:"gender"},{default:o((()=>[m(g,{modelValue:n(v).gender,"onUpdate:modelValue":a[4]||(a[4]=e=>n(v).gender=e)},{default:o((()=>[m(c,{value:1},{default:o((()=>[r("男")])),_:1}),m(c,{value:2},{default:o((()=>[r("女")])),_:1})])),_:1},8,["modelValue"])])),_:1}),m(d,{label:"所属部门",field:"deptId"},{default:o((()=>[m(h,{modelValue:n(v).deptId,"onUpdate:modelValue":a[5]||(a[5]=e=>n(v).deptId=e),data:n(x),fieldNames:{key:"id",title:"name"},placeholder:"请选择所属部门","allow-clear":"","allow-search":"",disabled:n(v).disabled},null,8,["modelValue","data","disabled"])])),_:1}),m(d,{label:"描述",field:"description"},{default:o((()=>[m(V,{modelValue:n(v).description,"onUpdate:modelValue":a[6]||(a[6]=e=>n(v).description=e),"max-length":200,placeholder:"请输入描述","auto-size":{minRows:3},"show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{h as _};
