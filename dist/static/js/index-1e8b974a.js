import{d as e,g as a,C as l,N as t,r as d,o as n,c as i,a as s,w as o,u as r,H as u,f as c,h as p,t as m,e as _,E as f,p as g,j as x,_ as y}from"./index-06cb2dae.js";import{u as h}from"./usePagination-4cb81329.js";import{u as v}from"./useDept-36b026ba.js";import{c as w}from"./index-18740acb.js";import{_ as k}from"./AddUserModal.vue_vue_type_script_setup_true_lang-1b766673.js";import"./regexp-251ef192.js";const b=e=>(g("data-v-86f58169"),e=e(),x(),e),V={class:"user-manage"},j=b((()=>p("span",null,"新增",-1))),C=b((()=>p("span",null,"删除",-1))),U=b((()=>p("span",null,"查询",-1))),T=b((()=>p("span",null,"重置",-1))),A={class:"table-box"},D=["src"],z=y(e({name:"SystemUser",__name:"index",setup(e){const g=a(),x=a(),y=a(!1),b=a(""),z=a(!1),I=a([]),{pagination:L,setTotal:M}=h((()=>{H()})),{deptList:P,getDeptList:R}=v();R(),l((()=>{setTimeout((()=>{var e;null==(e=g.value)||e.expandAll(!0)}),300)}));const S=()=>{var e;null==(e=x.value)||e.add()},E=t({status:"",username:""}),H=async()=>{z.value=!0;const e=await w();e.success?(I.value=e.data.list,M(e.data.total),z.value=!1):z.value=!1};H();const N=()=>{L.onChange(1)},Q=()=>{E.status="",E.username="",L.onChange(1)};return(e,a)=>{const l=d("icon-search"),t=d("a-input"),h=d("a-tree"),v=d("a-spin"),w=d("a-col"),M=d("icon-plus"),R=d("a-button"),H=d("icon-delete"),W=d("a-space"),q=d("a-option"),B=d("a-select"),F=d("a-input-group"),G=d("icon-refresh"),J=d("a-row"),K=d("a-table-column"),O=d("a-link"),X=d("a-avatar"),Y=d("a-tag"),Z=d("icon-edit"),$=d("a-popconfirm"),ee=d("a-table"),ae=d("a-card");return n(),i("div",V,[s(ae,{title:"用户管理"},{default:o((()=>[s(J,{gutter:16},{default:o((()=>[s(w,{xs:0,md:10,lg:6,xl:6,xxl:5},{default:o((()=>[s(t,{modelValue:r(b),"onUpdate:modelValue":a[0]||(a[0]=e=>u(b)?b.value=e:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:o((()=>[s(l)])),_:1},8,["modelValue"]),s(v,{class:"tree-box",loading:r(y)},{default:o((()=>[s(h,{ref_key:"TreeRef",ref:g,"block-node":"","show-line":"","default-expand-all":"",data:r(P),"field-names":{key:"id",title:"name",children:"children"},onSelect:N},null,8,["data"])])),_:1},8,["loading"])])),_:1}),s(w,{xs:24,md:14,lg:18,xl:18,xxl:19},{default:o((()=>[s(J,{justify:"space-between"},{default:o((()=>[s(W,null,{default:o((()=>[s(R,{type:"primary",onClick:S},{icon:o((()=>[s(M)])),default:o((()=>[j])),_:1}),s(R,{type:"primary",status:"danger"},{icon:o((()=>[s(H)])),default:o((()=>[C])),_:1})])),_:1}),s(W,null,{default:o((()=>[s(F,null,{default:o((()=>[s(B,{modelValue:r(E).status,"onUpdate:modelValue":a[1]||(a[1]=e=>r(E).status=e),placeholder:"用户状态","allow-clear":"",style:{width:"120px"}},{default:o((()=>[s(q,{value:1},{default:o((()=>[c("正常")])),_:1}),s(q,{value:0},{default:o((()=>[c("禁用")])),_:1})])),_:1},8,["modelValue"]),s(t,{modelValue:r(E).username,"onUpdate:modelValue":a[2]||(a[2]=e=>r(E).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"])])),_:1}),s(R,{type:"primary",onClick:N},{icon:o((()=>[s(l)])),default:o((()=>[U])),_:1}),s(R,{onClick:Q},{icon:o((()=>[s(G)])),default:o((()=>[T])),_:1})])),_:1})])),_:1}),p("section",A,[s(ee,{"row-key":"id",loading:r(z),data:r(I),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:r(L)},{columns:o((()=>[s(K,{title:"ID","data-index":"id"}),s(K,{title:"用户名","data-index":"username",width:120},{cell:o((({record:e})=>[s(O,null,{default:o((()=>[c(m(e.username),1)])),_:2},1024)])),_:1}),s(K,{title:"昵称","data-index":"nickname",width:150}),s(K,{title:"性别","data-index":"gender",width:80},{cell:o((({record:e})=>[c(m(1===e.gender?"男":"女"),1)])),_:1}),s(K,{title:"头像","data-index":"avatar",width:100},{cell:o((({record:e})=>[s(X,null,{default:o((()=>[p("img",{alt:"avatar",src:e.avatar},null,8,D)])),_:2},1024)])),_:1}),s(K,{title:"联系方式","data-index":"email",width:180}),s(K,{title:"状态",width:100},{cell:o((({record:e})=>[1==e.status?(n(),_(Y,{key:0,color:"green"},{default:o((()=>[c("正常")])),_:1})):(n(),_(Y,{key:1,color:"red"},{default:o((()=>[c("禁用")])),_:1}))])),_:1}),s(K,{title:"类型",width:100},{cell:o((({record:e})=>[1===e.type?(n(),_(Y,{key:0,color:"red"},{default:o((()=>[c("系统内置")])),_:1})):f("",!0),2===e.type?(n(),_(Y,{key:1,color:"orange"},{default:o((()=>[c("自定义")])),_:1})):f("",!0)])),_:1}),s(K,{title:"创建时间","data-index":"createTime",width:200}),s(K,{title:"操作",width:100,align:"center",fixed:"right"},{cell:o((({record:e})=>[s(W,null,{default:o((()=>[s(R,{type:"primary",size:"mini",onClick:a=>{return l=e,void(null==(t=x.value)||t.edit(l.id));var l,t}},{icon:o((()=>[s(Z)])),_:2},1032,["onClick"]),s($,{type:"warning",content:"确定删除该用户吗?"},{default:o((()=>[s(R,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:o((()=>[s(H)])),_:2},1032,["disabled"])])),_:2},1024)])),_:2},1024)])),_:1})])),_:1},8,["loading","data","pagination"])])])),_:1})])),_:1})])),_:1}),s(k,{ref_key:"AddUserModalRef",ref:x},null,512)])}}}),[["__scopeId","data-v-86f58169"]]);export{z as default};
