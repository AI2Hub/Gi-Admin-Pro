import{_ as ge}from"./GiTitle.0e9781a2.js";import{ew as De,r as y,s as Ee,v as J,d as N,q as ye,o as s,m as g,w as t,es as fe,ey as $e,j as T,a as b,n as Ae,el as ze,et as Ve,_ as le,h as ae,c as S,G as K,i as l,b as e,ei as L,k,eC as Te,eD as Ie,L as Me,em as ve,ej as Se,J as oe,K as G,I as H,p as Ne,e as Oe,u as ke,er as we,M as X,ek as Re,eG as Pe}from"./index.19a9a075.js";import"./index.463d26de.js";import{u as Ce}from"./usePagination.a58a7eb4.js";import"./viewer.a6275f22.js";import{g as Fe}from"./index.0f9bfed0.js";import{o as Ue,c as qe}from"./index.d14b03d0.js";import{_ as ne,a as xe}from"./GiOptionItem.40ddbd6b.js";import{_ as Ge}from"./GiSvgIcon.7f038a10.js";const je="/mock";function be(){return De.get(`${je}/cate/tree`)}function He(m,h,u={alignPoint:!1}){const i=y(!1),r=y(0),c=y(0),a=p=>{i.value=p},w=()=>{const p={};return m.clientX>window.innerWidth-c.value?p.right=u.alignPoint?window.innerWidth-m.clientX-r.value/2+"px":window.innerWidth-m.clientX+"px":p.left=u.alignPoint?m.clientX+r.value/2+"px":m.clientX+"px",m.clientY>window.innerHeight-c.value?(p.bottom=window.innerHeight-m.clientY+"px",p["transform-origin"]="center bottom"):(p.top=m.clientY+2+"px",p["transform-origin"]="center top"),p["z-index"]=999,p};return Ee(()=>{i.value=!0,J(()=>{!h||(c.value=h==null?void 0:h.offsetHeight,r.value=h==null?void 0:h.offsetWidth,w())})}),{visible:i,setVisible:a,getStyle:w}}function We(m,h="\u65B0\u5EFA\u5206\u7C7B"){let u=0;for(let i=0;i<m.length+1;i++)if(!m.includes(`${h}${i+1}`)){u=i+1;break}return`${h}${u}`}const Ke=N({name:"GiContextMenu"}),Le=N({...Ke,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(m,{expose:h,emit:u}){const i=m,r=y(null),{visible:c,setVisible:a,getStyle:w}=He(i.event,r,i.options);Ue(r,()=>{a(!1),u("close")},{capture:!1,ignore:i.ignoreRefs});const{width:p,height:B}=qe();return ye(()=>[p.value,B.value],()=>{a(!1),u("close")}),h({visible:c,onHidden:()=>{a(!1),u("close")}}),(O,C)=>(s(),g(Ve,{name:"slide-dynamic-origin"},{default:t(()=>[fe(b("div",{class:"gi-context-menu",ref_key:"elRef",ref:r,style:ze(T(w)())},[Ae(O.$slots,"default",{},void 0,!0)],4),[[$e,T(c)]])]),_:3}))}});const Xe=le(Le,[["__scopeId","data-v-4ada3c17"]]),Je={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},Ye=N({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(m,{emit:h}){const u=m,i=y(null),r=ae({callback:{onClick:(a,w,p)=>{c(a,w,p)}}});ye(u.treeData,()=>{J(()=>{var a;i.value=$.fn.zTree.init($("#movetree"),r,u.treeData),(a=i.value)==null||a.expandAll(!0)})},{deep:!0,immediate:!0});function c(a,w,p){h("node-click",p)}return(a,w)=>(s(),S("ul",Je,null,512))}}),Qe=k("\u65B0\u589E"),Ze=k("\u91CD\u547D\u540D"),et=k(" \u79FB\u52A8 "),tt=k("\u5220\u9664"),nt=N({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(m,{expose:h}){const u=m,i=y(null),r=y(null),c=y([r]),a=y(!1),w=K(()=>u.fileInfo.id!==""),p=K(()=>u.fileInfo.id!=="root"),B=K(()=>u.fileInfo.id!=="root"),I=K(()=>u.fileInfo.id!=="root"),O=()=>{a.value=!1,u.onClose()},C=D=>{if(D==="move")return a.value=!a.value,!1;J(()=>{var x;u.onClick(D),(x=i.value)==null||x.onHidden()})},A=()=>{var D;(D=i.value)==null||D.onHidden()};return h({menuRef:i,showMoveTreePopup:a,onClose:O,onClickItem:C}),(D,x)=>{const E=l("a-popover");return s(),g(Xe,{ref_key:"menuRef",ref:i,event:m.event,ignoreRefs:c.value,onClose:O},{default:t(()=>[e(xe,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[T(w)?(s(),g(ne,{key:0,icon:"IconPlusCircle",onClick:x[0]||(x[0]=d=>C("add"))},{default:t(()=>[Qe]),_:1})):L("",!0),T(p)?(s(),g(ne,{key:1,icon:"IconEdit",onClick:x[1]||(x[1]=d=>C("rename"))},{default:t(()=>[Ze]),_:1})):L("",!0),e(E,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":a.value},{content:t(()=>[b("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:r},[e(Ye,{"tree-data":m.treeData,onNodeClick:A},null,8,["tree-data"])],512)]),default:t(()=>[T(B)?(s(),g(ne,{key:0,more:"",icon:"IconExport",active:a.value,onClick:x[2]||(x[2]=d=>C("move"))},{default:t(()=>[et]),_:1},8,["active"])):L("",!0)]),_:1},8,["popup-visible"]),T(I)?(s(),g(ne,{key:2,icon:"IconDelete",onClick:x[3]||(x[3]=d=>C("delete"))},{default:t(()=>[tt]),_:1})):L("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const ot=le(nt,[["__scopeId","data-v-e36b4e3d"]]);let j=null,W=null;function lt(m,h,u){return new Promise(i=>{r(),W=document.createElement("div"),document.body.appendChild(W),j=Te(ot,{event:m,fileInfo:h,treeData:u,onClick:c=>{i({mode:c,fileInfo:h}),setTimeout(()=>{r()},360)},onClose:()=>{setTimeout(()=>{r()},360)}}),j.use(Ie),j.use(Me),j.mount(W);function r(){j!==null&&(j.unmount(),j=null),W!==null&&(document.body.removeChild(W),W=null)}})}const me="/gi-demo/assets/com-file-open.a82dbda1.svg",te="/gi-demo/assets/com-file-close.e0ebbcc4.svg",at="/gi-demo/assets/com-file.9070581a.svg",ut={class:"cate-tree"},st={class:"search-wrap"},it={class:"wrap"},ct=N({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(m,{emit:h}){const u=y(!1),i=y(""),r=y(null),c=y([]),a=y(null),w=y(null),p=(d,f,o)=>{console.log("\u70B9\u51FB\u8282\u70B9",o),w.value=o,h("node-click")},B=ae({callback:{onRightClick:(d,f,o)=>{console.log("\u9F20\u6807\u53F3\u952E",o),o&&(w.value=o,lt(d,o,c.value).then(n=>{console.log("res",n),n.mode==="add"&&C(),n.mode==="rename"&&A(),n.mode==="delete"&&D()}))},onClick:(d,f,o)=>{p(d,f,o)}}}),I=d=>{if(!d.length)return;function f(o){o.forEach(n=>{n.children&&n.children.length?(n.iconOpen=me,n.iconClose=te,f(n.children)):(n.children=null,n.iconOpen=me,n.iconClose=te,n.icon=te,n.type==null&&(n.icon=at))})}f(d)};(async()=>{try{u.value=!0;const d=await be();if(d.success){const f=d.data;I(f),c.value=f,J(()=>{var o;a.value=$.fn.zTree.init($("#treeDemo"),B,c.value),(o=a.value)==null||o.expandAll(!0)})}}catch(d){return d}finally{u.value=!1}})();const C=()=>{var R,F,P;const d=((R=w.value)==null?void 0:R.children)||[];let f="\u65B0\u5EFA\u5206\u7C7B1";if(d&&d.length){const U=d.map(q=>q.name);f=We(U,"\u65B0\u5EFA\u5206\u7C7B")}const o=new Date().getTime().toString(),n={id:o,name:f,children:null,iconOpen:me,iconClose:te,icon:te,isParent:!1};(F=a.value)==null||F.addNodes(w.value||{},n,!0);const v=(P=a.value)==null?void 0:P.getNodesByParam("id",o);setTimeout(()=>{var U;(U=a.value)==null||U.editName(v[0])},100)},A=()=>{J(()=>{var f,o,n;const d=(o=a.value)==null?void 0:o.getNodesByParam("id",(f=w.value)==null?void 0:f.id);(n=a.value)==null||n.editName(d[0])})},D=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1})},x=(d,f)=>{let o=!1;if(d.name.indexOf(f)>-1&&(o=!0),d.children){const n=d.children;for(let v=0;v<n.length;v++){const R=n[v];x(R,f)?o=!0:n.splice(v--,1)}}return o},E=()=>{var f,o;let d=i.value;if(!d)a.value=$.fn.zTree.init($("#treeDemo"),B,c.value),(f=a.value)==null||f.expandAll(!0);else{const n=JSON.parse(JSON.stringify(c.value));for(let v=0;v<n.length;v++)x(n[v],d)||n.splice(v--,1);a.value=$.fn.zTree.init($("#treeDemo"),B,n),(o=a.value)==null||o.expandAll(!0)}};return(d,f)=>{const o=l("icon-search"),n=l("a-input");return s(),S("div",ut,[b("div",st,[e(n,{"allow-clear":"",maxlength:20,placeholder:m.placeholder,modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=v=>i.value=v),onInput:E,onClear:E},{prefix:t(()=>[e(o)]),_:1},8,["placeholder","modelValue"])]),b("div",it,[b("ul",{id:"treeDemo",ref_key:"treeRef",ref:r,class:"ztree cate-ztree"},null,512)])])}}});const rt=le(ct,[["__scopeId","data-v-f49d6ff3"]]),he=m=>(Ne("data-v-7c4411df"),m=m(),Oe(),m),dt=he(()=>b("div",null,"\u4EC5\u652F\u6301\u4E2D\u6587\u59D3\u540D",-1)),_t=k("\u5173\u95ED"),pt=k("\u5F00\u542F"),mt=he(()=>b("span",null,"\u6743\u9650\u914D\u7F6E",-1)),ft=he(()=>b("span",null,"\u81EA\u5B9A\u4E49\u7BA1\u7406\u5458\u3001\u7F16\u8F91\u8005\u7684\u6743\u9650\uFF0C \u70B9\u51FB",-1)),vt=k("\u4E86\u89E3\u66F4\u591A\u6743\u9650"),ht=k("\u7BA1\u7406\u5458"),gt=k("\u7F16\u8F91\u8005"),yt=N({__name:"EditModal",setup(m,{expose:h}){const u=[{name:"\u65B0\u589E"},{name:"\u7F16\u8F91"},{name:"\u91CD\u547D\u540D"},{name:"\u5206\u4EAB"},{name:"\u5220\u9664"}],i=ae({name:"",address:"",status:!1}),r={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{minLength:1,maxLength:4,message:"\u540D\u5B57\u6700\u957F\u4E0D\u8D85\u8FC74\u4E2A\u5B57\u7B26"}],status:[{required:!0}]},c=y(!1),a=y(""),w=K(()=>!!a.value),p=K(()=>w.value?"\u7F16\u8F91":"\u65B0\u589E"),B=()=>{c.value=!1};return h({add:()=>{a.value="",c.value=!0},edit:C=>{a.value=C,c.value=!0}}),(C,A)=>{const D=l("a-input"),x=l("a-form-item"),E=l("a-radio"),d=l("a-radio-group"),f=l("a-form"),o=l("a-row"),n=l("icon-question-circle-fill"),v=l("a-link"),R=l("a-tooltip"),F=l("a-space"),P=l("icon-right"),U=l("a-checkbox"),q=l("a-checkbox-group"),Y=l("a-collapse-item"),Q=l("a-collapse"),Z=l("a-modal");return s(),g(Z,{visible:c.value,"onUpdate:visible":A[3]||(A[3]=z=>c.value=z),title:T(p),onOk:B},{default:t(()=>[e(o,{justify:"center"},{default:t(()=>[e(f,{ref:"formRef",model:i,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(x,{field:"name",label:"\u59D3\u540D",rules:r.name},{extra:t(()=>[dt]),default:t(()=>[e(D,{modelValue:i.name,"onUpdate:modelValue":A[0]||(A[0]=z=>i.name=z),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(x,{field:"address",label:"\u5730\u5740"},{default:t(()=>[e(D,{modelValue:i.address,"onUpdate:modelValue":A[1]||(A[1]=z=>i.address=z),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(x,{field:"status",label:"\u72B6\u6001",rules:r.status},{default:t(()=>[e(d,{modelValue:i.status,"onUpdate:modelValue":A[2]||(A[2]=z=>i.status=z)},{default:t(()=>[e(E,{value:!1},{default:t(()=>[_t]),_:1}),e(E,{value:!0},{default:t(()=>[pt]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(Q,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(Y,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(F,null,{default:t(()=>[mt,e(R,{position:"right","content-style":{width:"200px"}},{content:t(()=>[ft,e(v,{type:"primary",hoverable:!1},{default:t(()=>[vt]),_:1})]),default:t(()=>[e(n,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:z})=>[e(P,{class:Se({gi_rotate_90deg:z})},null,8,["class"])]),default:t(()=>[(s(),S(H,null,oe(u,(z,ee)=>e(o,{justify:"space-between",key:ee},{default:t(()=>[b("span",null,G(z.name),1),e(q,null,{default:t(()=>[e(U,{value:"1"},{default:t(()=>[ht]),_:1}),e(U,{value:"2"},{default:t(()=>[gt]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Be=le(yt,[["__scopeId","data-v-7c4411df"]]),ue=[{name:"\u7981\u7528",value:0,color:"#f53f3f"},{name:"\u542F\u7528",value:1,color:"#00b42a"}],kt={class:"data-pane"},wt={class:"gi_box pane-left"},Ct={class:"gi_box pane-right"},Ft={class:"content"},xt=k("\u65B0\u589E"),bt=k("\u5220\u9664"),Bt=k("\u5BFC\u51FA"),Dt={class:"table-box"},Et=k("\u4FEE\u6539"),$t=k("\u8BE6\u60C5"),At=k("\u5220\u9664"),zt=N({name:"DataManage"}),Vt=N({...zt,setup(m){const h=ke(),{pagination:u,setTotal:i}=Ce(()=>{B()}),r=ae({name:"",status:""}),c=y([]),a=y(!1),w=y(),p=o=>o<30?"danger":o<60?"warning":"success",B=async()=>{a.value=!0;const o=await Fe({current:u.current,pageSize:u.pageSize,...r});o.success&&(c.value=o.data.list,i(o.data.total)),a.value=!1};B();const I=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{c.value=[]}})},O=()=>{var o;(o=w.value)==null||o.add()},C=o=>{var n;(n=w.value)==null||n.edit(o.id)},A=()=>{h.push({path:"/data/detail"})},D=o=>{X.success("\u5220\u9664\u6210\u529F"),B()},x=()=>{if(!E.value.length)return X.warning("\u8BF7\u52FE\u9009\u6570\u636E");X.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},E=y([]),d=(o,n,v)=>{E.value=o},f=o=>{o?E.value=c.value.map(n=>n.id):E.value=[]};return(o,n)=>{const v=ge,R=l("icon-plus"),F=l("a-button"),P=l("icon-delete"),U=l("icon-export"),q=l("a-space"),Y=l("a-option"),Q=l("a-select"),Z=l("a-input"),z=l("icon-search"),ee=l("a-input-group"),se=l("icon-refresh"),ie=l("a-row"),V=l("a-table-column"),ce=l("a-progress"),re=l("a-tag"),de=l("a-popconfirm"),_e=l("a-table"),pe=we("loading");return s(),S("div",kt,[b("section",wt,[e(v,{title:"\u6570\u636E\u5206\u7C7B"}),e(rt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:n[0]||(n[0]=_=>T(u).onChange(1))})]),b("section",Ct,[e(v,{title:"\u6570\u636E\u5217\u8868"}),b("div",Ft,[e(ie,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(q,null,{default:t(()=>[e(F,{type:"primary",onClick:O},{icon:t(()=>[e(R)]),default:t(()=>[xt]),_:1}),e(F,{type:"primary",status:"danger",onClick:I},{icon:t(()=>[e(P)]),default:t(()=>[bt]),_:1}),e(F,{type:"primary",status:"success",onClick:x},{icon:t(()=>[e(U)]),default:t(()=>[Bt]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(Q,{modelValue:r.status,"onUpdate:modelValue":n[1]||(n[1]=_=>r.status=_),placeholder:"\u8BF7\u9009\u62E9","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(s(!0),S(H,null,oe(T(ue),_=>(s(),g(Y,{key:_.value,value:_.value},{default:t(()=>[k(G(_.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(ee,null,{default:t(()=>[e(Z,{modelValue:r.name,"onUpdate:modelValue":n[2]||(n[2]=_=>r.name=_),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(F,{type:"primary",onClick:B},{default:t(()=>[e(z)]),_:1})]),_:1}),e(F,{type:"primary",onClick:B},{icon:t(()=>[e(se)]),_:1})]),_:1})]),_:1}),b("section",Dt,[fe((s(),g(_e,{"row-key":"id",bordered:{cell:!0},data:c.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:T(u),onSelect:d,onSelectAll:f},{columns:t(()=>[e(V,{title:"\u5E8F\u53F7",width:68},{cell:t(({rowIndex:_})=>[k(G(_+1),1)]),_:1}),e(V,{title:"\u59D3\u540D","data-index":"name"}),e(V,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"startTime",width:180}),e(V,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(V,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:_})=>[e(ce,{status:p(_.proportion),percent:_.proportion/100},null,8,["status","percent"])]),_:1}),e(V,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:_})=>[(s(!0),S(H,null,oe(T(ue),M=>(s(),S(H,{key:M.value},[M.value===_.status?(s(),g(re,{key:0,color:M.color},{default:t(()=>[k(G(M.name),1)]),_:2},1032,["color"])):L("",!0)],64))),128))]),_:1}),e(V,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:_})=>[e(q,null,{default:t(()=>[e(F,{type:"primary",size:"mini",onClick:M=>C(_)},{default:t(()=>[Et]),_:2},1032,["onClick"]),e(F,{size:"mini",onClick:A},{default:t(()=>[$t]),_:1}),e(de,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:M=>D(_.id)},{default:t(()=>[e(F,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[At]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination"])),[[pe,a.value]])])])]),e(Be,{ref_key:"EditModalRef",ref:w},null,512)])}}}),Tt={class:"cate-tree"},It={class:"search-wrap"},Mt={class:"wrap"},St=k("\u65B0\u589E"),Nt=k("\u91CD\u547D\u540D"),Ot=k(" \u79FB\u52A8 "),Rt=k("\u5220\u9664"),Pt=N({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(m,{emit:h}){const u=y(!1),i=y(),r=y(""),c=y([]),a=()=>{h("node-click")};return(async()=>{try{u.value=!0;const p=await be();p.success&&(c.value=p.data,J(()=>{i.value.expandAll()}))}catch(p){return p}finally{u.value=!1}})(),(p,B)=>{const I=l("icon-search"),O=l("a-input"),C=Ge,A=l("icon-drive-file"),D=ne,x=l("a-tree"),E=l("a-scrollbar"),d=l("a-popover"),f=xe,o=l("a-trigger");return s(),S("div",Tt,[b("div",It,[e(O,{"allow-clear":"",maxlength:20,placeholder:m.placeholder,modelValue:r.value,"onUpdate:modelValue":B[0]||(B[0]=n=>r.value=n)},{prefix:t(()=>[e(I)]),_:1},8,["placeholder","modelValue"])]),b("div",Mt,[e(E,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(x,{ref_key:"treeRef",ref:i,"show-line":"",size:"mini",data:c.value,fieldNames:{key:"id"},onSelect:a},{"switcher-icon":t((n,{checked:v,selected:R,expanded:F})=>[n.children&&n.children.length&&F?(s(),g(C,{key:0,class:"switcher-icon",name:"plus-square",size:16})):n.children&&n.children.length&&!F?(s(),g(C,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(s(),g(A,{key:2,size:16}))]),icon:t(n=>[n.children?n.children?(s(),g(C,{key:1,name:"com-file-open",size:16})):(s(),g(C,{key:2,name:"com-file",size:16})):(s(),g(C,{key:0,name:"com-file-close",size:16}))]),title:t(n=>[e(o,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(f,{width:110,style:{"background-color":"var(--color-bg-3)","box-shadow":"0 4px 10px rgb(0 0 0 / 10%)"}},{default:t(()=>[e(D,{icon:"IconPlusCircle"},{default:t(()=>[St]),_:1}),e(D,{icon:"IconEdit"},{default:t(()=>[Nt]),_:1}),e(d,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(E,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(x,{ref:"treeMoveRef","show-line":"",size:"mini",data:c.value[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((v,{checked:R,selected:F,expanded:P})=>[v.children&&v.children.length&&P?(s(),g(C,{key:0,class:"switcher-icon",name:"plus-square",size:16})):v.children&&v.children.length&&!P?(s(),g(C,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(s(),g(A,{key:2,size:16}))]),icon:t(v=>[v.children?v.children?(s(),g(C,{key:1,name:"com-file-open",size:16})):(s(),g(C,{key:2,name:"com-file",size:16})):(s(),g(C,{key:0,name:"com-file-close",size:16}))]),_:2},1032,["data"])]),_:2},1024)]),default:t(()=>[e(D,{more:"",icon:"IconExport"},{default:t(()=>[Ot]),_:1})]),_:2},1024),e(D,{icon:"IconDelete"},{default:t(()=>[Rt]),_:1})]),_:2},1024)]),default:t(()=>[b("div",null,G(n.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Ut=le(Pt,[["__scopeId","data-v-a1194cef"]]),qt={class:"data-pane"},Gt={class:"gi_box pane-left"},jt={class:"gi_box pane-right"},Ht={class:"content"},Wt=k("\u5220\u9664"),Kt={class:"table-box"},Lt=k("\u4FEE\u6539"),Xt=k("\u8BE6\u60C5"),Jt=k("\u5220\u9664"),Yt=N({name:"DataManage"}),Qt=N({...Yt,setup(m){const h=ke(),{pagination:u,setTotal:i}=Ce(()=>{p()},{defaultPageSize:20}),r=ae({name:"",status:""}),c=y([]),a=y(!1),w=o=>o<30?"danger":o<60?"warning":"success",p=async()=>{try{a.value=!0;const o=await Fe({current:u.current,pageSize:u.pageSize,...r});c.value=o.data.list,i(o.data.total)}catch(o){return o}finally{a.value=!1}};p();const B=()=>{ve.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{c.value=[]}})},I=y(),O=()=>{var o;(o=I.value)==null||o.add()},C=o=>{var n;(n=I.value)==null||n.edit(o.id)},A=()=>{h.push({path:"/data/detail"})},D=o=>{X.success("\u5220\u9664\u6210\u529F"),p()},x=()=>{if(!E.value.length)return X.warning("\u8BF7\u52FE\u9009\u6570\u636E");X.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},E=y([]),d=(o,n,v)=>{E.value=o},f=o=>{o?E.value=c.value.map(n=>n.id):E.value=[]};return(o,n)=>{const v=ge,R=l("icon-plus"),F=l("a-button"),P=l("icon-delete"),U=l("icon-export"),q=l("a-space"),Y=l("a-option"),Q=l("a-select"),Z=l("a-input"),z=l("icon-search"),ee=l("a-input-group"),se=l("icon-refresh"),ie=l("a-row"),V=l("a-table-column"),ce=l("a-progress"),re=l("a-tag"),de=l("a-popconfirm"),_e=l("a-table"),pe=we("loading");return s(),S("div",qt,[b("section",Gt,[e(v,{title:"\u6570\u636E\u5206\u7C7B"}),e(Ut,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:n[0]||(n[0]=_=>T(u).onChange(1))})]),b("section",jt,[e(v,{title:"\u6570\u636E\u5217\u8868"}),b("div",Ht,[e(ie,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(q,null,{default:t(()=>[e(F,{type:"primary",onClick:O},{icon:t(()=>[e(R)]),_:1}),e(F,{type:"primary",status:"danger",onClick:B},{icon:t(()=>[e(P)]),default:t(()=>[Wt]),_:1}),e(F,{type:"primary",status:"success",onClick:x},{icon:t(()=>[e(U)]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(Q,{modelValue:r.status,"onUpdate:modelValue":n[1]||(n[1]=_=>r.status=_),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(s(!0),S(H,null,oe(T(ue),_=>(s(),g(Y,{key:_.value,value:_.value},{default:t(()=>[k(G(_.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(ee,null,{default:t(()=>[e(Z,{modelValue:r.name,"onUpdate:modelValue":n[2]||(n[2]=_=>r.name=_),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(F,{type:"primary",onClick:p},{default:t(()=>[e(z)]),_:1})]),_:1}),e(F,{type:"primary",onClick:p},{icon:t(()=>[e(se)]),_:1})]),_:1})]),_:1}),b("section",Kt,[fe((s(),g(_e,{"row-key":"id",bordered:{cell:!0},data:c.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:T(u),onSelect:d,onSelectAll:f},{columns:t(()=>[e(V,{title:"\u5E8F\u53F7",width:68},{cell:t(_=>[k(G(_.rowIndex+1),1)]),_:1}),e(V,{title:"\u59D3\u540D","data-index":"name"}),e(V,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(V,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:_})=>[e(ce,{status:w(_.proportion),percent:_.proportion/100},null,8,["status","percent"])]),_:1}),e(V,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:_})=>[(s(!0),S(H,null,oe(T(ue),M=>(s(),S(H,{key:M.value},[M.value===_.status?(s(),g(re,{key:0,color:M.color},{default:t(()=>[k(G(M.name),1)]),_:2},1032,["color"])):L("",!0)],64))),128))]),_:1}),e(V,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"startTime",width:180}),e(V,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:_})=>[e(q,null,{default:t(()=>[e(F,{type:"primary",size:"mini",onClick:M=>C(_)},{default:t(()=>[Lt]),_:2},1032,["onClick"]),e(F,{size:"mini",onClick:A},{default:t(()=>[Xt]),_:1}),e(de,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:M=>D(_.id)},{default:t(()=>[e(F,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Jt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination"])),[[pe,a.value]])])])]),e(Be,{ref_key:"EditModalRef",ref:I},null,512)])}}}),Zt={class:"manage"},en={class:"tab"},tn=N({name:"DataManage"}),_n=N({...tn,setup(m){const h={1:Vt,2:Qt},u=y(2);return(i,r)=>{const c=l("a-tab-pane"),a=l("a-tabs");return s(),S("div",Zt,[b("section",en,[e(a,{"hide-content":"",size:"medium","active-key":u.value,"onUpdate:active-key":r[0]||(r[0]=w=>u.value=w)},{default:t(()=>[(s(),g(c,{key:1,title:"\u5468\u671F\u7BA1\u7406"})),(s(),g(c,{key:2,title:"\u7EF4\u5EA6\u7BA1\u7406"})),(s(),g(c,{key:3,title:"\u5355\u4F4D\u7BA1\u7406"}))]),_:1},8,["active-key"])]),(s(),g(Pe,null,[(s(),g(Re(h[u.value])))],1024))])}}});export{_n as default};
