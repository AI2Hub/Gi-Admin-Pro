import{_ as ee}from"./GiSvgIcon-fe6f159e.js";import"./index-578bfdd4.js";import{u as ae}from"./usePagination-8ab4b27d.js";import{d as E,r as _,x as te,I as oe,o as l,f as u,w as a,k as m,b as t,a as e,g as v,h as w,G as ne,c as U,Q as le,P as se,i as A,p as ie,l as ce,_ as de}from"./index-c333f726.js";import{u as re}from"./useDept-b8ddf721.js";import{g as _e}from"./index-b0e12fe5.js";import{u as ue}from"./useArea-54d40cc1.js";const pe="/gi-demo/assets/avatar-a3ca9f0c.jpg",me=w("img",{src:pe},null,-1),fe=E({__name:"EditUserModal",setup(x,{expose:V}){const{getAreaTreeData:y}=ue(),h=_(""),z=te(()=>h.value?"编辑用户":"新增用户"),d=_(!1),s=oe({userName:"",sex:0,address:""}),C=_([]);return C.value=y(),V({add:()=>{h.value="",d.value=!0},edit:I=>{h.value=I,d.value=!0}}),(I,i)=>{const D=t("a-input"),f=t("a-form-item"),P=t("IconCamera"),T=t("a-avatar"),S=t("a-radio"),g=t("a-radio-group"),o=t("a-cascader"),p=t("a-form"),N=t("a-modal");return l(),u(N,{visible:d.value,"onUpdate:visible":i[3]||(i[3]=c=>d.value=c),title:m(z)},{default:a(()=>[e(p,{ref:"formRef",model:s,size:"medium","auto-label-width":""},{default:a(()=>[e(f,{label:"姓名",field:"userName",rules:[{required:!0,message:"请输入部门名称"},{min:2,max:4,message:"长度在 2 - 4个字符"}],"validate-trigger":["change","input"]},{default:a(()=>[e(D,{placeholder:"请输入用户姓名",modelValue:s.userName,"onUpdate:modelValue":i[0]||(i[0]=c=>s.userName=c)},null,8,["modelValue"])]),_:1}),e(f,{label:"头像",field:"avatar"},{default:a(()=>[e(T,{size:60,"trigger-icon-style":{color:"#3491FA"}},{"trigger-icon":a(()=>[e(P)]),default:a(()=>[me]),_:1})]),_:1}),e(f,{label:"性别",field:"sex"},{default:a(()=>[e(g,{modelValue:s.sex,"onUpdate:modelValue":i[1]||(i[1]=c=>s.sex=c)},{default:a(()=>[e(S,{value:1},{default:a(()=>[v("男")]),_:1}),e(S,{value:0},{default:a(()=>[v("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"地址",field:"address"},{default:a(()=>[e(o,{modelValue:s.address,"onUpdate:modelValue":i[2]||(i[2]=c=>s.address=c),options:C.value,"field-names":{value:"code",label:"label"},placeholder:"请选择省市区"},null,8,["modelValue","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),q=x=>(ie("data-v-96a8a2e3"),x=x(),ce(),x),ge={class:"user-manage"},ve={class:"content"},xe={class:"tree-box"},ye=q(()=>w("span",null,"新增用户",-1)),he=q(()=>w("span",null,"搜索",-1)),be={class:"table-box"},ke={key:0},we={key:1},Ve=E({name:"UserManage"}),ze=E({...Ve,setup(x){const V=_(),y=_(),h=_(!1),z=_(""),d=_(!1),s=_([]),{current:C,pageSize:M,total:R,changeCurrent:I,changePageSize:i,setTotal:D}=ae(()=>{g()}),{deptList:f,getDeptList:P}=re();P(),ne(()=>{var o;(o=V.value)==null||o.expandAll()});const T=()=>{var o;(o=y.value)==null||o.add()},S=o=>{var p;(p=y.value)==null||p.edit(o.id)},g=async()=>{d.value=!0;const o=await _e();o.success&&(s.value=o.data.list,D(o.data.total)),d.value=!1};return g(),(o,p)=>{const N=t("icon-search"),c=t("a-input"),F=t("IconDown"),b=ee,Q=t("a-tree"),B=t("a-card"),W=t("icon-plus"),k=t("a-button"),L=t("a-option"),H=t("a-select"),J=t("a-input-group"),$=t("a-space"),j=t("icon-delete"),K=t("a-row"),r=t("a-table-column"),G=t("a-tag"),O=t("icon-edit"),X=t("a-popconfirm"),Y=t("a-table"),Z=le("loading");return l(),U("div",ge,[e(B,{title:"部门列表",bordered:!1,class:"gi_card left"},{default:a(()=>[w("div",ve,[e(c,{modelValue:z.value,"onUpdate:modelValue":p[0]||(p[0]=n=>z.value=n),placeholder:"请输入搜索关键词","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:a(()=>[e(N)]),_:1},8,["modelValue"]),se((l(),U("div",xe,[e(Q,{ref_key:"treeRef",ref:V,"block-node":"","default-expand-all":"",data:m(f),"field-names":{key:"id",title:"name",children:"children"},onSelect:g},{"switcher-icon":a(()=>[e(F)]),icon:a(({node:n})=>[n.level==1?(l(),u(b,{key:0,name:"com-dept",size:14})):A("",!0),n.level==2?(l(),u(b,{key:1,name:"com-sub-dept",size:12})):A("",!0),n.level==3?(l(),u(b,{key:2,name:"com-group",size:12})):A("",!0)]),_:1},8,["data"])])),[[Z,h.value]])])]),_:1}),e(B,{title:"用户列表",bordered:!1,class:"gi_card right"},{default:a(()=>[e(K,{justify:"space-between"},{default:a(()=>[e($,null,{default:a(()=>[e(k,{type:"primary",onClick:T},{icon:a(()=>[e(W)]),default:a(()=>[ye]),_:1}),e(J,null,{default:a(()=>[e(H,{placeholder:"部门状态","allow-clear":"",style:{width:"120px"}},{default:a(()=>[e(L,{value:1},{default:a(()=>[v("正常")]),_:1}),e(L,{value:0},{default:a(()=>[v("禁用")]),_:1})]),_:1}),e(c,{placeholder:"请输入关键词...","allow-clear":"",style:{width:"250px"}}),e(k,{type:"primary",onClick:g},{icon:a(()=>[e(N)]),default:a(()=>[he]),_:1})]),_:1})]),_:1}),e(k,{type:"primary",status:"danger"},{icon:a(()=>[e(j)]),_:1})]),_:1}),w("section",be,[e(Y,{"row-key":"id",loading:d.value,data:s.value,scroll:{x:"100%",y:"100%",minWidth:900},pagination:{showPageSize:!0,total:m(R),current:m(C),pageSize:m(M)},onPageChange:m(I),onPageSizeChange:m(i)},{columns:a(()=>[e(r,{title:"用户编号","data-index":"userNo"}),e(r,{title:"用户名","data-index":"userName"}),e(r,{title:"用户昵称","data-index":"nickName"}),e(r,{title:"性别","data-index":"sex"},{cell:a(({record:n})=>[n.sex===1?(l(),U("span",ke,"男")):(l(),U("span",we,"女"))]),_:1}),e(r,{title:"头像","data-index":"avatar"},{cell:a(({record:n})=>[n.sex===1?(l(),u(b,{key:0,name:"avatar-man",size:40})):(l(),u(b,{key:1,name:"avatar-woman",size:40}))]),_:1}),e(r,{title:"地址","data-index":"address"}),e(r,{title:"状态",width:100},{cell:a(({record:n})=>[n.status==1?(l(),u(G,{key:0,color:"green"},{default:a(()=>[v("正常")]),_:1})):(l(),u(G,{key:1,color:"red"},{default:a(()=>[v("禁用")]),_:1}))]),_:1}),e(r,{title:"创建时间","data-index":"createTime"}),e(r,{title:"操作",width:100,align:"center"},{cell:a(({record:n})=>[e($,null,{default:a(()=>[e(k,{type:"primary",size:"mini",onClick:Ce=>S(n)},{icon:a(()=>[e(O)]),_:2},1032,["onClick"]),e(X,{type:"warning",content:"您确定要删除该项吗?"},{default:a(()=>[e(k,{type:"primary",status:"danger",size:"mini"},{icon:a(()=>[e(j)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination","onPageChange","onPageSizeChange"])])]),_:1}),e(fe,{ref_key:"EditUserModalRef",ref:y},null,512)])}}});const Ae=de(ze,[["__scopeId","data-v-96a8a2e3"]]);export{Ae as default};
