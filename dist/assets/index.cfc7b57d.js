import{_ as ye}from"./GiTitle.1650cd8c.js";import{ew as $e,r as w,s as Ee,v as Y,d as N,q as fe,o as i,m as y,w as t,es as ve,ey as ze,j as B,a as z,n as Ve,el as Ae,et as Ie,_ as G,h as K,c as M,G as te,i as n,b as e,ei as J,k,eC as Te,eD as Se,L as Pe,em as ge,ej as Me,J as oe,K as q,I as L,z as Ne,p as Oe,e as Re,u as we,er as Ce,M as ke,ek as Ue}from"./index.3964aeb2.js";import"./index.463d26de.js";import{u as be}from"./usePagination.cc658ef2.js";import"./viewer.8bb5fd63.js";import{o as je,c as qe,f as Ge}from"./index.51d516d0.js";import{_ as ne,a as xe}from"./GiOptionItem.f209cd8d.js";import{g as De}from"./index.246c5bd9.js";import{_ as He}from"./GiSvgIcon.0cd0dfa9.js";const We="/mock";function Fe(){return $e.get(`${We}/cate/tree`)}function Le(f,v,c={alignPoint:!1}){const u=w(!1),g=w(0),d=w(0),a=p=>{u.value=p},C=()=>{const p={};return f.clientX>window.innerWidth-d.value?p.right=c.alignPoint?window.innerWidth-f.clientX-g.value/2+"px":window.innerWidth-f.clientX+"px":p.left=c.alignPoint?f.clientX+g.value/2+"px":f.clientX+"px",f.clientY>window.innerHeight-d.value?(p.bottom=window.innerHeight-f.clientY+"px",p["transform-origin"]="center bottom"):(p.top=f.clientY+2+"px",p["transform-origin"]="center top"),p["z-index"]=999,p};return Ee(()=>{u.value=!0,Y(()=>{!v||(d.value=v==null?void 0:v.offsetHeight,g.value=v==null?void 0:v.offsetWidth,C())})}),{visible:u,setVisible:a,getStyle:C}}function Xe(f,v="\u65B0\u5EFA\u5206\u7C7B"){let c=0;for(let u=0;u<f.length+1;u++)if(!f.includes(`${v}${u+1}`)){c=u+1;break}return`${v}${c}`}const Je=N({name:"GiContextMenu"}),Ye=N({...Je,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(f,{expose:v,emit:c}){const u=f,g=w(null),{visible:d,setVisible:a,getStyle:C}=Le(u.event,g,u.options);je(g,()=>{a(!1),c("close")},{capture:!1,ignore:u.ignoreRefs});const{width:p,height:V}=qe();return fe(()=>[p.value,V.value],()=>{a(!1),c("close")}),v({visible:d,onHidden:()=>{a(!1),c("close")}}),(F,h)=>(i(),y(Ie,{name:"slide-dynamic-origin"},{default:t(()=>[ve(z("div",{class:"gi-context-menu",ref_key:"elRef",ref:g,style:Ae(B(C)())},[Ve(F.$slots,"default",{},void 0,!0)],4),[[ze,B(d)]])]),_:3}))}});const Ke=G(Ye,[["__scopeId","data-v-4ada3c17"]]),Qe={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},Ze=N({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(f,{emit:v}){const c=f,u=w(null),g=K({callback:{onClick:(a,C,p)=>{d(a,C,p)}}});fe(c.treeData,()=>{Y(()=>{var a;u.value=$.fn.zTree.init($("#movetree"),g,c.treeData),(a=u.value)==null||a.expandAll(!0)})},{deep:!0,immediate:!0});function d(a,C,p){v("node-click",p)}return(a,C)=>(i(),M("ul",Qe,null,512))}}),et=k("\u65B0\u589E"),tt=k("\u91CD\u547D\u540D"),nt=k(" \u79FB\u52A8 "),ot=k("\u5220\u9664"),at=N({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(f,{expose:v}){const c=f,u=w(null),g=w(null),d=w([g]),a=w(!1),C=te(()=>c.fileInfo.id!==""),p=te(()=>c.fileInfo.id!=="root"),V=te(()=>c.fileInfo.id!=="root"),b=te(()=>c.fileInfo.id!=="root"),F=()=>{a.value=!1,c.onClose()},h=x=>{if(x==="move")return a.value=!a.value,!1;Y(()=>{var D;c.onClick(x),(D=u.value)==null||D.onHidden()})},S=()=>{var x;(x=u.value)==null||x.onHidden()};return v({menuRef:u,showMoveTreePopup:a,onClose:F,onClickItem:h}),(x,D)=>{const O=n("a-popover");return i(),y(Ke,{ref_key:"menuRef",ref:u,event:f.event,ignoreRefs:d.value,onClose:F},{default:t(()=>[e(xe,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[B(C)?(i(),y(ne,{key:0,icon:"IconPlusCircle",onClick:D[0]||(D[0]=_=>h("add"))},{default:t(()=>[et]),_:1})):J("",!0),B(p)?(i(),y(ne,{key:1,icon:"IconEdit",onClick:D[1]||(D[1]=_=>h("rename"))},{default:t(()=>[tt]),_:1})):J("",!0),e(O,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":a.value},{content:t(()=>[z("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:g},[e(Ze,{"tree-data":f.treeData,onNodeClick:S},null,8,["tree-data"])],512)]),default:t(()=>[B(V)?(i(),y(ne,{key:0,more:"",icon:"IconExport",active:a.value,onClick:D[2]||(D[2]=_=>h("move"))},{default:t(()=>[nt]),_:1},8,["active"])):J("",!0)]),_:1},8,["popup-visible"]),B(b)?(i(),y(ne,{key:2,icon:"IconDelete",onClick:D[3]||(D[3]=_=>h("delete"))},{default:t(()=>[ot]),_:1})):J("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const lt=G(at,[["__scopeId","data-v-e36b4e3d"]]);let W=null,X=null;function ut(f,v,c){return new Promise(u=>{g(),X=document.createElement("div"),document.body.appendChild(X),W=Te(lt,{event:f,fileInfo:v,treeData:c,onClick:d=>{u({mode:d,fileInfo:v}),setTimeout(()=>{g()},360)},onClose:()=>{setTimeout(()=>{g()},360)}}),W.use(Se),W.use(Pe),W.mount(X);function g(){W!==null&&(W.unmount(),W=null),X!==null&&(document.body.removeChild(X),X=null)}})}const me="/gi-demo/assets/com-file-open.a82dbda1.svg",ee="/gi-demo/assets/com-file-close.e0ebbcc4.svg",st="/gi-demo/assets/com-file.9070581a.svg",it={class:"cate-tree"},ct={class:"search-wrap"},rt={class:"wrap"},dt=N({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(f,{emit:v}){const c=w(!1),u=w(""),g=w(null),d=w([]),a=w(null),C=w(null),p=(_,s,l)=>{console.log("\u70B9\u51FB\u8282\u70B9",l),C.value=l,v("node-click")},V=K({callback:{onRightClick:(_,s,l)=>{console.log("\u9F20\u6807\u53F3\u952E",l),l&&(C.value=l,ut(_,l,d.value).then(o=>{console.log("res",o),o.mode==="add"&&h(),o.mode==="rename"&&S(),o.mode==="delete"&&x()}))},onClick:(_,s,l)=>{p(_,s,l)}}}),b=_=>{if(!_.length)return;function s(l){l.forEach(o=>{o.children&&o.children.length?(o.iconOpen=me,o.iconClose=ee,s(o.children)):(o.children=null,o.iconOpen=me,o.iconClose=ee,o.icon=ee,o.type==null&&(o.icon=st))})}s(_)};(async()=>{try{c.value=!0;const _=await Fe();if(_.success){const s=_.data;b(s),d.value=s,Y(()=>{var l;a.value=$.fn.zTree.init($("#treeDemo"),V,d.value),(l=a.value)==null||l.expandAll(!0)})}}catch(_){return _}finally{c.value=!1}})();const h=()=>{var A,U,E;const _=((A=C.value)==null?void 0:A.children)||[];let s="\u65B0\u5EFA\u5206\u7C7B1";if(_&&_.length){const R=_.map(H=>H.name);s=Xe(R,"\u65B0\u5EFA\u5206\u7C7B")}const l=new Date().getTime().toString(),o={id:l,name:s,children:null,iconOpen:me,iconClose:ee,icon:ee,isParent:!1};(U=a.value)==null||U.addNodes(C.value||{},o,!0);const m=(E=a.value)==null?void 0:E.getNodesByParam("id",l);setTimeout(()=>{var R;(R=a.value)==null||R.editName(m[0])},100)},S=()=>{Y(()=>{var s,l,o;const _=(l=a.value)==null?void 0:l.getNodesByParam("id",(s=C.value)==null?void 0:s.id);(o=a.value)==null||o.editName(_[0])})},x=()=>{ge.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1})},D=(_,s)=>{let l=!1;if(_.name.indexOf(s)>-1&&(l=!0),_.children){const o=_.children;for(let m=0;m<o.length;m++){const A=o[m];D(A,s)?l=!0:o.splice(m--,1)}}return l},O=()=>{var s,l;let _=u.value;if(!_)a.value=$.fn.zTree.init($("#treeDemo"),V,d.value),(s=a.value)==null||s.expandAll(!0);else{const o=JSON.parse(JSON.stringify(d.value));for(let m=0;m<o.length;m++)D(o[m],_)||o.splice(m--,1);a.value=$.fn.zTree.init($("#treeDemo"),V,o),(l=a.value)==null||l.expandAll(!0)}};return(_,s)=>{const l=n("icon-search"),o=n("a-input");return i(),M("div",it,[z("div",ct,[e(o,{"allow-clear":"",maxlength:20,placeholder:f.placeholder,modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=m=>u.value=m),onInput:O,onClear:O},{prefix:t(()=>[e(l)]),_:1},8,["placeholder","modelValue"])]),z("div",rt,[z("ul",{id:"treeDemo",ref_key:"treeRef",ref:g,class:"ztree cate-ztree"},null,512)])])}}});const _t=G(dt,[["__scopeId","data-v-f49d6ff3"]]),he=f=>(Oe("data-v-ddf3ab8f"),f=f(),Re(),f),pt=he(()=>z("div",null,"\u4EC5\u652F\u6301\u4E2D\u6587\u59D3\u540D",-1)),mt=k("\u5173\u95ED"),ft=k("\u5F00\u542F"),vt=he(()=>z("span",null,"\u6743\u9650\u914D\u7F6E",-1)),gt=he(()=>z("span",null,"\u81EA\u5B9A\u4E49\u7BA1\u7406\u5458\u3001\u7F16\u8F91\u8005\u7684\u6743\u9650\uFF0C \u70B9\u51FB",-1)),ht=k("\u4E86\u89E3\u66F4\u591A\u6743\u9650"),yt=k("\u7BA1\u7406\u5458"),wt=k("\u7F16\u8F91\u8005"),Ct=N({__name:"EditDialog",props:{modelValue:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(f,{emit:v}){const c=f,u=Ge(c,"modelValue",v),g=[{name:"\u65B0\u589E"},{name:"\u7F16\u8F91"},{name:"\u91CD\u547D\u540D"},{name:"\u5206\u4EAB"},{name:"\u5220\u9664"}],d=K({name:"",address:"",status:!1}),a=K({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{minLength:1,maxLength:4,message:"\u540D\u5B57\u6700\u957F\u4E0D\u8D85\u8FC74\u4E2A\u5B57\u7B26"}],status:[{required:!0}]}),C=te(()=>!!c.formData.id);fe(u,()=>{const{name:b,address:F,status:h}=c.formData;d.name=b,d.address=F,d.status=h||!1});const p=()=>{u.value=!1},V=()=>{u.value=!1};return(b,F)=>{const h=n("a-input"),S=n("a-form-item"),x=n("a-radio"),D=n("a-radio-group"),O=n("a-form"),_=n("a-row"),s=n("icon-question-circle-fill"),l=n("a-link"),o=n("a-tooltip"),m=n("a-space"),A=n("icon-right"),U=n("a-checkbox"),E=n("a-checkbox-group"),R=n("a-collapse-item"),H=n("a-collapse"),j=n("a-modal");return i(),y(j,{visible:B(u),"onUpdate:visible":F[3]||(F[3]=I=>Ne(u)?u.value=I:null),title:B(C)?"\u7F16\u8F91":"\u65B0\u589E",onOk:V,onCancel:p},{default:t(()=>[e(_,{justify:"center"},{default:t(()=>[e(O,{ref:"formRef",model:d,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(S,{field:"name",label:"\u59D3\u540D",rules:a.name},{extra:t(()=>[pt]),default:t(()=>[e(h,{modelValue:d.name,"onUpdate:modelValue":F[0]||(F[0]=I=>d.name=I),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(S,{field:"address",label:"\u5730\u5740"},{default:t(()=>[e(h,{modelValue:d.address,"onUpdate:modelValue":F[1]||(F[1]=I=>d.address=I),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(S,{field:"status",label:"\u72B6\u6001",rules:a.status},{default:t(()=>[e(D,{modelValue:d.status,"onUpdate:modelValue":F[2]||(F[2]=I=>d.status=I)},{default:t(()=>[e(x,{value:!1},{default:t(()=>[mt]),_:1}),e(x,{value:!0},{default:t(()=>[ft]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(H,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(R,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(m,null,{default:t(()=>[vt,e(o,{position:"right","content-style":{width:"200px"}},{content:t(()=>[gt,e(l,{type:"primary",hoverable:!1},{default:t(()=>[ht]),_:1})]),default:t(()=>[e(s,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:I})=>[e(A,{class:Me({gi_rotate_90deg:I})},null,8,["class"])]),default:t(()=>[(i(),M(L,null,oe(g,(I,Q)=>e(_,{justify:"space-between",key:Q},{default:t(()=>[z("span",null,q(I.name),1),e(E,null,{default:t(()=>[e(U,{value:"1"},{default:t(()=>[yt]),_:1}),e(U,{value:"2"},{default:t(()=>[wt]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Be=G(Ct,[["__scopeId","data-v-ddf3ab8f"]]),ae=[{name:"\u7981\u7528",value:0,color:"#f53f3f"},{name:"\u542F\u7528",value:1,color:"#00b42a"}],kt={class:"gi_lr_page pane"},bt={class:"left"},xt={class:"right"},Dt={class:"content"},Ft=k("\u5220\u9664"),Bt={class:"table-box"},$t=k("\u4FEE\u6539"),Et=k("\u8BE6\u60C5"),zt=k("\u5220\u9664"),Vt=N({name:"DataManage"}),At=N({...Vt,setup(f){const v=we(),{current:c,pageSize:u,total:g,changeCurrent:d,changePageSize:a,setTotal:C}=be(()=>{h()}),p=K({name:"",status:""}),V=w([]),b=w(!1),F=o=>o<30?"danger":o<60?"warning":"success",h=async()=>{try{b.value=!0;const o=await De({current:c.value,pageSize:u.value,...p});V.value=o.data.list,C(o.data.total)}catch(o){return o}finally{b.value=!1}};h();const S=()=>{ge.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{V.value=[]}})},x=w(!1),D=w({}),O=o=>{D.value=o,x.value=!0},_=()=>{x.value=!0},s=()=>{v.push({path:"/data/detail"})},l=o=>{ke.success("\u5220\u9664\u6210\u529F"),h()};return(o,m)=>{const A=ye,U=n("icon-plus"),E=n("a-button"),R=n("icon-delete"),H=n("icon-download"),j=n("a-space"),I=n("a-option"),Q=n("a-select"),le=n("a-input"),ue=n("icon-search"),se=n("a-input-group"),ie=n("icon-refresh"),Z=n("a-row"),T=n("a-table-column"),ce=n("a-progress"),re=n("a-tag"),de=n("a-popconfirm"),_e=n("a-table"),pe=Ce("loading");return i(),M("section",kt,[z("div",bt,[e(A,{title:"\u6570\u636E\u5206\u7C7B"}),e(_t,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:m[0]||(m[0]=r=>B(d)(1))})]),z("div",xt,[e(A,{title:"\u6570\u636E\u5217\u8868"}),z("div",Dt,[e(Z,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(j,null,{default:t(()=>[e(E,{type:"primary",onClick:_},{icon:t(()=>[e(U)]),_:1}),e(E,{type:"primary",status:"danger",onClick:S},{icon:t(()=>[e(R)]),default:t(()=>[Ft]),_:1}),e(E,{type:"primary",status:"success"},{icon:t(()=>[e(H)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(Q,{modelValue:p.status,"onUpdate:modelValue":m[1]||(m[1]=r=>p.status=r),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(i(!0),M(L,null,oe(B(ae),r=>(i(),y(I,{key:r.value,value:r.value},{default:t(()=>[k(q(r.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(se,null,{default:t(()=>[e(le,{modelValue:p.name,"onUpdate:modelValue":m[2]||(m[2]=r=>p.name=r),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(E,{type:"primary",onClick:h},{default:t(()=>[e(ue)]),_:1})]),_:1}),e(E,{type:"primary",onClick:h},{icon:t(()=>[e(ie)]),_:1})]),_:1})]),_:1}),z("section",Bt,[ve((i(),y(_e,{"row-key":"id",bordered:{cell:!0},data:V.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:{showPageSize:!0,total:B(g),current:B(c),pageSize:B(u)},onPageChange:B(d),onPageSizeChange:B(a)},{columns:t(()=>[e(T,{title:"\u5E8F\u53F7",width:68},{cell:t(r=>[k(q(r.rowIndex+1),1)]),_:1}),e(T,{title:"\u59D3\u540D","data-index":"name"}),e(T,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"startTime",width:180}),e(T,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(T,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:r})=>[e(ce,{status:F(r.proportion),percent:r.proportion/100},null,8,["status","percent"])]),_:1}),e(T,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:r})=>[(i(!0),M(L,null,oe(B(ae),P=>(i(),M(L,{key:P.value},[P.value===r.status?(i(),y(re,{key:0,color:P.color},{default:t(()=>[k(q(P.name),1)]),_:2},1032,["color"])):J("",!0)],64))),128))]),_:1}),e(T,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:r})=>[e(Z,{justify:"center"},{default:t(()=>[e(j,null,{default:t(()=>[e(E,{type:"primary",size:"mini",onClick:P=>O(r)},{default:t(()=>[$t]),_:2},1032,["onClick"]),e(E,{size:"mini",onClick:s},{default:t(()=>[Et]),_:1}),e(de,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:P=>l(r.id)},{default:t(()=>[e(E,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[zt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[pe,b.value]])])])]),e(Be,{modelValue:x.value,"onUpdate:modelValue":m[3]||(m[3]=r=>x.value=r),"form-data":D.value},null,8,["modelValue","form-data"])])}}});const It=G(At,[["__scopeId","data-v-1d656616"]]),Tt={class:"cate-tree"},St={class:"search-wrap"},Pt={class:"wrap"},Mt=k("\u65B0\u589E"),Nt=k("\u91CD\u547D\u540D"),Ot=k(" \u79FB\u52A8 "),Rt=k("\u5220\u9664"),Ut=N({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},setup(f){const v=w(!1),c=w(),u=w(""),g=w([]);return(async()=>{try{v.value=!0;const a=await Fe();a.success&&(g.value=a.data,Y(()=>{c.value.expandAll()}))}catch(a){return a}finally{v.value=!1}})(),(a,C)=>{const p=n("icon-search"),V=n("a-input"),b=He,F=n("icon-drive-file"),h=ne,S=n("a-tree"),x=n("a-scrollbar"),D=n("a-popover"),O=xe,_=n("a-trigger");return i(),M("div",Tt,[z("div",St,[e(V,{"allow-clear":"",maxlength:20,placeholder:f.placeholder,modelValue:u.value,"onUpdate:modelValue":C[0]||(C[0]=s=>u.value=s)},{prefix:t(()=>[e(p)]),_:1},8,["placeholder","modelValue"])]),z("div",Pt,[e(x,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(S,{ref_key:"treeRef",ref:c,"show-line":"",size:"mini",data:g.value,fieldNames:{key:"id"}},{"switcher-icon":t((s,{checked:l,selected:o,expanded:m})=>[s.children&&s.children.length&&m?(i(),y(b,{key:0,class:"switcher-icon",name:"plus-square",size:16})):s.children&&s.children.length&&!m?(i(),y(b,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(i(),y(F,{key:2,size:16}))]),icon:t(s=>[s.children?s.children?(i(),y(b,{key:1,name:"com-file-open",size:16})):(i(),y(b,{key:2,name:"com-file",size:16})):(i(),y(b,{key:0,name:"com-file-close",size:16}))]),title:t(s=>[e(_,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(O,{width:110,style:{"background-color":"var(--color-bg-3)","box-shadow":"0 4px 10px rgb(0 0 0 / 10%)"}},{default:t(()=>[e(h,{icon:"IconPlusCircle"},{default:t(()=>[Mt]),_:1}),e(h,{icon:"IconEdit"},{default:t(()=>[Nt]),_:1}),e(D,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(x,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(S,{ref:"treeMoveRef","show-line":"",size:"mini",data:g.value[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((l,{checked:o,selected:m,expanded:A})=>[l.children&&l.children.length&&A?(i(),y(b,{key:0,class:"switcher-icon",name:"plus-square",size:16})):l.children&&l.children.length&&!A?(i(),y(b,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(i(),y(F,{key:2,size:16}))]),icon:t(l=>[l.children?l.children?(i(),y(b,{key:1,name:"com-file-open",size:16})):(i(),y(b,{key:2,name:"com-file",size:16})):(i(),y(b,{key:0,name:"com-file-close",size:16}))]),_:2},1032,["data"])]),_:2},1024)]),default:t(()=>[e(h,{more:"",icon:"IconExport"},{default:t(()=>[Ot]),_:1})]),_:2},1024),e(h,{icon:"IconDelete"},{default:t(()=>[Rt]),_:1})]),_:2},1024)]),default:t(()=>[z("div",null,q(s.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const jt=G(Ut,[["__scopeId","data-v-d1a222fc"]]),qt={class:"gi_lr_page pane"},Gt={class:"left"},Ht={class:"right"},Wt={class:"content"},Lt=k("\u5220\u9664"),Xt={class:"table-box"},Jt=k("\u4FEE\u6539"),Yt=k("\u8BE6\u60C5"),Kt=k("\u5220\u9664"),Qt=N({name:"DataManage"}),Zt=N({...Qt,setup(f){const v=we(),{current:c,pageSize:u,total:g,changeCurrent:d,changePageSize:a,setTotal:C}=be(()=>{h()},{defaultPageSize:20}),p=K({name:"",status:""}),V=w([]),b=w(!1),F=o=>o<30?"danger":o<60?"warning":"success",h=async()=>{try{b.value=!0;const o=await De({current:c.value,pageSize:u.value,...p});V.value=o.data.list,C(o.data.total)}catch(o){return o}finally{b.value=!1}};h();const S=()=>{ge.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{V.value=[]}})},x=w(!1),D=w({}),O=o=>{D.value=o,x.value=!0},_=()=>{x.value=!0},s=()=>{v.push({path:"/data/detail"})},l=o=>{ke.success("\u5220\u9664\u6210\u529F"),h()};return(o,m)=>{const A=ye,U=n("icon-plus"),E=n("a-button"),R=n("icon-delete"),H=n("icon-download"),j=n("a-space"),I=n("a-option"),Q=n("a-select"),le=n("a-input"),ue=n("icon-search"),se=n("a-input-group"),ie=n("icon-refresh"),Z=n("a-row"),T=n("a-table-column"),ce=n("a-progress"),re=n("a-tag"),de=n("a-popconfirm"),_e=n("a-table"),pe=Ce("loading");return i(),M("section",qt,[z("div",Gt,[e(A,{title:"\u6570\u636E\u5206\u7C7B"}),e(jt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD"})]),z("div",Ht,[e(A,{title:"\u6570\u636E\u5217\u8868"}),z("div",Wt,[e(Z,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(j,null,{default:t(()=>[e(E,{type:"primary",onClick:_},{icon:t(()=>[e(U)]),_:1}),e(E,{type:"primary",status:"danger",onClick:S},{icon:t(()=>[e(R)]),default:t(()=>[Lt]),_:1}),e(E,{type:"primary",status:"success"},{icon:t(()=>[e(H)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(Q,{modelValue:p.status,"onUpdate:modelValue":m[0]||(m[0]=r=>p.status=r),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(i(!0),M(L,null,oe(B(ae),r=>(i(),y(I,{key:r.value,value:r.value},{default:t(()=>[k(q(r.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(se,null,{default:t(()=>[e(le,{modelValue:p.name,"onUpdate:modelValue":m[1]||(m[1]=r=>p.name=r),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(E,{type:"primary",onClick:h},{default:t(()=>[e(ue)]),_:1})]),_:1}),e(E,{type:"primary",onClick:h},{icon:t(()=>[e(ie)]),_:1})]),_:1})]),_:1}),z("section",Xt,[ve((i(),y(_e,{"row-key":"id",bordered:{cell:!0},data:V.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:{showPageSize:!0,total:B(g),current:B(c),pageSize:B(u)},onPageChange:B(d),onPageSizeChange:B(a)},{columns:t(()=>[e(T,{title:"\u5E8F\u53F7",width:68},{cell:t(r=>[k(q(r.rowIndex+1),1)]),_:1}),e(T,{title:"\u59D3\u540D","data-index":"name"}),e(T,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"startTime",width:180}),e(T,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(T,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:r})=>[e(ce,{status:F(r.proportion),percent:r.proportion/100},null,8,["status","percent"])]),_:1}),e(T,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:r})=>[(i(!0),M(L,null,oe(B(ae),P=>(i(),M(L,{key:P.value},[P.value===r.status?(i(),y(re,{key:0,color:P.color},{default:t(()=>[k(q(P.name),1)]),_:2},1032,["color"])):J("",!0)],64))),128))]),_:1}),e(T,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:r})=>[e(Z,{justify:"center"},{default:t(()=>[e(j,null,{default:t(()=>[e(E,{type:"primary",size:"mini",onClick:P=>O(r)},{default:t(()=>[Jt]),_:2},1032,["onClick"]),e(E,{size:"mini",onClick:s},{default:t(()=>[Yt]),_:1}),e(de,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:P=>l(r.id)},{default:t(()=>[e(E,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Kt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[pe,b.value]])])])]),e(Be,{modelValue:x.value,"onUpdate:modelValue":m[2]||(m[2]=r=>x.value=r),"form-data":D.value},null,8,["modelValue","form-data"])])}}});const en=G(Zt,[["__scopeId","data-v-34ceb5f2"]]),tn={class:"manage"},nn={class:"tab"},on=N({name:"DataManage"}),an=N({...on,setup(f){const v={1:It,2:en},c=w(2);return(u,g)=>{const d=n("a-tab-pane"),a=n("a-tabs");return i(),M("div",tn,[z("section",nn,[e(a,{"hide-content":"",size:"medium","active-key":c.value,"onUpdate:active-key":g[0]||(g[0]=C=>c.value=C)},{default:t(()=>[(i(),y(d,{key:1,title:"\u5468\u671F\u7BA1\u7406"})),(i(),y(d,{key:2,title:"\u7EF4\u5EA6\u7BA1\u7406"})),(i(),y(d,{key:3,title:"\u5355\u4F4D\u7BA1\u7406"}))]),_:1},8,["active-key"])]),(i(),y(Ue(v[c.value])))])}}});const fn=G(an,[["__scopeId","data-v-fbe7c622"]]);export{fn as default};
