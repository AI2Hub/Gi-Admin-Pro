import{_ as we}from"./GiTitle.a0066499.js";import{ew as ze,r as C,s as Se,v as Y,d as U,q as Fe,o as s,m as k,w as t,es as ye,ey as Ve,j as D,a as z,n as Te,el as Ie,et as Me,_ as ae,h as le,c as R,G as L,i as n,b as e,ei as X,k as w,eC as Pe,eD as Ne,L as Oe,em as ke,ej as Re,J as oe,K as G,I as W,p as Ue,e as qe,u as xe,er as be,M as J,ek as Ge,eG as je}from"./index.9df7633a.js";import"./index.463d26de.js";import{u as Be}from"./usePagination.3a26bdd5.js";import"./viewer.5ba78e67.js";import{g as De}from"./index.a052c595.js";import{o as He,c as We}from"./index.df4d323f.js";import{_ as ne,a as Ee}from"./GiOptionItem.395f1067.js";import{_ as Ke}from"./GiSvgIcon.c5d6784a.js";const Le="/mock";function $e(){return ze.get(`${Le}/cate/tree`)}function Xe(m,g,c={alignPoint:!1}){const l=C(!1),h=C(0),r=C(0),u=i=>{l.value=i},x=()=>{const i={};return m.clientX>window.innerWidth-r.value?i.right=c.alignPoint?window.innerWidth-m.clientX-h.value/2+"px":window.innerWidth-m.clientX+"px":i.left=c.alignPoint?m.clientX+h.value/2+"px":m.clientX+"px",m.clientY>window.innerHeight-r.value?(i.bottom=window.innerHeight-m.clientY+"px",i["transform-origin"]="center bottom"):(i.top=m.clientY+2+"px",i["transform-origin"]="center top"),i["z-index"]=999,i};return Se(()=>{l.value=!0,Y(()=>{!g||(r.value=g==null?void 0:g.offsetHeight,h.value=g==null?void 0:g.offsetWidth,x())})}),{visible:l,setVisible:u,getStyle:x}}function Je(m,g="\u65B0\u5EFA\u5206\u7C7B"){let c=0;for(let l=0;l<m.length+1;l++)if(!m.includes(`${g}${l+1}`)){c=l+1;break}return`${g}${c}`}const Ye=U({name:"GiContextMenu"}),Qe=U({...Ye,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(m,{expose:g,emit:c}){const l=m,h=C(null),{visible:r,setVisible:u,getStyle:x}=Xe(l.event,h,l.options);He(h,()=>{u(!1),c("close")},{capture:!1,ignore:l.ignoreRefs});const{width:i,height:E}=We();return Fe(()=>[i.value,E.value],()=>{u(!1),c("close")}),g({visible:r,onHidden:()=>{u(!1),c("close")}}),(P,y)=>(s(),k(Me,{name:"slide-dynamic-origin"},{default:t(()=>[ye(z("div",{class:"gi-context-menu",ref_key:"elRef",ref:h,style:Ie(D(x)())},[Te(P.$slots,"default",{},void 0,!0)],4),[[Ve,D(r)]])]),_:3}))}});const Ze=ae(Qe,[["__scopeId","data-v-4ada3c17"]]),et={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},tt=U({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(m,{emit:g}){const c=m,l=C(null),h=le({callback:{onClick:(u,x,i)=>{r(u,x,i)}}});Fe(c.treeData,()=>{Y(()=>{var u;l.value=$.fn.zTree.init($("#movetree"),h,c.treeData),(u=l.value)==null||u.expandAll(!0)})},{deep:!0,immediate:!0});function r(u,x,i){g("node-click",i)}return(u,x)=>(s(),R("ul",et,null,512))}}),nt=w("\u65B0\u589E"),ot=w("\u91CD\u547D\u540D"),at=w(" \u79FB\u52A8 "),lt=w("\u5220\u9664"),ut=U({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(m,{expose:g}){const c=m,l=C(null),h=C(null),r=C([h]),u=C(!1),x=L(()=>c.fileInfo.id!==""),i=L(()=>c.fileInfo.id!=="root"),E=L(()=>c.fileInfo.id!=="root"),T=L(()=>c.fileInfo.id!=="root"),P=()=>{u.value=!1,c.onClose()},y=A=>{if(A==="move")return u.value=!u.value,!1;Y(()=>{var b;c.onClick(A),(b=l.value)==null||b.onHidden()})},B=()=>{var A;(A=l.value)==null||A.onHidden()};return g({menuRef:l,showMoveTreePopup:u,onClose:P,onClickItem:y}),(A,b)=>{const N=n("a-popover");return s(),k(Ze,{ref_key:"menuRef",ref:l,event:m.event,ignoreRefs:r.value,onClose:P},{default:t(()=>[e(Ee,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[D(x)?(s(),k(ne,{key:0,icon:"IconPlusCircle",onClick:b[0]||(b[0]=d=>y("add"))},{default:t(()=>[nt]),_:1})):X("",!0),D(i)?(s(),k(ne,{key:1,icon:"IconEdit",onClick:b[1]||(b[1]=d=>y("rename"))},{default:t(()=>[ot]),_:1})):X("",!0),e(N,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":u.value},{content:t(()=>[z("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:h},[e(tt,{"tree-data":m.treeData,onNodeClick:B},null,8,["tree-data"])],512)]),default:t(()=>[D(E)?(s(),k(ne,{key:0,more:"",icon:"IconExport",active:u.value,onClick:b[2]||(b[2]=d=>y("move"))},{default:t(()=>[at]),_:1},8,["active"])):X("",!0)]),_:1},8,["popup-visible"]),D(T)?(s(),k(ne,{key:2,icon:"IconDelete",onClick:b[3]||(b[3]=d=>y("delete"))},{default:t(()=>[lt]),_:1})):X("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const st=ae(ut,[["__scopeId","data-v-e36b4e3d"]]);let H=null,K=null;function it(m,g,c){return new Promise(l=>{h(),K=document.createElement("div"),document.body.appendChild(K),H=Pe(st,{event:m,fileInfo:g,treeData:c,onClick:r=>{l({mode:r,fileInfo:g}),setTimeout(()=>{h()},360)},onClose:()=>{setTimeout(()=>{h()},360)}}),H.use(Ne),H.use(Oe),H.mount(K);function h(){H!==null&&(H.unmount(),H=null),K!==null&&(document.body.removeChild(K),K=null)}})}const he="/gi-demo/assets/com-file-open.a82dbda1.svg",te="/gi-demo/assets/com-file-close.e0ebbcc4.svg",ct="/gi-demo/assets/com-file.9070581a.svg",rt={class:"cate-tree"},dt={class:"search-wrap"},_t={class:"wrap"},pt=U({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(m,{emit:g}){const c=C(!1),l=C(""),h=C(null),r=C([]),u=C(null),x=C(null),i=(d,v,_)=>{console.log("\u70B9\u51FB\u8282\u70B9",_),x.value=_,g("node-click")},E=le({callback:{onRightClick:(d,v,_)=>{console.log("\u9F20\u6807\u53F3\u952E",_),_&&(x.value=_,it(d,_,r.value).then(o=>{console.log("res",o),o.mode==="add"&&y(),o.mode==="rename"&&B(),o.mode==="delete"&&A()}))},onClick:(d,v,_)=>{i(d,v,_)}}}),T=d=>{if(!d.length)return;function v(_){_.forEach(o=>{o.children&&o.children.length?(o.iconOpen=he,o.iconClose=te,v(o.children)):(o.children=null,o.iconOpen=he,o.iconClose=te,o.icon=te,o.type==null&&(o.icon=ct))})}v(d)};(async()=>{try{c.value=!0;const d=await $e();if(d.success){const v=d.data;T(v),r.value=v,Y(()=>{var _;u.value=$.fn.zTree.init($("#treeDemo"),E,r.value),(_=u.value)==null||_.expandAll(!0)})}}catch(d){return d}finally{c.value=!1}})();const y=()=>{var q,a,f;const d=((q=x.value)==null?void 0:q.children)||[];let v="\u65B0\u5EFA\u5206\u7C7B1";if(d&&d.length){const I=d.map(j=>j.name);v=Je(I,"\u65B0\u5EFA\u5206\u7C7B")}const _=new Date().getTime().toString(),o={id:_,name:v,children:null,iconOpen:he,iconClose:te,icon:te,isParent:!1};(a=u.value)==null||a.addNodes(x.value||{},o,!0);const F=(f=u.value)==null?void 0:f.getNodesByParam("id",_);setTimeout(()=>{var I;(I=u.value)==null||I.editName(F[0])},100)},B=()=>{Y(()=>{var v,_,o;const d=(_=u.value)==null?void 0:_.getNodesByParam("id",(v=x.value)==null?void 0:v.id);(o=u.value)==null||o.editName(d[0])})},A=()=>{ke.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1})},b=(d,v)=>{let _=!1;if(d.name.indexOf(v)>-1&&(_=!0),d.children){const o=d.children;for(let F=0;F<o.length;F++){const q=o[F];b(q,v)?_=!0:o.splice(F--,1)}}return _},N=()=>{var v,_;let d=l.value;if(!d)u.value=$.fn.zTree.init($("#treeDemo"),E,r.value),(v=u.value)==null||v.expandAll(!0);else{const o=JSON.parse(JSON.stringify(r.value));for(let F=0;F<o.length;F++)b(o[F],d)||o.splice(F--,1);u.value=$.fn.zTree.init($("#treeDemo"),E,o),(_=u.value)==null||_.expandAll(!0)}};return(d,v)=>{const _=n("icon-search"),o=n("a-input");return s(),R("div",rt,[z("div",dt,[e(o,{"allow-clear":"",maxlength:20,placeholder:m.placeholder,modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=F=>l.value=F),onInput:N,onClear:N},{prefix:t(()=>[e(_)]),_:1},8,["placeholder","modelValue"])]),z("div",_t,[z("ul",{id:"treeDemo",ref_key:"treeRef",ref:h,class:"ztree cate-ztree"},null,512)])])}}});const mt=ae(pt,[["__scopeId","data-v-f49d6ff3"]]),Ce=m=>(Ue("data-v-7c4411df"),m=m(),qe(),m),ft=Ce(()=>z("div",null,"\u4EC5\u652F\u6301\u4E2D\u6587\u59D3\u540D",-1)),vt=w("\u5173\u95ED"),gt=w("\u5F00\u542F"),ht=Ce(()=>z("span",null,"\u6743\u9650\u914D\u7F6E",-1)),yt=Ce(()=>z("span",null,"\u81EA\u5B9A\u4E49\u7BA1\u7406\u5458\u3001\u7F16\u8F91\u8005\u7684\u6743\u9650\uFF0C \u70B9\u51FB",-1)),kt=w("\u4E86\u89E3\u66F4\u591A\u6743\u9650"),Ct=w("\u7BA1\u7406\u5458"),wt=w("\u7F16\u8F91\u8005"),Ft=U({__name:"EditModal",setup(m,{expose:g}){const c=[{name:"\u65B0\u589E"},{name:"\u7F16\u8F91"},{name:"\u91CD\u547D\u540D"},{name:"\u5206\u4EAB"},{name:"\u5220\u9664"}],l=le({name:"",address:"",status:!1}),h={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{minLength:1,maxLength:4,message:"\u540D\u5B57\u6700\u957F\u4E0D\u8D85\u8FC74\u4E2A\u5B57\u7B26"}],status:[{required:!0}]},r=C(!1),u=C(""),x=L(()=>!!u.value),i=L(()=>x.value?"\u7F16\u8F91":"\u65B0\u589E"),E=()=>{r.value=!1};return g({add:()=>{u.value="",r.value=!0},edit:y=>{u.value=y,r.value=!0}}),(y,B)=>{const A=n("a-input"),b=n("a-form-item"),N=n("a-radio"),d=n("a-radio-group"),v=n("a-form"),_=n("a-row"),o=n("icon-question-circle-fill"),F=n("a-link"),q=n("a-tooltip"),a=n("a-space"),f=n("icon-right"),I=n("a-checkbox"),j=n("a-checkbox-group"),S=n("a-collapse-item"),Q=n("a-collapse"),Z=n("a-modal");return s(),k(Z,{visible:r.value,"onUpdate:visible":B[3]||(B[3]=V=>r.value=V),title:D(i),onOk:E},{default:t(()=>[e(_,{justify:"center"},{default:t(()=>[e(v,{ref:"formRef",model:l,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(b,{field:"name",label:"\u59D3\u540D",rules:h.name},{extra:t(()=>[ft]),default:t(()=>[e(A,{modelValue:l.name,"onUpdate:modelValue":B[0]||(B[0]=V=>l.name=V),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(b,{field:"address",label:"\u5730\u5740"},{default:t(()=>[e(A,{modelValue:l.address,"onUpdate:modelValue":B[1]||(B[1]=V=>l.address=V),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(b,{field:"status",label:"\u72B6\u6001",rules:h.status},{default:t(()=>[e(d,{modelValue:l.status,"onUpdate:modelValue":B[2]||(B[2]=V=>l.status=V)},{default:t(()=>[e(N,{value:!1},{default:t(()=>[vt]),_:1}),e(N,{value:!0},{default:t(()=>[gt]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(Q,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(S,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(a,null,{default:t(()=>[ht,e(q,{position:"right","content-style":{width:"200px"}},{content:t(()=>[yt,e(F,{type:"primary",hoverable:!1},{default:t(()=>[kt]),_:1})]),default:t(()=>[e(o,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:V})=>[e(f,{class:Re({gi_rotate_90deg:V})},null,8,["class"])]),default:t(()=>[(s(),R(W,null,oe(c,(V,ee)=>e(_,{justify:"space-between",key:ee},{default:t(()=>[z("span",null,G(V.name),1),e(j,null,{default:t(()=>[e(I,{value:"1"},{default:t(()=>[Ct]),_:1}),e(I,{value:"2"},{default:t(()=>[wt]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Ae=ae(Ft,[["__scopeId","data-v-7c4411df"]]),ue=[{name:"\u7981\u7528",value:0,color:"#f53f3f"},{name:"\u542F\u7528",value:1,color:"#00b42a"}],xt={class:"data-pane"},bt={class:"gi_box pane-left"},Bt={class:"gi_box pane-right"},Dt={class:"content"},Et=w("\u65B0\u589E"),$t=w("\u5220\u9664"),At=w("\u5BFC\u51FA"),zt={class:"table-box"},St=w("\u4FEE\u6539"),Vt=w("\u8BE6\u60C5"),Tt=w("\u5220\u9664"),It=U({name:"DataManage"}),Mt=U({...It,setup(m){const g=xe(),{current:c,pageSize:l,total:h,changeCurrent:r,changePageSize:u,setTotal:x}=Be(()=>{B()}),i=le({name:"",status:""}),E=C([]),T=C(!1),P=C(),y=a=>a<30?"danger":a<60?"warning":"success",B=async()=>{T.value=!0;const a=await De({current:c.value,pageSize:l.value,...i});a.success&&(E.value=a.data.list,x(a.data.total)),T.value=!1};B();const A=()=>{ke.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{E.value=[]}})},b=()=>{var a;(a=P.value)==null||a.add()},N=a=>{var f;(f=P.value)==null||f.edit(a.id)},d=()=>{g.push({path:"/data/detail"})},v=a=>{J.success("\u5220\u9664\u6210\u529F"),B()},_=()=>{if(!o.value.length)return J.warning("\u8BF7\u52FE\u9009\u6570\u636E");J.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},o=C([]),F=(a,f,I)=>{o.value=a},q=a=>{a?o.value=E.value.map(f=>f.id):o.value=[]};return(a,f)=>{const I=we,j=n("icon-plus"),S=n("a-button"),Q=n("icon-delete"),Z=n("icon-export"),V=n("a-space"),ee=n("a-option"),se=n("a-select"),ie=n("a-input"),ce=n("icon-search"),re=n("a-input-group"),de=n("icon-refresh"),_e=n("a-row"),M=n("a-table-column"),pe=n("a-progress"),me=n("a-tag"),fe=n("a-popconfirm"),ve=n("a-table"),ge=be("loading");return s(),R("div",xt,[z("section",bt,[e(I,{title:"\u6570\u636E\u5206\u7C7B"}),e(mt,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:f[0]||(f[0]=p=>D(r)(1))})]),z("section",Bt,[e(I,{title:"\u6570\u636E\u5217\u8868"}),z("div",Dt,[e(_e,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(V,null,{default:t(()=>[e(S,{type:"primary",onClick:b},{icon:t(()=>[e(j)]),default:t(()=>[Et]),_:1}),e(S,{type:"primary",status:"danger",onClick:A},{icon:t(()=>[e(Q)]),default:t(()=>[$t]),_:1}),e(S,{type:"primary",status:"success",onClick:_},{icon:t(()=>[e(Z)]),default:t(()=>[At]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(se,{modelValue:i.status,"onUpdate:modelValue":f[1]||(f[1]=p=>i.status=p),placeholder:"\u8BF7\u9009\u62E9","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(s(!0),R(W,null,oe(D(ue),p=>(s(),k(ee,{key:p.value,value:p.value},{default:t(()=>[w(G(p.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(re,null,{default:t(()=>[e(ie,{modelValue:i.name,"onUpdate:modelValue":f[2]||(f[2]=p=>i.name=p),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(S,{type:"primary",onClick:B},{default:t(()=>[e(ce)]),_:1})]),_:1}),e(S,{type:"primary",onClick:B},{icon:t(()=>[e(de)]),_:1})]),_:1})]),_:1}),z("section",zt,[ye((s(),k(ve,{"row-key":"id",bordered:{cell:!0},data:E.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:{showPageSize:!0,total:D(h),current:D(c),pageSize:D(l)},onPageChange:D(r),onPageSizeChange:D(u),onSelect:F,onSelectAll:q},{columns:t(()=>[e(M,{title:"\u5E8F\u53F7",width:68},{cell:t(({rowIndex:p})=>[w(G(p+1),1)]),_:1}),e(M,{title:"\u59D3\u540D","data-index":"name"}),e(M,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"startTime",width:180}),e(M,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(M,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:p})=>[e(pe,{status:y(p.proportion),percent:p.proportion/100},null,8,["status","percent"])]),_:1}),e(M,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:p})=>[(s(!0),R(W,null,oe(D(ue),O=>(s(),R(W,{key:O.value},[O.value===p.status?(s(),k(me,{key:0,color:O.color},{default:t(()=>[w(G(O.name),1)]),_:2},1032,["color"])):X("",!0)],64))),128))]),_:1}),e(M,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:p})=>[e(V,null,{default:t(()=>[e(S,{type:"primary",size:"mini",onClick:O=>N(p)},{default:t(()=>[St]),_:2},1032,["onClick"]),e(S,{size:"mini",onClick:d},{default:t(()=>[Vt]),_:1}),e(fe,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:O=>v(p.id)},{default:t(()=>[e(S,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[Tt]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[ge,T.value]])])])]),e(Ae,{ref_key:"EditModalRef",ref:P},null,512)])}}}),Pt={class:"cate-tree"},Nt={class:"search-wrap"},Ot={class:"wrap"},Rt=w("\u65B0\u589E"),Ut=w("\u91CD\u547D\u540D"),qt=w(" \u79FB\u52A8 "),Gt=w("\u5220\u9664"),jt=U({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"}},emits:["node-click"],setup(m,{emit:g}){const c=C(!1),l=C(),h=C(""),r=C([]),u=()=>{g("node-click")};return(async()=>{try{c.value=!0;const i=await $e();i.success&&(r.value=i.data,Y(()=>{l.value.expandAll()}))}catch(i){return i}finally{c.value=!1}})(),(i,E)=>{const T=n("icon-search"),P=n("a-input"),y=Ke,B=n("icon-drive-file"),A=ne,b=n("a-tree"),N=n("a-scrollbar"),d=n("a-popover"),v=Ee,_=n("a-trigger");return s(),R("div",Pt,[z("div",Nt,[e(P,{"allow-clear":"",maxlength:20,placeholder:m.placeholder,modelValue:h.value,"onUpdate:modelValue":E[0]||(E[0]=o=>h.value=o)},{prefix:t(()=>[e(T)]),_:1},8,["placeholder","modelValue"])]),z("div",Ot,[e(N,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(b,{ref_key:"treeRef",ref:l,"show-line":"",size:"mini",data:r.value,fieldNames:{key:"id"},onSelect:u},{"switcher-icon":t((o,{checked:F,selected:q,expanded:a})=>[o.children&&o.children.length&&a?(s(),k(y,{key:0,class:"switcher-icon",name:"plus-square",size:16})):o.children&&o.children.length&&!a?(s(),k(y,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(s(),k(B,{key:2,size:16}))]),icon:t(o=>[o.children?o.children?(s(),k(y,{key:1,name:"com-file-open",size:16})):(s(),k(y,{key:2,name:"com-file",size:16})):(s(),k(y,{key:0,name:"com-file-close",size:16}))]),title:t(o=>[e(_,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(v,{width:110,style:{"background-color":"var(--color-bg-3)","box-shadow":"0 4px 10px rgb(0 0 0 / 10%)"}},{default:t(()=>[e(A,{icon:"IconPlusCircle"},{default:t(()=>[Rt]),_:1}),e(A,{icon:"IconEdit"},{default:t(()=>[Ut]),_:1}),e(d,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(N,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(b,{ref:"treeMoveRef","show-line":"",size:"mini",data:r.value[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((F,{checked:q,selected:a,expanded:f})=>[F.children&&F.children.length&&f?(s(),k(y,{key:0,class:"switcher-icon",name:"plus-square",size:16})):F.children&&F.children.length&&!f?(s(),k(y,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(s(),k(B,{key:2,size:16}))]),icon:t(F=>[F.children?F.children?(s(),k(y,{key:1,name:"com-file-open",size:16})):(s(),k(y,{key:2,name:"com-file",size:16})):(s(),k(y,{key:0,name:"com-file-close",size:16}))]),_:2},1032,["data"])]),_:2},1024)]),default:t(()=>[e(A,{more:"",icon:"IconExport"},{default:t(()=>[qt]),_:1})]),_:2},1024),e(A,{icon:"IconDelete"},{default:t(()=>[Gt]),_:1})]),_:2},1024)]),default:t(()=>[z("div",null,G(o.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const Ht=ae(jt,[["__scopeId","data-v-a1194cef"]]),Wt={class:"data-pane"},Kt={class:"gi_box pane-left"},Lt={class:"gi_box pane-right"},Xt={class:"content"},Jt=w("\u5220\u9664"),Yt={class:"table-box"},Qt=w("\u4FEE\u6539"),Zt=w("\u8BE6\u60C5"),en=w("\u5220\u9664"),tn=U({name:"DataManage"}),nn=U({...tn,setup(m){const g=xe(),{current:c,pageSize:l,total:h,changeCurrent:r,changePageSize:u,setTotal:x}=Be(()=>{y()},{defaultPageSize:20}),i=le({name:"",status:""}),E=C([]),T=C(!1),P=a=>a<30?"danger":a<60?"warning":"success",y=async()=>{try{T.value=!0;const a=await De({current:c.value,pageSize:l.value,...i});E.value=a.data.list,x(a.data.total)}catch(a){return a}finally{T.value=!1}};y();const B=()=>{ke.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F",hideCancel:!1,onOk:()=>{E.value=[]}})},A=C(),b=()=>{var a;(a=A.value)==null||a.add()},N=a=>{var f;(f=A.value)==null||f.edit(a.id)},d=()=>{g.push({path:"/data/detail"})},v=a=>{J.success("\u5220\u9664\u6210\u529F"),y()},_=()=>{if(!o.value.length)return J.warning("\u8BF7\u52FE\u9009\u6570\u636E");J.success("\u70B9\u51FB\u4E86\u5BFC\u51FA")},o=C([]),F=(a,f,I)=>{o.value=a},q=a=>{a?o.value=E.value.map(f=>f.id):o.value=[]};return(a,f)=>{const I=we,j=n("icon-plus"),S=n("a-button"),Q=n("icon-delete"),Z=n("icon-export"),V=n("a-space"),ee=n("a-option"),se=n("a-select"),ie=n("a-input"),ce=n("icon-search"),re=n("a-input-group"),de=n("icon-refresh"),_e=n("a-row"),M=n("a-table-column"),pe=n("a-progress"),me=n("a-tag"),fe=n("a-popconfirm"),ve=n("a-table"),ge=be("loading");return s(),R("div",Wt,[z("section",Kt,[e(I,{title:"\u6570\u636E\u5206\u7C7B"}),e(Ht,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onNodeClick:f[0]||(f[0]=p=>D(r)(1))})]),z("section",Lt,[e(I,{title:"\u6570\u636E\u5217\u8868"}),z("div",Xt,[e(_e,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(V,null,{default:t(()=>[e(S,{type:"primary",onClick:b},{icon:t(()=>[e(j)]),_:1}),e(S,{type:"primary",status:"danger",onClick:B},{icon:t(()=>[e(Q)]),default:t(()=>[Jt]),_:1}),e(S,{type:"primary",status:"success",onClick:_},{icon:t(()=>[e(Z)]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(se,{modelValue:i.status,"onUpdate:modelValue":f[1]||(f[1]=p=>i.status=p),class:"gi_select_input",placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[(s(!0),R(W,null,oe(D(ue),p=>(s(),k(ee,{key:p.value,value:p.value},{default:t(()=>[w(G(p.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(re,null,{default:t(()=>[e(ie,{modelValue:i.name,"onUpdate:modelValue":f[2]||(f[2]=p=>i.name=p),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":""},null,8,["modelValue"]),e(S,{type:"primary",onClick:y},{default:t(()=>[e(ce)]),_:1})]),_:1}),e(S,{type:"primary",onClick:y},{icon:t(()=>[e(de)]),_:1})]),_:1})]),_:1}),z("section",Yt,[ye((s(),k(ve,{"row-key":"id",bordered:{cell:!0},data:E.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:{showPageSize:!0,total:D(h),current:D(c),pageSize:D(l)},onPageChange:D(r),onPageSizeChange:D(u),onSelect:F,onSelectAll:q},{columns:t(()=>[e(M,{title:"\u5E8F\u53F7",width:68},{cell:t(p=>[w(G(p.rowIndex+1),1)]),_:1}),e(M,{title:"\u59D3\u540D","data-index":"name"}),e(M,{title:"\u5730\u5740","data-index":"address",ellipsis:"",tooltip:""}),e(M,{title:"\u6BD4\u4F8B",width:200},{cell:t(({record:p})=>[e(pe,{status:P(p.proportion),percent:p.proportion/100},null,8,["status","percent"])]),_:1}),e(M,{title:"\u72B6\u6001",width:100,align:"center"},{cell:t(({record:p})=>[(s(!0),R(W,null,oe(D(ue),O=>(s(),R(W,{key:O.value},[O.value===p.status?(s(),k(me,{key:0,color:O.color},{default:t(()=>[w(G(O.name),1)]),_:2},1032,["color"])):X("",!0)],64))),128))]),_:1}),e(M,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"startTime",width:180}),e(M,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:t(({record:p})=>[e(V,null,{default:t(()=>[e(S,{type:"primary",size:"mini",onClick:O=>N(p)},{default:t(()=>[Qt]),_:2},1032,["onClick"]),e(S,{size:"mini",onClick:d},{default:t(()=>[Zt]),_:1}),e(fe,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:O=>v(p.id)},{default:t(()=>[e(S,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[en]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[ge,T.value]])])])]),e(Ae,{ref_key:"EditModalRef",ref:A},null,512)])}}}),on={class:"manage"},an={class:"tab"},ln=U({name:"DataManage"}),vn=U({...ln,setup(m){const g={1:Mt,2:nn},c=C(2);return(l,h)=>{const r=n("a-tab-pane"),u=n("a-tabs");return s(),R("div",on,[z("section",an,[e(u,{"hide-content":"",size:"medium","active-key":c.value,"onUpdate:active-key":h[0]||(h[0]=x=>c.value=x)},{default:t(()=>[(s(),k(r,{key:1,title:"\u5468\u671F\u7BA1\u7406"})),(s(),k(r,{key:2,title:"\u7EF4\u5EA6\u7BA1\u7406"})),(s(),k(r,{key:3,title:"\u5355\u4F4D\u7BA1\u7406"}))]),_:1},8,["active-key"])]),(s(),k(je,null,[(s(),k(Ge(g[c.value])))],1024))])}}});export{vn as default};
