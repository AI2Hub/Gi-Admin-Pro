import{_ as e}from"./GiCellGender.vue_vue_type_script_setup_true_lang-qfCQVMZn.js";import{_ as a}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BBCAw3f_.js";import{_ as l}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-DQM-IS-e.js";import{_ as t}from"./AddUserModal.vue_vue_type_script_setup_true_lang-DkyXxtR9.js";import{_ as n}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-ByGTRcjt.js";import{d as i,b as r,U as s,e as d,o,f as u,h as c,w as p,g as m,J as _,I as f,t as g,c as y,a as x,L as v,i as h,V as w,S as k}from"./index-D01VDiOw.js";import{u as j}from"./useTable-DgjMuorM.js";import{u as b}from"./useDept-CxVRTmNQ.js";import{a as S}from"./user-BMlzven2.js";import{d as C}from"./index-D0OD1e0Y.js";import{u as V}from"./useDict-DXFy3dw1.js";import"./regexp-LyZ7ySAN.js";import"./role-okUf_Oh-.js";import"./useForm-CJ-SnJyF.js";import"./useBreakpoint-DNomJZct.js";import"./index-ix9enW3c.js";const U={class:"gi_page user-manage"},A=h("span",null,"新增",-1),D=h("span",null,"删除",-1),z=h("span",null,"查询",-1),B=h("span",null,"重置",-1),G=h("span",null,"编辑",-1),L=h("span",null,"删除",-1),M=i({name:"SystemUser",__name:"index",setup(i){const{data:h}=V({code:"status"}),M=r(),R=r(),I=r(),J=r(""),{deptList:O,getDeptList:T}=b({onSuccess:()=>{k((()=>{var e;null==(e=M.value)||e.expandAll(!0)}))}});T();const W=s({status:"",username:""}),{loading:F,tableData:K,pagination:N,selectedKeys:X,search:Y,select:q,selectAll:E,handleDelete:H}=j((e=>S(e)),{immediate:!0}),P=()=>{W.status="",W.username="",Y()},Q=()=>{if(!X.value.length)return w.warning("请选择用户！");H((()=>C({ids:X.value})))},Z=()=>{var e;null==(e=R.value)||e.add()};return(i,r)=>{const s=d("icon-search"),w=d("a-input"),k=d("a-tree"),j=d("a-col"),b=d("icon-plus"),S=d("a-button"),V=d("icon-delete"),T=d("a-space"),$=d("a-select"),ee=d("a-input-group"),ae=d("icon-refresh"),le=d("a-row"),te=d("a-table-column"),ne=d("a-link"),ie=l,re=a,se=e,de=d("a-tag"),oe=d("icon-edit"),ue=d("a-popconfirm"),ce=d("a-table"),pe=d("a-card");return o(),u("div",U,[c(pe,{title:"用户管理"},{default:p((()=>[c(le,{gutter:16},{default:p((()=>[c(j,{xs:0,md:6,lg:6,xl:6,xxl:4},{default:p((()=>[c(w,{modelValue:m(J),"onUpdate:modelValue":r[0]||(r[0]=e=>_(J)?J.value=e:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:p((()=>[c(s)])),_:1},8,["modelValue"]),c(k,{ref_key:"treeRef",ref:M,"block-node":"","show-line":"","default-expand-all":"",data:m(O),"field-names":{key:"id",title:"name",children:"children"},onSelect:m(Y)},null,8,["data","onSelect"])])),_:1}),c(j,{xs:24,md:18,lg:18,xl:18,xxl:20},{default:p((()=>[c(le,{justify:"space-between"},{default:p((()=>[c(T,{wrap:""},{default:p((()=>[c(S,{type:"primary",onClick:Z},{icon:p((()=>[c(b)])),default:p((()=>[A])),_:1}),c(S,{type:"primary",status:"danger",onClick:Q},{icon:p((()=>[c(V)])),default:p((()=>[D])),_:1})])),_:1}),c(T,{wrap:""},{default:p((()=>[c(ee,null,{default:p((()=>[c($,{modelValue:m(W).status,"onUpdate:modelValue":r[1]||(r[1]=e=>m(W).status=e),options:m(h),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),c(w,{modelValue:m(W).username,"onUpdate:modelValue":r[2]||(r[2]=e=>m(W).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])])),_:1}),c(S,{type:"primary",onClick:m(Y)},{icon:p((()=>[c(s)])),default:p((()=>[z])),_:1},8,["onClick"]),c(S,{onClick:P},{icon:p((()=>[c(ae)])),default:p((()=>[B])),_:1})])),_:1})])),_:1}),c(ce,{"row-key":"id",loading:m(F),data:m(K),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:m(N),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":m(X),onSelect:m(q),onSelectAll:m(E)},{columns:p((()=>[c(te,{title:"序号",width:64},{cell:p((e=>[f(g(e.rowIndex+1),1)])),_:1}),c(te,{title:"用户名","data-index":"username",width:120},{cell:p((({record:e})=>[c(ne,{onClick:a=>{return l=e,void(null==(t=I.value)||t.open(l.id));var l,t}},{default:p((()=>[f(g(e.username),1)])),_:2},1032,["onClick"])])),_:1}),c(te,{title:"昵称","data-index":"nickname",width:150},{cell:p((({record:e})=>[c(ie,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),c(te,{title:"状态",width:100,align:"center"},{cell:p((({record:e})=>[c(re,{status:e.status},null,8,["status"])])),_:1}),c(te,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:p((({record:e})=>[c(se,{gender:e.gender},null,8,["gender"])])),_:1}),c(te,{title:"联系方式","data-index":"phone",width:180}),c(te,{title:"部门","data-index":"deptName",width:180}),c(te,{title:"类型",width:100,align:"center"},{cell:p((({record:e})=>[1===e.type?(o(),y(de,{key:0,color:"red",size:"small"},{default:p((()=>[f("系统内置")])),_:1})):x("",!0),2===e.type?(o(),y(de,{key:1,color:"orange",size:"small"},{default:p((()=>[f("自定义")])),_:1})):x("",!0)])),_:1}),c(te,{title:"描述",width:200,"data-index":"description"}),c(te,{title:"创建时间","data-index":"createTime",width:200}),c(te,{title:"操作",width:180,align:"center",fixed:m(v)()?void 0:"right"},{cell:p((({record:e})=>[c(T,null,{default:p((()=>[c(S,{type:"primary",size:"mini",onClick:a=>{return l=e,void(null==(t=R.value)||t.edit(l.id));var l,t}},{icon:p((()=>[c(oe)])),default:p((()=>[G])),_:2},1032,["onClick"]),c(ue,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:a=>{return l=e,H((()=>C({ids:[l.id]})),{showModal:!1});var l}},{default:p((()=>[c(S,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:p((()=>[c(V)])),default:p((()=>[L])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])])),_:1})])),_:1})])),_:1}),c(t,{ref_key:"AddUserModalRef",ref:R,onSaveSuccess:m(Y)},null,8,["onSaveSuccess"]),c(n,{ref_key:"UserDetailDrawerRef",ref:I},null,512)])}}});export{M as default};
