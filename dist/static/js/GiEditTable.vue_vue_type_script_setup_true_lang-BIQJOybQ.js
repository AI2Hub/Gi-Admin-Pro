import{d as e,u as l,k as a,J as t,e as r,o,f as d,h as i,w as c,m as n,g as s,F as u,j as p,c as m,G as b,t as f,r as x,E as w,i as k}from"./index-BUFsz7Wk.js";const h={class:"gi-edit-table"},g=["onDblclick"],y=["onDblclick"],$=e({name:"GiEditTable",inheritAttrs:!1,__name:"GiEditTable",props:{columns:{},data:{},cellDisabled:{default:!1}},emits:["tr-dblclick","td-dblclick"],setup(e,{expose:$,emit:I}){const _=e,D=I,C=l(),q=a((()=>({tableData:_.data}))),v=t("formRef"),V=e=>e.required?"gi_column_require":"",E=e=>({...new Map([["input",{allowClear:!0,placeholder:`请输入${e.title}`,maxLength:50}],["input-number",{placeholder:`请输入${e.title}`}],["textarea",{allowClear:!1,placeholder:`请填写${e.title}`,maxLength:200}],["input-tag",{allowClear:!0,placeholder:`请输入${e.title}`}],["mention",{allowClear:!0,placeholder:`请输入${e.title}`}],["select",{allowClear:!0,placeholder:`请选择${e.title}`}],["tree-select",{allowClear:!0,placeholder:`请选择${e.title}`}],["cascader",{allowClear:!0,placeholder:`请选择${e.title}`}],["radio-group",{}],["checkbox-group",{}],["date-picker",{allowClear:!0,placeholder:"请选择日期"}],["time-picker",{allowClear:!0,placeholder:"请选择时间"}]]).get(e.type)||{},...e.props}),G=e=>["input","input-number","input-tag","mention"].includes(e.type??"")?`请输入${e.title}`:["textarea"].includes(e.type??"")?`请填写${e.title}`:`请选择${e.title}`;return $({formRef:v}),(e,l)=>{const a=r("a-form-item"),t=r("a-table-column"),$=r("a-table"),I=r("a-form");return o(),d("div",h,[i(I,{ref_key:"formRef",ref:v,"scroll-to-first-error":"",model:s(q)},{default:c((()=>[i($,n({data:s(q).tableData,bordered:{cell:!0},pagination:!1},s(C)),{columns:c((()=>[(o(!0),d(u,null,p(_.columns,(l=>(o(),m(t,n({key:l.dataIndex,"data-index":l.dataIndex,"header-cell-class":V(l),ref_for:!0},l.columnProps),{title:c((()=>["string"==typeof l.title?(o(),d(u,{key:0},[b(f(l.title),1)],64)):(o(),m(x(l.title),{key:1}))])),cell:c((({record:t,rowIndex:r,column:d})=>[i(a,n({field:`tableData[${r}].${l.dataIndex}`,"label-col-style":{display:"none"},"wrapper-col-props":{span:24},ref_for:!0},l.formItemProps,{rules:[{required:l.required||!1,message:G(l)},...l.rules||[]]}),{default:c((()=>{return[l.slotName?w(e.$slots,l.dataIndex,n({key:0,ref_for:!0},{record:t,rowIndex:r,column:d})):(o(),m(x(`a-${l.type}`),n({key:1,ref_for:!0},E(l),{modelValue:t[l.dataIndex],"onUpdate:modelValue":e=>t[l.dataIndex]=e,disabled:(a={row:t,rowIndex:r,col:l},"boolean"==typeof(null==_?void 0:_.cellDisabled)?_.cellDisabled:"function"==typeof(null==_?void 0:_.cellDisabled)&&_.cellDisabled(a))}),null,16,["modelValue","onUpdate:modelValue","disabled"]))];var a})),_:2},1040,["field","rules"])])),_:2},1040,["data-index","header-cell-class"])))),128))])),tr:c((({record:e,rowIndex:l})=>[k("tr",{class:"gi-edit-table-tr",onDblclick:a=>D("tr-dblclick",{record:e,rowIndex:l})},null,40,g)])),td:c((({record:e,column:l,rowIndex:a})=>[k("td",{class:"gi-edit-table-td",onDblclick:t=>D("td-dblclick",{record:e,column:l,rowIndex:a})},null,40,y)])),_:3},16,["data"])])),_:3},8,["model"])])}}});export{$ as _};
