import{v as Ne,a as $e,c as Ae}from"./runtime-dom.esm-bundler-fb8da9e1.js";import{_ as ze}from"./GiHead-f7ef0233.js";import{u as ge}from"./vue-router-7a234af7.js";import"./index-03184213.js";import{u as he}from"./usePagination-97e6fcb8.js";import{r as Re}from"./index-e4360b37.js";import{g as ye}from"./index-9d06dd09.js";import{o as Pe,d as Oe}from"./index-a8d96e52.js";import{h as g,l as Ee,N as Q,f as P,k as Ie,o as d,c as b,w as t,a1 as ce,e as I,n as Be,u as R,R as Ue,_ as X,J as se,b as O,j as Y,r as n,a as e,V as k,i as K,Q as Ge,F as j,a2 as Z,t as H,p as Te,d as Ve,a8 as ke,ad as we,ae as He,g as We}from"./_plugin-vue_export-helper-916c4ad5.js";import{G as je,a as ie}from"./GiOptionItem-c892ae4b.js";import{A as qe}from"./arco-vue-2eef56f4.js";import{A as Fe}from"./arco-vue-icon-ab53ef13.js";import{M as xe}from"./index-ddbb5955.js";import{O as Le,P as Ke}from"./regexp-52ced781.js";import{l as q}from"./index-faf5766f.js";import{_ as be}from"./GiSvgIcon-f0d8bb1d.js";import"./GiTitle-09905d62.js";import"./index-954a8ef1.js";import"./dayjs.min-4acfd5d2.js";const Xe="/mock";function De(){return Re.get(`${Xe}/cate/tree`)}function Je(_,f,l={alignPoint:!1}){const u=g(!1),c=g(0),r=g(0),s=p=>{u.value=p},h=()=>{const p={};return _.clientX>window.innerWidth-r.value?p.right=l.alignPoint?window.innerWidth-_.clientX-c.value/2+"px":window.innerWidth-_.clientX+"px":p.left=l.alignPoint?_.clientX+c.value/2+"px":_.clientX+"px",_.clientY>window.innerHeight-r.value?(p.bottom=window.innerHeight-_.clientY+"px",p["transform-origin"]="center bottom"):(p.top=_.clientY+2+"px",p["transform-origin"]="center top"),p["z-index"]=999,p};return Ee(()=>{u.value=!0,Q(()=>{f&&(r.value=f==null?void 0:f.offsetHeight,c.value=f==null?void 0:f.offsetWidth,h())})}),{visible:u,setVisible:s,getStyle:h}}function Ye(_,f="新建分类"){let l=0;for(let u=0;u<_.length+1;u++)if(!_.includes(`${f}${u+1}`)){l=u+1;break}return`${f}${l}`}const Qe=P({name:"GiContextMenu"}),Ze=P({...Qe,props:{event:null,options:null,ignoreRefs:null},emits:["close"],setup(_,{expose:f,emit:l}){const u=_,c=g(null),{visible:r,setVisible:s,getStyle:h}=Je(u.event,c,u.options);Pe(c,()=>{s(!1),l("close")},{capture:!1,ignore:u.ignoreRefs});const{width:p,height:z}=Oe();return Ie(()=>[p.value,z.value],()=>{s(!1),l("close")}),f({visible:r,onHidden:()=>{s(!1),l("close")}}),(C,M)=>(d(),b($e,{name:"slide-dynamic-origin"},{default:t(()=>[ce(I("div",{class:"gi-context-menu",ref_key:"elRef",ref:c,style:Be(R(h)())},[Ue(C.$slots,"default",{},void 0,!0)],4),[[Ne,R(r)]])]),_:3}))}});const et=X(Ze,[["__scopeId","data-v-4ada3c17"]]),tt={id:"movetree",ref:"moveTreeRef",class:"ztree move-tree"},nt=P({__name:"MoveTree",props:{treeData:{type:Array,default:()=>[]}},emits:["node-click"],setup(_,{emit:f}){const l=_,u=g(null),c=se({callback:{onClick:(s,h,p)=>{r(s,h,p)}}});Ie(l.treeData,()=>{Q(()=>{var s;u.value=$.fn.zTree.init($("#movetree"),c,l.treeData),(s=u.value)==null||s.expandAll(!0)})},{deep:!0,immediate:!0});function r(s,h,p){f("node-click",p)}return(s,h)=>(d(),O("ul",tt,null,512))}}),ot=P({__name:"Menu",props:{event:null,fileInfo:null,treeData:null,onClose:null,onClick:null},setup(_,{expose:f}){const l=_,u=g(null),c=g(null),r=g([c]),s=g(!1),h=Y(()=>l.fileInfo.id!==""),p=Y(()=>l.fileInfo.id!=="root"),z=Y(()=>l.fileInfo.id!=="root"),T=Y(()=>l.fileInfo.id!=="root"),C=()=>{s.value=!1,l.onClose()},M=x=>{if(x==="move")return s.value=!s.value,!1;Q(()=>{var y;l.onClick(x),(y=u.value)==null||y.onHidden()})},V=()=>{var x;(x=u.value)==null||x.onHidden()};return f({menuRef:u,showMoveTreePopup:s,onClose:C,onClickItem:M}),(x,y)=>{const D=n("a-popover");return d(),b(et,{ref_key:"menuRef",ref:u,event:_.event,ignoreRefs:r.value,onClose:C},{default:t(()=>[e(je,{width:110,ref:"optionRef",style:{position:"relative"}},{default:t(()=>[R(h)?(d(),b(ie,{key:0,icon:"IconPlusCircle",onClick:y[0]||(y[0]=a=>M("add"))},{default:t(()=>[k("新增")]),_:1})):K("",!0),R(p)?(d(),b(ie,{key:1,icon:"IconEdit",onClick:y[1]||(y[1]=a=>M("rename"))},{default:t(()=>[k("重命名")]),_:1})):K("",!0),e(D,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1,"popup-visible":s.value},{content:t(()=>[I("section",{class:"move-tree-box",ref_key:"moveTreeBoxRef",ref:c},[e(nt,{"tree-data":_.treeData,onNodeClick:V},null,8,["tree-data"])],512)]),default:t(()=>[R(z)?(d(),b(ie,{key:0,more:"",icon:"IconExport",active:s.value,onClick:y[2]||(y[2]=a=>M("move"))},{default:t(()=>[k(" 移动 ")]),_:1},8,["active"])):K("",!0)]),_:1},8,["popup-visible"]),R(T)?(d(),b(ie,{key:2,icon:"IconDelete",onClick:y[3]||(y[3]=a=>M("delete"))},{default:t(()=>[k("删除")]),_:1})):K("",!0)]),_:1},512)]),_:1},8,["event","ignoreRefs"])}}});const at=X(ot,[["__scopeId","data-v-991fe312"]]);let L=null,J=null;function lt(_,f,l){return new Promise(u=>{c(),J=document.createElement("div"),document.body.appendChild(J),L=Ae(at,{event:_,fileInfo:f,treeData:l,onClick:r=>{u({mode:r,fileInfo:f}),setTimeout(()=>{c()},360)},onClose:()=>{setTimeout(()=>{c()},360)}}),L.use(qe),L.use(Fe),L.mount(J);function c(){L!==null&&(L.unmount(),L=null),J!==null&&(document.body.removeChild(J),J=null)}})}const ve="/gi-demo/assets/com-file-open-a82dbda1.svg",ae="/gi-demo/assets/com-file-close-e0ebbcc4.svg",st="/gi-demo/assets/com-file-9070581a.svg",it={class:"cate-tree"},ct={class:"search-wrap"},rt={class:"wrap"},ut=P({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"请输入关键词"}},emits:["node-click"],setup(_,{emit:f}){const l=g(!1),u=g(""),c=g(null),r=g([]),s=g(null),h=g(null),p=(a,v,i)=>{console.log("点击节点",i),h.value=i,f("node-click")},z=se({callback:{onRightClick:(a,v,i)=>{console.log("鼠标右键",i),i&&(h.value=i,lt(a,i,r.value).then(o=>{console.log("res",o),o.mode==="add"&&M(),o.mode==="rename"&&V(),o.mode==="delete"&&x()}))},onClick:(a,v,i)=>{p(a,v,i)}}}),T=a=>{if(!a.length)return;function v(i){i.forEach(o=>{o.children&&o.children.length?(o.iconOpen=ve,o.iconClose=ae,v(o.children)):(o.children=null,o.iconOpen=ve,o.iconClose=ae,o.icon=ae,o.type==null&&(o.icon=st))})}v(a)};(async()=>{try{l.value=!0;const a=await De();if(a.success){const v=a.data;T(v),r.value=v,Q(()=>{var i;s.value=$.fn.zTree.init($("#treeDemo"),z,r.value),(i=s.value)==null||i.expandAll(!0)})}}catch(a){return a}finally{l.value=!1}})();const M=()=>{var U,N,A;const a=((U=h.value)==null?void 0:U.children)||[];let v="新建分类1";if(a&&a.length){const S=a.map(E=>E.name);v=Ye(S,"新建分类")}const i=new Date().getTime().toString(),o={id:i,name:v,children:null,iconOpen:ve,iconClose:ae,icon:ae,isParent:!1};(N=s.value)==null||N.addNodes(h.value||{},o,!0);const w=(A=s.value)==null?void 0:A.getNodesByParam("id",i);setTimeout(()=>{var S;(S=s.value)==null||S.editName(w[0])},100)},V=()=>{Q(()=>{var v,i,o;const a=(i=s.value)==null?void 0:i.getNodesByParam("id",(v=h.value)==null?void 0:v.id);(o=s.value)==null||o.editName(a[0])})},x=()=>{xe.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})},y=(a,v)=>{let i=!1;if(a.name.indexOf(v)>-1&&(i=!0),a.children){const o=a.children;for(let w=0;w<o.length;w++){const U=o[w];y(U,v)?i=!0:o.splice(w--,1)}}return i},D=()=>{var v,i;let a=u.value;if(!a)s.value=$.fn.zTree.init($("#treeDemo"),z,r.value),(v=s.value)==null||v.expandAll(!0);else{const o=JSON.parse(JSON.stringify(r.value));for(let w=0;w<o.length;w++)y(o[w],a)||o.splice(w--,1);s.value=$.fn.zTree.init($("#treeDemo"),z,o),(i=s.value)==null||i.expandAll(!0)}};return(a,v)=>{const i=n("icon-search"),o=n("a-input");return d(),O("div",it,[I("div",ct,[e(o,{"allow-clear":"",maxlength:20,placeholder:_.placeholder,modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=w=>u.value=w),onInput:D,onClear:D},{prefix:t(()=>[e(i)]),_:1},8,["placeholder","modelValue"])]),I("div",rt,[I("ul",{id:"treeDemo",ref_key:"treeRef",ref:c,class:"ztree cate-ztree"},null,512)])])}}});const dt=X(ut,[["__scopeId","data-v-b221a124"]]),Ce=_=>(Te("data-v-fb90ac75"),_=_(),Ve(),_),_t=Ce(()=>I("div",null,"仅支持中文姓名",-1)),pt=Ce(()=>I("span",null,"权限配置",-1)),mt=Ce(()=>I("span",null,"自定义管理员、编辑者的权限， 点击",-1)),ft=P({__name:"EditModal",setup(_,{expose:f}){const l=se({name:"",phone:"",status:!1}),u={name:[{required:!0,message:"请输入姓名"},{match:Le,message:"只能是中文姓名"},{minLength:1,maxLength:4,message:"名字最长不超过4个字符"}],phone:[{match:Ke,message:"手机号格式不正确"}],status:[{required:!0}]},c=[{name:"新增"},{name:"编辑"},{name:"重命名"},{name:"分享"},{name:"删除"}],r=g(!1),s=g(""),h=Y(()=>!!s.value),p=Y(()=>h.value?"编辑":"新增"),z=g(),T=async()=>{var x;return await((x=z.value)==null?void 0:x.validate())?!1:(await new Promise(y=>setTimeout(y,1500)),q.success(h.value?"编辑成功":"新增成功"),!0)};return f({add:()=>{s.value="",r.value=!0},edit:V=>{s.value=V,r.value=!0}}),(V,x)=>{const y=n("a-input"),D=n("a-form-item"),a=n("a-radio"),v=n("a-radio-group"),i=n("a-form"),o=n("a-row"),w=n("icon-question-circle-fill"),U=n("a-link"),N=n("a-tooltip"),A=n("a-space"),S=n("icon-right"),E=n("a-checkbox"),F=n("a-checkbox-group"),ee=n("a-collapse-item"),te=n("a-collapse"),ne=n("a-modal");return d(),b(ne,{visible:r.value,"onUpdate:visible":x[3]||(x[3]=B=>r.value=B),title:R(p),"on-before-ok":T},{default:t(()=>[e(o,{justify:"center"},{default:t(()=>[e(i,{ref_key:"formRef",ref:z,model:l,size:"medium","auto-label-width":"",style:{width:"auto"}},{default:t(()=>[e(D,{field:"name",label:"姓名",rules:u.name},{extra:t(()=>[_t]),default:t(()=>[e(y,{modelValue:l.name,"onUpdate:modelValue":x[0]||(x[0]=B=>l.name=B),placeholder:"请输入姓名",style:{width:"300px"}},null,8,["modelValue"])]),_:1},8,["rules"]),e(D,{field:"phone",label:"手机号"},{default:t(()=>[e(y,{modelValue:l.phone,"onUpdate:modelValue":x[1]||(x[1]=B=>l.phone=B),placeholder:"请输入手机号",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(D,{field:"status",label:"状态",rules:u.status},{default:t(()=>[e(v,{modelValue:l.status,"onUpdate:modelValue":x[2]||(x[2]=B=>l.status=B)},{default:t(()=>[e(a,{value:!1},{default:t(()=>[k("关闭")]),_:1}),e(a,{value:!0},{default:t(()=>[k("开启")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),e(te,{bordered:!1,"default-active-key":["1"]},{default:t(()=>[e(ee,{"show-expand-icon":!0,key:"1"},{header:t(()=>[e(A,null,{default:t(()=>[pt,e(N,{position:"right","content-style":{width:"200px"}},{content:t(()=>[mt,e(U,{type:"primary",hoverable:!1},{default:t(()=>[k("了解更多权限")]),_:1})]),default:t(()=>[e(w,{style:{color:"rgb(var(--warning-6))"}})]),_:1})]),_:1})]),"expand-icon":t(({active:B})=>[e(S,{class:Ge({gi_rotate_90deg:B})},null,8,["class"])]),default:t(()=>[(d(),O(j,null,Z(c,(B,oe)=>e(o,{justify:"space-between",key:oe},{default:t(()=>[I("span",null,H(B.name),1),e(F,null,{default:t(()=>[e(E,{value:"1"},{default:t(()=>[k("管理员")]),_:1}),e(E,{value:"2"},{default:t(()=>[k("编辑者")]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["visible","title"])}}});const Me=X(ft,[["__scopeId","data-v-fb90ac75"]]),le=[{name:"禁用",value:0,color:"red"},{name:"启用",value:1,color:"green"}],vt={class:"data-pane"},gt={class:"gi_box pane-left"},ht={class:"gi_box pane-right"},yt={class:"content"},kt={class:"table-box"},wt=P({name:"DataManage"}),xt=P({...wt,setup(_){const f=ge(),l=[{title:"序号",width:68,slotName:"index"},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",slotName:"proportion",width:200},{title:"状态",slotName:"status",width:100,align:"center"},{title:"操作",slotName:"operation",width:200,align:"center",fixed:"right"}],{pagination:u,setTotal:c}=he(()=>T()),r=se({name:"",status:""}),s=g([]),h=g(!1),p=g(),z=o=>o<30?"danger":o<60?"warning":"success",T=async()=>{h.value=!0;const o=await ye({current:u.current,pageSize:u.pageSize,...r});o.success&&(s.value=o.data.list,c(o.data.total)),h.value=!1};ke(()=>{T()});const C=()=>{xe.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{s.value=[]}})},M=()=>{var o;(o=p.value)==null||o.add()},V=o=>{var w;(w=p.value)==null||w.edit(o.id)},x=()=>{f.push({path:"/data/detail"})},y=o=>{q.success("删除成功"),T()},D=()=>{if(!a.value.length)return q.warning("请勾选数据");q.success("点击了导出")},a=g([]),v=o=>{a.value=o},i=o=>{a.value=o?s.value.map(w=>w.id):[]};return(o,w)=>{const U=ze,N=n("icon-plus"),A=n("a-button"),S=n("icon-delete"),E=n("icon-export"),F=n("a-space"),ee=n("a-option"),te=n("a-select"),ne=n("a-input"),B=n("icon-search"),oe=n("a-input-group"),ue=n("icon-refresh"),W=n("a-row"),de=n("a-progress"),_e=n("a-tag"),pe=n("a-popconfirm"),me=n("a-table"),fe=we("loading");return d(),O("div",vt,[I("section",gt,[e(U,{title:"数据分类(ZTree)"}),e(dt,{placeholder:"请输入搜索关键词",onNodeClick:w[0]||(w[0]=m=>R(u).onChange(1))})]),I("section",ht,[e(U,{title:"数据列表"}),I("div",yt,[e(W,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(F,null,{default:t(()=>[e(A,{type:"primary",onClick:M},{icon:t(()=>[e(N)]),default:t(()=>[k("新增")]),_:1}),e(A,{type:"primary",status:"danger",onClick:C},{icon:t(()=>[e(S)]),default:t(()=>[k("删除")]),_:1}),e(A,{type:"primary",status:"success",onClick:D},{icon:t(()=>[e(E)]),default:t(()=>[k("导出")]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(te,{modelValue:r.status,"onUpdate:modelValue":w[1]||(w[1]=m=>r.status=m),placeholder:"请选择","allow-clear":"",class:"gi_select_input"},{default:t(()=>[(d(!0),O(j,null,Z(R(le),m=>(d(),b(ee,{key:m.value,value:m.value},{default:t(()=>[k(H(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(oe,null,{default:t(()=>[e(ne,{modelValue:r.name,"onUpdate:modelValue":w[2]||(w[2]=m=>r.name=m),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(A,{type:"primary",onClick:T},{default:t(()=>[e(B)]),_:1})]),_:1}),e(A,{type:"primary",onClick:T},{icon:t(()=>[e(ue)]),_:1})]),_:1})]),_:1}),I("section",kt,[ce((d(),b(me,{"row-key":"id",size:"small",bordered:{cell:!0},columns:l,data:s.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:R(u),onSelect:v,onSelectAll:i},{index:t(({rowIndex:m})=>[k(H(m+1),1)]),proportion:t(({record:m})=>[e(de,{status:z(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),status:t(({record:m})=>[(d(!0),O(j,null,Z(R(le),G=>(d(),O(j,{key:G.value},[G.value===m.status?(d(),b(_e,{key:0,size:"small",color:G.color},{default:t(()=>[k(H(G.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:m})=>[e(F,null,{default:t(()=>[e(A,{type:"primary",size:"mini",onClick:G=>V(m)},{default:t(()=>[k("修改")]),_:2},1032,["onClick"]),e(A,{size:"mini",onClick:x},{default:t(()=>[k("详情")]),_:1}),e(pe,{type:"warning",content:"您确定要删除该项吗?",onOk:G=>y(m.id)},{default:t(()=>[e(A,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[k("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["data","pagination"])),[[fe,h.value]])])])]),e(Me,{ref_key:"EditModalRef",ref:p},null,512)])}}}),bt=P({name:"TreeSwitcherIcon"}),Se=P({...bt,props:{expanded:{type:Boolean},hasChildren:{type:Boolean}},setup(_){return(f,l)=>{const u=be,c=n("icon-drive-file");return _.hasChildren&&_.expanded?(d(),b(u,{key:0,class:"switcher-icon",name:"plus-square",size:16})):_.hasChildren&&!_.expanded?(d(),b(u,{key:1,class:"switcher-icon",name:"minus-square",size:16,style:{transform:"rotate(0deg)"}})):(d(),b(c,{key:2,size:16}))}}}),re=_=>(Te("data-v-e6d4a6b6"),_=_(),Ve(),_),Ct=re(()=>I("span",null,"新增",-1)),$t=re(()=>I("span",null,"编辑",-1)),zt=re(()=>I("span",null,"移动",-1)),It=re(()=>I("span",null,"删除",-1)),Tt=P({__name:"RightMenu",props:{treeData:null},emits:["click"],setup(_,{emit:f}){const l=u=>{f("click",u)};return(u,c)=>{const r=n("icon-plus-circle"),s=n("a-menu-item"),h=n("icon-edit"),p=n("icon-export"),z=n("icon-right"),T=n("a-space"),C=be,M=n("a-tree"),V=n("a-scrollbar"),x=n("a-popover"),y=n("icon-delete"),D=n("a-menu");return d(),b(D,{class:"menu"},{default:t(()=>[e(s,{onClick:c[0]||(c[0]=a=>l("add"))},{icon:t(()=>[e(r,{size:16,"stroke-width":3})]),default:t(()=>[Ct]),_:1}),e(s,{onClick:c[1]||(c[1]=a=>l("edit"))},{icon:t(()=>[e(h,{size:16,"stroke-width":3})]),default:t(()=>[$t]),_:1}),e(x,{position:"right",trigger:"click","content-style":{padding:0,overflow:"hidden"},"unmount-on-close":!1},{content:t(()=>[e(V,{style:{height:"100%",overflow:"auto"},"outer-style":"width: 260px;height: 500px"},{default:t(()=>[e(M,{ref:"treeMoveRef","show-line":"",size:"mini",data:_.treeData[0].children,fieldNames:{key:"id",title:"name"}},{"switcher-icon":t((a,{checked:v,selected:i,expanded:o})=>[e(Se,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(d(),b(C,{key:1,name:"com-file-open",size:16})):(d(),b(C,{key:2,name:"com-file",size:16})):(d(),b(C,{key:0,name:"com-file-close",size:16}))]),_:1},8,["data"])]),_:1})]),default:t(()=>[e(s,{onClick:c[2]||(c[2]=a=>l("move"))},{icon:t(()=>[e(p,{size:16,"stroke-width":3})]),default:t(()=>[e(T,{size:18},{default:t(()=>[zt,e(z)]),_:1})]),_:1})]),_:1}),e(s,{onClick:c[3]||(c[3]=a=>l("delete"))},{icon:t(()=>[e(y,{size:16,"stroke-width":3})]),default:t(()=>[It]),_:1})]),_:1})}}});const Vt=X(Tt,[["__scopeId","data-v-e6d4a6b6"]]),Dt={class:"cate-tree"},Mt={class:"search-wrap"},St={class:"wrap"},Nt=P({__name:"index",props:{type:{type:Number,default:1},placeholder:{type:String,default:"请输入关键词"}},emits:["node-click"],setup(_,{emit:f}){const l=g(!1),u=g(),c=g(""),r=g([]),s=()=>{f("node-click")};(async()=>{try{l.value=!0;const z=await De();z.success&&(r.value=z.data,Q(()=>{u.value.expandAll()}))}catch(z){return z}finally{l.value=!1}})();const p=z=>{z!=="move"&&q.info(z)};return(z,T)=>{const C=n("icon-search"),M=n("a-input"),V=be,x=n("a-trigger"),y=n("a-tree"),D=n("a-scrollbar");return d(),O("div",Dt,[I("div",Mt,[e(M,{"allow-clear":"",maxlength:20,placeholder:_.placeholder,modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=a=>c.value=a)},{prefix:t(()=>[e(C)]),_:1},8,["placeholder","modelValue"])]),I("div",St,[e(D,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(y,{ref_key:"treeRef",ref:u,"show-line":"",size:"mini",data:r.value,fieldNames:{key:"id"},onSelect:s},{"switcher-icon":t((a,{checked:v,selected:i,expanded:o})=>[e(Se,{expanded:o,"has-children":Boolean(a.children&&a.children.length)},null,8,["expanded","has-children"])]),icon:t(a=>[a.children?a.children?(d(),b(V,{key:1,name:"com-file-open",size:16})):(d(),b(V,{key:2,name:"com-file",size:16})):(d(),b(V,{key:0,name:"com-file-close",size:16}))]),title:t(a=>[e(x,{trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":""},{content:t(()=>[e(Vt,{"tree-data":r.value,onClick:p},null,8,["tree-data"])]),default:t(()=>[I("div",null,H(a.name),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})])])}}});const At=X(Nt,[["__scopeId","data-v-c24df243"]]),Rt={class:"data-pane"},Pt={class:"gi_box pane-left"},Ot={class:"gi_box pane-right"},Et={class:"content"},Bt={class:"table-box"},Ut=P({name:"DataManage"}),Gt=P({...Ut,setup(_){const f=ge(),{pagination:l,setTotal:u}=he(()=>p()),c=se({name:"",status:""}),r=g([]),s=g(!1),h=i=>i<30?"danger":i<60?"warning":"success",p=async()=>{try{s.value=!0;const i=await ye({...c,current:l.current,pageSize:l.pageSize});r.value=i.data.list,u(i.data.total)}catch(i){return i}finally{s.value=!1}};ke(()=>{p()});const z=()=>{xe.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{r.value=[]}})},T=g(),C=()=>{var i;(i=T.value)==null||i.add()},M=i=>{var o;(o=T.value)==null||o.edit(i.id)},V=()=>{f.push({path:"/data/detail"})},x=i=>{q.success("删除成功"),p()},y=()=>{if(!D.value.length)return q.warning("请勾选数据");q.success("点击了导出")},D=g([]),a=i=>{D.value=i},v=i=>{D.value=i?r.value.map(o=>o.id):[]};return(i,o)=>{const w=ze,U=n("icon-plus"),N=n("a-button"),A=n("icon-delete"),S=n("icon-export"),E=n("a-space"),F=n("a-option"),ee=n("a-select"),te=n("a-input"),ne=n("icon-search"),B=n("a-input-group"),oe=n("icon-refresh"),ue=n("a-row"),W=n("a-table-column"),de=n("a-progress"),_e=n("a-tag"),pe=n("a-popconfirm"),me=n("a-table"),fe=we("loading");return d(),O("div",Rt,[I("section",Pt,[e(w,{title:"数据分类"}),e(At,{placeholder:"请输入搜索关键词",onNodeClick:o[0]||(o[0]=m=>R(l).onChange(1))})]),I("section",Ot,[e(w,{title:"数据列表"}),I("div",Et,[e(ue,{justify:"space-between",style:{"margin-bottom":"12px"}},{default:t(()=>[e(E,null,{default:t(()=>[e(N,{type:"primary",onClick:C},{icon:t(()=>[e(U)]),_:1}),e(N,{type:"primary",status:"danger",onClick:z},{icon:t(()=>[e(A)]),default:t(()=>[k("删除")]),_:1}),e(N,{type:"primary",status:"success",onClick:y},{icon:t(()=>[e(S)]),_:1})]),_:1}),e(E,null,{default:t(()=>[e(ee,{modelValue:c.status,"onUpdate:modelValue":o[1]||(o[1]=m=>c.status=m),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:t(()=>[(d(!0),O(j,null,Z(R(le),m=>(d(),b(F,{key:m.value,value:m.value},{default:t(()=>[k(H(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(B,null,{default:t(()=>[e(te,{modelValue:c.name,"onUpdate:modelValue":o[2]||(o[2]=m=>c.name=m),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),e(N,{type:"primary",onClick:p},{default:t(()=>[e(ne)]),_:1})]),_:1}),e(N,{type:"primary",onClick:p},{icon:t(()=>[e(oe)]),_:1})]),_:1})]),_:1}),I("section",Bt,[ce((d(),b(me,{"row-key":"id",size:"small",bordered:{cell:!0},data:r.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:R(l),onSelect:a,onSelectAll:v},{columns:t(()=>[e(W,{title:"序号",width:68},{cell:t(m=>[k(H(m.rowIndex+1),1)]),_:1}),e(W,{title:"姓名","data-index":"name"}),e(W,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),e(W,{title:"比例",width:200},{cell:t(({record:m})=>[e(de,{status:h(m.proportion),percent:m.proportion/100},null,8,["status","percent"])]),_:1}),e(W,{title:"状态",width:100,align:"center"},{cell:t(({record:m})=>[(d(!0),O(j,null,Z(R(le),G=>(d(),O(j,{key:G.value},[G.value===m.status?(d(),b(_e,{key:0,size:"small",color:G.color},{default:t(()=>[k(H(G.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),_:1}),e(W,{title:"创建时间","data-index":"createTime",width:180}),e(W,{title:"操作",width:200,align:"center",fixed:"right"},{cell:t(({record:m})=>[e(E,null,{default:t(()=>[e(N,{type:"primary",size:"mini",onClick:G=>M(m)},{default:t(()=>[k("修改")]),_:2},1032,["onClick"]),e(N,{size:"mini",onClick:V},{default:t(()=>[k("详情")]),_:1}),e(pe,{type:"warning",content:"您确定要删除该项吗?",onOk:G=>x(m.id)},{default:t(()=>[e(N,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[k("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination"])),[[fe,s.value]])])])]),e(Me,{ref_key:"EditModalRef",ref:T},null,512)])}}}),Ht={class:"data-pane3"},Wt={class:"content"},jt={class:"table-box"},qt=P({__name:"Pane3",setup(_){ge();const f=[{title:"序号",width:68,slotName:"index"},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",slotName:"proportion",width:68,align:"center"},{title:"状态",slotName:"status",width:100,align:"center"},{title:"操作",slotName:"operation",width:200,align:"center"}],{pagination:l,setTotal:u}=he(()=>s()),c=g([]),r=g(!1),s=async()=>{r.value=!0;const C=await ye({current:l.current,pageSize:l.pageSize});C.success&&(c.value=C.data.list,u(C.data.total)),r.value=!1};ke(()=>{s()});const h=C=>C<30?"danger":C<60?"warning":"success",p=g([]),z=C=>{p.value=C},T=C=>{p.value=C?c.value.map(M=>M.id):[]};return(C,M)=>{const V=n("a-breadcrumb-item"),x=n("a-breadcrumb"),y=n("a-button"),D=n("a-space"),a=n("a-row"),v=n("a-progress"),i=n("a-tag"),o=n("icon-edit"),w=n("icon-delete"),U=n("a-popconfirm"),N=n("a-table"),A=we("loading");return d(),O("div",Ht,[e(a,{justify:"space-between",align:"center",class:"head"},{default:t(()=>[e(x,null,{default:t(()=>[e(V,null,{default:t(()=>[k("首页")]),_:1}),e(V,null,{default:t(()=>[k("数据管理")]),_:1}),e(V,null,{default:t(()=>[k("单位管理")]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(y,null,{default:t(()=>[k("重置")]),_:1}),e(y,{type:"primary"},{default:t(()=>[k("提交")]),_:1})]),_:1})]),_:1}),I("section",Wt,[I("section",jt,[ce((d(),b(N,{"row-key":"id",size:"small",bordered:{cell:!0},columns:f,data:c.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:R(l),onSelect:z,onSelectAll:T},{index:t(({rowIndex:S})=>[k(H(S+1),1)]),proportion:t(({record:S})=>[e(v,{size:"mini",status:h(S.proportion),percent:S.proportion/100},null,8,["status","percent"])]),status:t(({record:S})=>[(d(!0),O(j,null,Z(R(le),E=>(d(),O(j,{key:E.value},[E.value===S.status?(d(),b(i,{key:0,size:"small",color:E.color},{default:t(()=>[k(H(E.name),1)]),_:2},1032,["color"])):K("",!0)],64))),128))]),operation:t(({record:S})=>[e(D,null,{default:t(()=>[e(y,{type:"primary",size:"mini"},{default:t(()=>[e(o)]),_:1}),e(y,{size:"mini"},{default:t(()=>[k("详情")]),_:1}),e(U,{type:"warning",content:"您确定要删除该项吗?"},{default:t(()=>[e(y,{type:"primary",status:"danger",size:"mini"},{default:t(()=>[e(w)]),_:1})]),_:1})]),_:1})]),_:1},8,["data","pagination"])),[[A,r.value]])])])])}}});const Ft=X(qt,[["__scopeId","data-v-1c3fec99"]]),Lt={class:"manage"},Kt={class:"tab"},Xt=P({name:"DataManage"}),vn=P({...Xt,setup(_){const f={1:xt,2:Gt,3:Ft},l=g(2);return(u,c)=>{const r=n("a-tab-pane"),s=n("a-tabs");return d(),O("div",Lt,[I("section",Kt,[e(s,{"hide-content":"",size:"medium","active-key":l.value,"onUpdate:active-key":c[0]||(c[0]=h=>l.value=h)},{default:t(()=>[(d(),b(r,{key:1,title:"周期管理"})),(d(),b(r,{key:2,title:"维度管理"})),(d(),b(r,{key:3,title:"单位管理"}))]),_:1},8,["active-key"])]),e($e,{name:"fade-slide",mode:"out-in",appear:""},{default:t(()=>[(d(),b(He,null,[(d(),b(We(f[l.value])))],1024))]),_:1})])}}});export{vn as default};
