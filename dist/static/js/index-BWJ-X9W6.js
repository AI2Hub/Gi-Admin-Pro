import{d as e,e as l,o as a,f as t,c as i,_ as s,b as n,O as r,k as o,E as d,s as u,h as c,w as p,i as _,g as m,H as f,J as v,S as y,G as g,t as k,a as h,V as x,R as w}from"./index-BV31vIGp.js";import{u as b}from"./useBreakpoint-CPqr1DyH.js";import{_ as j}from"./GiCellGender.vue_vue_type_script_setup_true_lang-BB_AAfOq.js";import{_ as S}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BTd11BkY.js";import{_ as C}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-BqCK-yqu.js";import{_ as D}from"./AddUserModal.vue_vue_type_script_setup_true_lang-QlGfCxNs.js";import{_ as R}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-C012Kge7.js";import{u as U}from"./useTable-BzCGu7kD.js";import{u as V}from"./useDept-soP5iVOv.js";import{a as A}from"./user-DIbDBldy.js";import{u as B}from"./useDict-B720UWRn.js";import{d as G}from"./index-CssvFpFx.js";import"./index-mGwjBKd5.js";import"./regexp-LyZ7ySAN.js";import"./role-CwD8iz4D.js";import"./useResetReactive-B3MRrAZj.js";const $=s(e({__name:"GiSplitPaneButton",props:{collapsed:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:s}){const n=e,r=s;return(e,s)=>{const o=l("icon-right"),d=l("icon-left");return a(),t("div",{class:"split-button",onClick:s[0]||(s[0]=e=>r("click"))},[n.collapsed?(a(),i(o,{key:0})):(a(),i(d,{key:1}))])}}}),[["__scopeId","data-v-07276b54"]]),z=s(e({__name:"GiSplitPaneFlexibleBox",props:{visible:{type:Boolean,default:!1},direction:{default:"left"}},emits:["update:visible"],setup(e,{emit:l}){const i=e,s=l,c=n(),{breakpoint:p}=b();r((()=>p.value),(e=>{["xs"].includes(e)?s("update:visible",!1):s("update:visible",!0)}));const _=o((()=>{const e={};return e[`margin-${i.direction}`]=!i.visible&&c.value&&c.value.clientWidth?`-${c.value.clientWidth}px`:0,e}));return(e,l)=>(a(),t("div",{ref_key:"boxRef",ref:c,class:"gi-flexible-box",style:u(_.value)},[d(e.$slots,"default",{},void 0,!0)],4))}}),[["__scopeId","data-v-a850ab93"]]),I={class:"gi-split-pane"},M={class:"gi-split-pane__left"},O={class:"gi-split-pane__right"},W=s(e({__name:"index",setup(e){const l=n(!0),i=()=>{l.value=!l.value};return(e,s)=>{const n=z,r=$;return a(),t("div",I,[c(n,{visible:m(l),"onUpdate:visible":s[0]||(s[0]=e=>f(l)?l.value=e:null)},{default:p((()=>[_("div",M,[d(e.$slots,"left",{},void 0,!0)])])),_:3},8,["visible"]),_("div",O,[d(e.$slots,"default",{},void 0,!0),c(r,{collapsed:!m(l),onClick:i},null,8,["collapsed"])])])}}}),[["__scopeId","data-v-9031a98a"]]),L={class:"gi_page user-manage"},N=e({name:"SystemUser",__name:"index",setup(e){const{data:s}=B({code:"status"}),r=v("treeRef"),o=v("AddUserModalRef"),d=v("UserDetailDrawerRef"),u=n(""),{deptList:b,getDeptList:$}=V({onSuccess:()=>{w((()=>{var e;null==(e=r.value)||e.expandAll(!0)}))}});$();const z=y({status:"",username:""}),{loading:I,tableData:M,pagination:O,selectedKeys:N,search:P,select:T,selectAll:E,handleDelete:F,fixed:H}=U((e=>A(e)),{immediate:!0}),J=()=>{z.status="",z.username="",P()},K=()=>{if(!N.value.length)return x.warning("请选择用户！");F((()=>G({ids:N.value})))},Q=()=>{var e;null==(e=o.value)||e.add()};return(e,n)=>{const v=l("icon-search"),y=l("a-input"),x=l("a-tree"),w=l("icon-plus"),U=l("a-button"),V=l("icon-delete"),A=l("a-space"),B=l("a-select"),$=l("a-input-group"),X=l("icon-refresh"),Y=l("a-row"),q=l("a-table-column"),Z=l("a-link"),ee=C,le=S,ae=j,te=l("a-tag"),ie=l("icon-edit"),se=l("a-popconfirm"),ne=l("a-table"),re=W,oe=l("a-card");return a(),t("div",L,[c(oe,{title:"用户管理"},{default:p((()=>[c(re,null,{left:p((()=>[c(y,{modelValue:m(u),"onUpdate:modelValue":n[0]||(n[0]=e=>f(u)?u.value=e:null),placeholder:"输入部门名称搜索","allow-clear":""},{prefix:p((()=>[c(v)])),_:1},8,["modelValue"]),c(x,{ref_key:"treeRef",ref:r,"block-node":"","show-line":"","default-expand-all":"",data:m(b),"field-names":{key:"id",title:"name",children:"children"},onSelect:m(P)},null,8,["data","onSelect"])])),default:p((()=>[c(Y,{justify:"space-between"},{default:p((()=>[c(A,{wrap:""},{default:p((()=>[c(U,{type:"primary",onClick:Q},{icon:p((()=>[c(w)])),default:p((()=>[n[3]||(n[3]=_("span",null,"新增",-1))])),_:1}),c(U,{type:"primary",status:"danger",onClick:K},{icon:p((()=>[c(V)])),default:p((()=>[n[4]||(n[4]=_("span",null,"删除",-1))])),_:1})])),_:1}),c(A,{wrap:""},{default:p((()=>[c($,null,{default:p((()=>[c(B,{modelValue:m(z).status,"onUpdate:modelValue":n[1]||(n[1]=e=>m(z).status=e),options:m(s),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),c(y,{modelValue:m(z).username,"onUpdate:modelValue":n[2]||(n[2]=e=>m(z).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])])),_:1}),c(U,{type:"primary",onClick:m(P)},{icon:p((()=>[c(v)])),default:p((()=>[n[5]||(n[5]=_("span",null,"查询",-1))])),_:1},8,["onClick"]),c(U,{onClick:J},{icon:p((()=>[c(X)])),default:p((()=>[n[6]||(n[6]=_("span",null,"重置",-1))])),_:1})])),_:1})])),_:1}),c(ne,{"row-key":"id",loading:m(I),data:m(M),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:m(O),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":m(N),onSelect:m(T),onSelectAll:m(E)},{columns:p((()=>[c(q,{title:"序号",width:64},{cell:p((e=>[g(k(e.rowIndex+1),1)])),_:1}),c(q,{title:"用户名","data-index":"username",width:120},{cell:p((({record:e})=>[c(Z,{onClick:l=>{return a=e,void(null==(t=d.value)||t.open(a.id));var a,t}},{default:p((()=>[g(k(e.username),1)])),_:2},1032,["onClick"])])),_:1}),c(q,{title:"昵称","data-index":"nickname",width:150},{cell:p((({record:e})=>[c(ee,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),c(q,{title:"状态",width:100,align:"center"},{cell:p((({record:e})=>[c(le,{status:e.status},null,8,["status"])])),_:1}),c(q,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:p((({record:e})=>[c(ae,{gender:e.gender},null,8,["gender"])])),_:1}),c(q,{title:"联系方式","data-index":"phone",width:180}),c(q,{title:"部门","data-index":"deptName",width:180}),c(q,{title:"类型",width:100,align:"center"},{cell:p((({record:e})=>[1===e.type?(a(),i(te,{key:0,color:"red",size:"small"},{default:p((()=>n[7]||(n[7]=[g("系统内置")]))),_:1})):h("",!0),2===e.type?(a(),i(te,{key:1,color:"orange",size:"small"},{default:p((()=>n[8]||(n[8]=[g("自定义")]))),_:1})):h("",!0)])),_:1}),c(q,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),c(q,{title:"创建时间","data-index":"createTime",width:200}),c(q,{title:"操作",width:180,align:"center",fixed:m(H)},{cell:p((({record:e})=>[c(A,null,{default:p((()=>[c(U,{type:"primary",size:"mini",onClick:l=>{return a=e,void(null==(t=o.value)||t.edit(a.id));var a,t}},{icon:p((()=>[c(ie)])),default:p((()=>[n[9]||(n[9]=_("span",null,"编辑",-1))])),_:2},1032,["onClick"]),c(se,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:l=>{return a=e,F((()=>G({ids:[a.id]})),{showModal:!1});var a}},{default:p((()=>[c(U,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:p((()=>[c(V)])),default:p((()=>[n[10]||(n[10]=_("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])])),_:1})])),_:1}),c(D,{ref_key:"AddUserModalRef",ref:o,onSaveSuccess:m(P)},null,8,["onSaveSuccess"]),c(R,{ref_key:"UserDetailDrawerRef",ref:d},null,512)])}}});export{N as default};
