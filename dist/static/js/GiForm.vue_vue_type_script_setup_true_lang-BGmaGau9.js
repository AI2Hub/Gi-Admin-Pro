import{d as e,b as l,U as o,k as a,ad as d,P as u,e as t,o as p,c as i,w as n,h as r,m as s,f as m,F as f,j as c,D as V,H as v,f7 as y,f8 as k,a as h,g as U,ap as b,I as w,t as g}from"./index-CWOC3-4p.js";const x=e({__name:"GiForm",props:{modelValue:{},options:{},columns:{}},emits:["update:modelValue","search","reset"],setup(e,{expose:x,emit:_}){var q;const $=e,F=_,j=(e,l)=>{F("update:modelValue",Object.assign($.modelValue,{[l]:e}))},C=l((null==(q=$.options.fold)?void 0:q.defaultCollapsed)??!1),E=l();x({formRef:E});const O=e=>void 0!==e&&("boolean"==typeof e?e:"function"==typeof e?e($.modelValue):void 0),B=o({});$.columns.forEach((e=>{e.request&&"function"==typeof e.request&&(null==e?void 0:e.init)&&e.request($.modelValue).then((l=>{B[e.field]=e.resultFormat?e.resultFormat(l):l.data}))}));const R=[];$.columns.forEach((e=>{var l;const o=R.map((e=>e.field));(null==(l=e.cascader)?void 0:l.length)&&!o.includes(e.field)&&R.push(e)}));const z=a((()=>d($.modelValue)));return u(z,((e,l)=>{R.forEach((o=>{if(e[o.field]!==l[o.field]){$.columns.filter((e=>{var l;return null==(l=null==o?void 0:o.cascader)?void 0:l.includes(e.field)})).forEach((l=>{l.request&&Boolean(e[o.field])?l.request($.modelValue).then((e=>{B[l.field]=l.resultFormat?l.resultFormat(e):e.data,B[l.field].map((e=>e.value)).includes($.modelValue[l.field])||F("update:modelValue",Object.assign($.modelValue,{[l.field]:""}))})):l.request&&!e[o.field]&&(B[l.field]=[],F("update:modelValue",Object.assign($.modelValue,{[l.field]:""})))}))}}))})),(e,l)=>{const o=t("a-input"),a=t("a-input-number"),d=t("a-textarea"),u=t("a-select"),x=t("a-cascader"),_=t("a-tree-select"),q=t("a-radio-group"),R=t("a-checkbox-group"),z=t("a-date-picker"),D=t("a-year-picker"),G=t("a-month-picker"),H=t("a-quarter-picker"),I=t("a-week-picker"),P=t("a-range-picker"),T=t("a-time-picker"),A=t("a-color-picker"),J=t("a-rate"),K=t("a-switch"),L=t("a-slider"),M=t("a-form-item"),N=t("a-col"),Q=t("icon-search"),S=t("a-button"),W=t("icon-up"),X=t("icon-down"),Y=t("a-space"),Z=t("a-row"),ee=t("a-form");return p(),i(ee,s({ref_key:"formRef",ref:E,"auto-label-width":!0},e.options.form,{model:e.modelValue}),{default:n((()=>[r(Z,s({gutter:14},e.options.row,{class:"w-full"}),{default:n((()=>{var t,E,Z;return[(p(!0),m(f,null,c(e.columns,((l,t)=>{var c,w,g;return p(),m(f,{key:l.field},[(g=l.hide,void 0!==g&&("boolean"==typeof g?g:"function"==typeof g?g($.modelValue):void 0)?h("",!0):V((p(),i(N,s({key:0,span:l.span||12},l.col||l.span?l.col:e.options.col),{default:n((()=>[r(M,s(l.item,{label:l.label,field:l.field,rules:l.rules,disabled:O(l.disabled)}),{default:n((()=>[v(e.$slots,l.field,y(k({disabled:O(l.disabled)})),(()=>["input"===l.type?(p(),i(o,s({key:0,"allow-clear":!0,placeholder:`请输入${l.label}`,"max-length":20},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["placeholder","model-value","onUpdate:modelValue"])):h("",!0),"input-number"===l.type?(p(),i(a,s({key:1,placeholder:`请输入${l.label}`},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["placeholder","model-value","onUpdate:modelValue"])):h("",!0),"textarea"===l.type?(p(),i(d,s({key:2,"allow-clear":!0,placeholder:`请填写${l.label}`,"max-length":200,"show-word-limit":!0},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["placeholder","model-value","onUpdate:modelValue"])):h("",!0),"select"===l.type?(p(),i(u,s({key:3,"allow-clear":!0,placeholder:`请选择${l.label}`},l.props,{options:U(B)[l.field]||l.options,"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["placeholder","options","model-value","onUpdate:modelValue"])):h("",!0),"cascader"===l.type?(p(),i(x,s({key:4,"allow-clear":!0,placeholder:`请选择${l.label}`},l.props,{options:U(B)[l.field]||l.options,"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["placeholder","options","model-value","onUpdate:modelValue"])):h("",!0),"tree-select"===l.type?(p(),i(_,s({key:5,"allow-clear":!0,placeholder:`请选择${l.label}`},l.props,{data:U(B)[l.field]||l.data,"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["placeholder","data","model-value","onUpdate:modelValue"])):h("",!0),"radio-group"===l.type?(p(),i(q,s({key:6},l.props,{options:U(B)[l.field]||l.options,"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["options","model-value","onUpdate:modelValue"])):h("",!0),"checkbox-group"===l.type?(p(),i(R,s({key:7},l.props,{options:U(B)[l.field]||l.options,"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["options","model-value","onUpdate:modelValue"])):h("",!0),"date-picker"===l.type?(p(),i(z,s({key:8,"allow-clear":!0,placeholder:"请选择日期"},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"year-picker"===l.type?(p(),i(D,s({key:9},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"month-picker"===l.type?(p(),i(G,s({key:10},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"quarter-picker"===l.type?(p(),i(H,s({key:11},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"week-picker"===l.type?(p(),i(I,s({key:12},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"range-picker"===l.type?(p(),i(P,s({key:13},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"time-picker"===l.type?(p(),i(T,s({key:14,"allow-clear":!0,placeholder:"请选择时间"},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"color-picker"===l.type?(p(),i(A,s({key:15},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"rate"===l.type?(p(),i(J,s({key:16,"allow-clear":!0},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"switch"===l.type?(p(),i(K,s({key:17},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0),"slider"===l.type?(p(),i(L,s({key:18},l.props,{"model-value":e.modelValue[l.field],"onUpdate:modelValue":e=>j(e,l.field)}),null,16,["model-value","onUpdate:modelValue"])):h("",!0)]))])),_:2},1040,["label","field","rules","disabled"])])),_:2},1040,["span"])),[[b,t<=((null==(c=e.options.fold)?void 0:c.index)||0)||t>=((null==(w=e.options.fold)?void 0:w.index)||0)&&!U(C)]]))],64)})),128)),(null==(t=e.options.btns)?void 0:t.hide)?h("",!0):(p(),i(N,s({key:0,span:(null==(E=e.options.btns)?void 0:E.span)||12},null==(Z=e.options.btns)?void 0:Z.col),{default:n((()=>[r(Y,{wrap:""},{default:n((()=>[v(e.$slots,"suffix",{},(()=>{var o;return[r(S,{type:"primary",onClick:l[0]||(l[0]=e=>F("search"))},{icon:n((()=>[r(Q)])),default:n((()=>{var l;return[w(g((null==(l=e.options.btns)?void 0:l.searchBtnText)||"搜索"),1)]})),_:1}),r(S,{onClick:l[1]||(l[1]=e=>F("reset"))},{default:n((()=>[w("重置")])),_:1}),(null==(o=e.options.fold)?void 0:o.enable)?(p(),i(S,{key:0,type:"text",size:"mini",onClick:l[2]||(l[2]=e=>C.value=!U(C))},{icon:n((()=>[U(C)?(p(),i(X,{key:1})):(p(),i(W,{key:0}))])),default:n((()=>[w(g(U(C)?"展开":"收起"),1)])),_:1})):h("",!0)]}))])),_:3})])),_:3},16,["span"]))]})),_:3},16)])),_:3},16,["model"])}}});export{x as _};
